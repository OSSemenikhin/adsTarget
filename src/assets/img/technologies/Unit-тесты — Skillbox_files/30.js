(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"6VxW":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var o=n("D57K"),s=n("ruzS"),i=n("lzje"),a=n("xzqx"),c=n("wTjk"),r=n("w0kG"),l=n("TLy2"),u=n("wqq/"),d=n("YtkY"),p=n("xVbo"),g=n("lDeo"),_=n("EM62");let h=(()=>{let t=class{constructor(t,e){this.permissionsFacade=t,this.tutorialSerivce=e}init(){const t=Object(c.a)(this.tutorialSerivce.prevItem$,this.tutorialSerivce.nextItem$,this.tutorialSerivce.topicItem$).pipe(Object(r.a)(this.tutorialSerivce.tree$),Object(l.a)((([[t,e,n],o])=>this.getSiblingsLessonPermissions(t,e,n,o))),Object(u.a)(1),Object(a.b)(this));this.currentItemPermission$=t.pipe(Object(d.a)((t=>t.current))),this.prevItemPermission$=t.pipe(Object(d.a)((t=>t.prev))),this.nextItemPermission$=t.pipe(Object(d.a)((t=>t.next))),this.isReadonly$=this.currentItemPermission$.pipe(Object(d.a)((t=>t.access_level===s.v.AccessLevelEnum.READ_ONLY))),this.readonlyReason$=this.currentItemPermission$.pipe(Object(d.a)((t=>t.reason)))}getSiblingsLessonPermissions(t,e,n,o){const s=[null==t?void 0:t.id,null==e?void 0:e.id,null==n?void 0:n.id].filter((t=>!!t));return this.permissionsFacade.checkLessons(o.id,s),this.permissionsFacade.selectByLessonIds(s).pipe(Object(p.a)((t=>!!(null==t?void 0:t.length))),Object(d.a)((o=>({prev:o.find((e=>e.lesson_id===(null==t?void 0:t.id))),next:o.find((t=>t.lesson_id===(null==e?void 0:e.id))),current:o.find((t=>t.lesson_id===(null==n?void 0:n.id)))}))),Object(a.b)(this))}};return t.\u0275fac=function(e){return new(e||t)(_.Oc(i.a),_.Oc(g.a))},t.\u0275prov=_.wc({token:t,factory:t.\u0275fac}),t=Object(o.b)([Object(a.a)()],t),t})()},"7WrI":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o=n("nIj0"),s=n("ruzS"),i=n("oWo4"),a=n("SnGv"),c=n("EM62"),r=n("UbP3");let l=(()=>{class t{constructor(t){this.fb=t}buildForm(t){return this.fb.group({steps:this.fb.array(t.questions.map((t=>this.fb.group(t.type===s.Wb.TypeEnum.MULTIPLE_RIGHT_ANSWER?{answer:this.fb.array(t.answers.map((()=>!1)),[a.w])}:t.type===s.Wb.TypeEnum.ONE_RIGHT_ANSWER?{answer:this.fb.control(null,[o.I.required,Object(a.q)()])}:{answer:this.fb.control(null,[o.I.required,o.I.maxLength(i.d.validators.maxLength),Object(a.q)()])}))))})}}return t.\u0275fac=function(e){return new(e||t)(c.Oc(r.b))},t.\u0275prov=c.wc({token:t,factory:t.\u0275fac}),t})()},"8Wzv":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var o=function(t){return t[t.rating=1]="rating",t[t.reason=2]="reason",t[t.commentRequest=3]="commentRequest",t[t.comment=4]="comment",t[t.thanks=5]="thanks",t}({});const s={ratingStep:o.rating,optionsStep:[o.reason,o.commentRequest],commentStep:o.comment,thanksStep:o.thanks}},CVXH:function(t,e,n){"use strict";n.d(e,"a",(function(){return J})),n.d(e,"b",(function(){return tt})),n.d(e,"c",(function(){return B})),n.d(e,"d",(function(){return q}));var o=n("ruzS"),s=n("oWo4"),i=n("xo/y"),a=n("xeA8"),c=n("3oUN"),r=n("ROBh"),l=n("HM3f"),u=n("47ST"),d=n("TLy2"),p=n("YtkY"),g=n("4e/d"),_=n("ZzcO"),h=n("J+dc"),m=n("8j5Y"),b=n("kuMc"),C=n("cJ9h");const f=Object(c.n)("[longread-tutorial] [Command] Load Longread Tutorial",Object(c.s)()),O=Object(c.n)("[longread-tutorial] [Query] Load Longread Tutorial -> Success",Object(c.s)()),v=Object(c.n)("[longread-tutorial] [Query] Load Longread Tutorial -> Failure"),x=Object(c.n)("[longread-tutorial] [Command] Complete content block",Object(c.s)()),w=Object(c.n)("[longread-tutorial] [Query] Complete content block -> Success",Object(c.s)()),T=Object(c.n)("[longread-tutorial] [Query] Complete content block -> Failure",Object(c.s)()),P=Object(c.n)("[longread-tutorial] [Command] Update Video Content Unit Progress",Object(c.s)()),M=Object(c.n)("[longread-tutorial] [Query] Update Video Content Unit Progress -> Success",Object(c.s)()),y=Object(c.n)("[longread-tutorial] [Query] Update Video Content Unit Progress -> Failure"),E=Object(c.n)("[longread-tutorial] [Command] Send Longread Test Answer",Object(c.s)()),k=Object(c.n)("[longread-tutorial] [Query] Send Longread Test Answer -> Success",Object(c.s)()),I=Object(c.n)("[longread-tutorial] [Query] Send Longread Test Answer -> Failure");var S=n("hSmh"),F=n("CLzx"),G=n("X3C0");class A{static mapContentBlocksToViewModel(t){const e=[];for(const n of t){const t=[...A.mapTextContentUnitsToViewModel(n.content.texts),...A.mapVideoContentUnitsToViewModel(n.content.videos),...A.mapTestContentUnitsToViewModel(n.content.tests)];A.sortListByNumber(t),e.push(Object.assign(Object.assign({},Object(G.a)(n,"content")),{contentUnits:t}))}return A.sortListByNumber(e)}static mapTextContentUnitsToViewModel(t){return(t||[]).map((t=>Object.assign(Object.assign({},t),{contentType:S.d.ValueEnum.Text})))}static mapVideoContentUnitsToViewModel(t){return(t||[]).map((t=>Object.assign(Object.assign({},t),{contentType:S.d.ValueEnum.Video,is_completed:!!t.video_progress_timestamp})))}static mapTestContentUnitsToViewModel(t){return(t||[]).map((t=>{var e;return Object.assign(Object.assign({},t),{contentType:S.d.ValueEnum.Test,is_completed:!!(null===(e=t.question.correct_answers)||void 0===e?void 0:e.length)})}))}static sortListByNumber(t){return t.sort(((t,e)=>t.number-e.number))}}const B="longreadTutorial",j=Object(F.a)(),L=j.getInitialState(),R=Object(c.p)(L,Object(c.r)(f,(()=>L)),Object(c.r)(O,((t,{longread:e})=>{const n=A.mapContentBlocksToViewModel(e.blocks);return j.setAll(n,Object.assign(Object.assign({},t),Object(G.a)(e,"blocks")))})),Object(c.r)(w,((t,{id:e})=>{var n;const o=!(null===(n=t.entities[e])||void 0===n?void 0:n.next_block_id);return j.updateOne({id:e,changes:{is_completed:!0}},Object.assign(Object.assign({},t),{is_completed:o}))})),Object(c.r)(M,((t,{blockId:e,videoId:n})=>{const o=t.entities[e],s=o.contentUnits.findIndex((t=>t.contentType===S.d.ValueEnum.Video&&t.id===n)),i=o.contentUnits[s];if(i.is_completed)return t;const a=[...o.contentUnits],c=Object.assign(Object.assign({},i),{is_completed:!0});return a.splice(s,1,c),j.updateOne({id:e,changes:{contentUnits:a}},t)})),Object(c.r)(k,((t,{blockId:e,contentId:n,result:o})=>{const s=t.entities[e],i=s.contentUnits.findIndex((t=>t.contentType===S.d.ValueEnum.Test&&t.id===n)),a=s.contentUnits[i],c=[...s.contentUnits],r=Object.assign(Object.assign({},a),{is_completed:!0,question:Object.assign(Object.assign({},a.question),{correct_answers:o.correct_answers,is_correct:o.is_correct,comment:o.comment,user_answers:o.answers})});return c.splice(i,1,r),j.updateOne({id:e,changes:{contentUnits:c}},t)})));function q(t,e){return R(t,e)}const{selectAll:W,selectEntities:N}=j.getSelectors(),D=Object(c.o)(B),$=Object(c.q)(D,(t=>t.id)),U=Object(c.q)(D,(t=>t.content_version)),X=Object(c.q)(D,W),Y=Object(c.q)(D,N),V=Object(c.q)(X,(t=>{const e=t.slice().reverse().findIndex((t=>t.is_completed));return t.slice(0,-1===e?1:t.length-e+1)})),H=Object(c.q)(X,(t=>t.every((t=>t.is_completed)))),z=Object(c.q)(X,(t=>t.find((t=>!t.is_completed))||t[t.length-1]));var Q=n("EM62"),K=n("QBoQ");let J=(()=>{class t{constructor(t,e,n,S){this.actions$=t,this.store=e,this.studentsLongreadsService=n,this.coursesFacade=S,this.loadLongreadTutorial$=Object(a.c)((()=>this.actions$.pipe(Object(a.d)(f),Object(d.a)((({id:t,X_LA_TOKEN:e})=>this.studentsLongreadsService.v3StudentsLongreadsRead({id:t,xLATOKEN:e}).pipe(Object(p.a)((t=>O({longread:t}))),Object(g.a)((()=>Object(r.a)(v()))))))))),this.openNextContentBlock$=Object(a.c)((()=>this.actions$.pipe(Object(a.d)(x),Object(_.a)((({courseId:t})=>Object(l.a)([this.store.pipe(Object(c.t)(z)),this.store.pipe(Object(c.t)($)),this.store.pipe(Object(c.t)(U))]).pipe(Object(h.a)(1),Object(d.a)((([{id:e,next_block_id:n},c,l])=>this.studentsLongreadsService.v3StudentsLongreadsContentBlocksFinishCreate({contentBlockId:e,lessonId:c,data:{content_version:l}}).pipe(Object(m.a)((()=>{!n&&this.coursesFacade.updateTopicItemUserStatus(t,c,o.ob.UserStatusEnum.DONE)})),Object(p.a)((()=>w({id:e}))),Object(g.a)((t=>{var e,n,o;return t.status===s.a.BAD_REQUEST&&"validation_error"===(null===(e=t.error)||void 0===e?void 0:e.type)&&void 0!==(null===(o=null===(n=t.error)||void 0===n?void 0:n.data)||void 0===o?void 0:o.content_version)?Object(r.a)(T({versionValidation:!0})):Object(u.a)(t)})),Object(i.a)(),Object(g.a)((()=>Object(r.a)(T({})))),Object(b.a)(this.actions$.pipe(Object(a.d)(f)))))))))))),this.updateVideoContentUnitProgress$=Object(a.c)((()=>this.actions$.pipe(Object(a.d)(P),Object(C.a)((({blockId:t,videoId:e,video_progress_timestamp:n})=>this.store.pipe(Object(c.t)($)).pipe(Object(h.a)(1),Object(d.a)((o=>this.studentsLongreadsService.v3StudentsLongreadsVideosProgressCreate({contentId:e,lessonId:o,data:{video_progress_timestamp:n}}).pipe(Object(p.a)((()=>M({blockId:t,videoId:e}))),Object(g.a)((()=>Object(r.a)(y()))),Object(b.a)(this.actions$.pipe(Object(a.d)(f)))))))))))),this.sendLongreadTestAnswer$=Object(a.c)((()=>this.actions$.pipe(Object(a.d)(E),Object(C.a)((({blockId:t,contentId:e,answers:n})=>this.store.pipe(Object(c.t)($)).pipe(Object(h.a)(1),Object(d.a)((o=>this.studentsLongreadsService.v3StudentsLongreadsQuestionsAnswerCreate({contentId:e,lessonId:o,data:{answers:n}}).pipe(Object(p.a)((n=>k({blockId:t,contentId:e,result:n}))),Object(i.a)(),Object(g.a)((()=>Object(r.a)(I()))),Object(b.a)(this.actions$.pipe(Object(a.d)(f))))))))))))}}return t.\u0275fac=function(e){return new(e||t)(Q.Oc(a.a),Q.Oc(c.h),Q.Oc(o.Ff),Q.Oc(K.a))},t.\u0275prov=Q.wc({token:t,factory:t.\u0275fac}),t})();var Z=n("xVbo");let tt=(()=>{class t{constructor(t,e){this.store=t,this.actions$=e,this.id$=this.store.pipe(Object(c.t)($)),this.isCompleted$=this.store.pipe(Object(c.t)(H)),this.contentBlockEntities$=this.store.pipe(Object(c.t)(Y)),this.availableContentBlocks$=this.store.pipe(Object(c.t)(V)),this.currentContentBlock$=this.store.pipe(Object(c.t)(z)).pipe(Object(Z.a)((t=>!!t))),this.loadLongreadTutorialSuccessAction$=this.actions$.pipe(Object(a.d)(O)),this.completeContentBlockSuccessAction$=this.actions$.pipe(Object(a.d)(w)),this.completeContentBlockFailureAction$=this.actions$.pipe(Object(a.d)(T)),this.answerLongreadTestSuccessAction$=this.actions$.pipe(Object(a.d)(k))}loadLongreadTutorial(t,e){this.store.dispatch(f({id:t,X_LA_TOKEN:e}))}completeContentBlock(t){this.store.dispatch(x({courseId:t}))}updateVideoContentUnitProgress(t,e,n){this.store.dispatch(P({blockId:t,videoId:e,video_progress_timestamp:n}))}sendLongreadTestAnswer(t,e,n){this.store.dispatch(E({blockId:t,contentId:e,answers:n}))}}return t.\u0275fac=function(e){return new(e||t)(Q.Oc(c.h),Q.Oc(a.a))},t.\u0275prov=Q.wc({token:t,factory:t.\u0275fac}),t})()},EMWv:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(t){return t.PLAY="play",t.PAUSE="pause",t.STOP="stop",t.TIME="time",t.LOADED="loaded",t.SET_VIDEO_FULLSCREEN="set_video_fullscreen",t}({})},FZJX:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var o=n("ruzS"),s=n("wFCB"),i=n("8Wzv"),a=n("cXTK"),c=n("RmUC"),r=n("bxfK"),l=n("cdws");class u{static logGrade(t,e){switch(Number(t)){case 1:u.sendEvent(a.a.EventTypeEnum.LessonEvaluationsGrade1,e);break;case 2:u.sendEvent(a.a.EventTypeEnum.LessonEvaluationsGrade2,e);break;case 3:u.sendEvent(a.a.EventTypeEnum.LessonEvaluationsGrade3,e);break;case 4:u.sendEvent(a.a.EventTypeEnum.LessonEvaluationsGrade4,e);break;case 5:u.sendEvent(a.a.EventTypeEnum.LessonEvaluationsGrade5,e)}}static logCommenting(t){u.sendEvent(a.a.EventTypeEnum.LessonEvaluationsCommenting,t)}static logCommented(t){u.sendEvent(a.a.EventTypeEnum.LessonEvaluationsCommented,t)}static sendEvent(t,e){if(!c.a.instance)throw new Error("TutorialEvaluationLogger: LogBus is not initialized");const n=new l.a({event_type:t,event_params:{lesson_token:e}});c.a.instance.log(new r.a({immediateDispatch:!0,message:n}))}}class d extends u{static logReason(t){d.sendEvent(a.a.EventTypeEnum.LessonEvaluationsReason,t)}}class p extends s.a{constructor(t,e){super(t),this.onStepFinish(i.a.rating,(t=>{d.logGrade(t.value,e)})),this.onStepFinish(i.a.reason,(()=>{d.logReason(e)})),this.onStepStart(i.a.comment,(()=>{d.logCommenting(e)})),this.onStepFinish(i.a.comment,(()=>{d.logCommented(e)}))}resolveStep(t,e,n){const s=n.length+1;return 1===s?i.a.rating:2===s?i.a.reason:3===s?i.a.commentRequest:4===s&&(null==t?void 0:t.type)===o.Ub.TypeEnum.INPUT?i.a.comment:i.a.thanks}}},"G/jq":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("jWc3");function s(t,e,n){const s=n.value;n.value=function(t,e,n,i){var a;return!!(null===(a=null==i?void 0:i.url)||void 0===a?void 0:a.includes(o.a.AUTH))||s.call(this,t,e,n,i)}}},G8aL:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n("XJ1h"),s=n("EM62");let i=(()=>{class t{transform(t,e=2){return Object(o.a)(t)?"0".repeat(e):t.toString(10).padStart(e,"0")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.zc({name:"leadingZero",type:t,pure:!0}),t})()},J6YB:function(t,e,n){"use strict";n.d(e,"a",(function(){return de}));var o=n("D57K"),s=n("ruzS"),i=n("hSmh"),a=n("ABPI"),c=n("QBoQ"),r=n("QffU"),l=n("MfMy"),u=n("5h/E"),d=n("Jzyt"),p=n("xzqx"),g=n("wN7T"),_=n("QQZH"),h=n("HM3f"),m=n("YtkY"),b=n("wqq/"),C=n("BwBJ"),f=n("5uDM"),O=n("J+dc"),v=n("xVbo"),x=n("TLy2"),w=n("mWib"),T=n("XjBf"),P=n("sn6r"),M=n("lDeo"),y=n("8Wzv"),E=n("EM62"),k=n("CVXH"),I=n("sEIs"),S=n("ZTXN"),F=n("kuMc");let G=(()=>{let t=class{constructor(){this.videoPlayers=[]}registerVideoPlayer(t){this.videoPlayers.includes(t)||(this.initListeners(t),this.videoPlayers.push(t))}initListeners(t){const e=new S.a;t.volumeChange.pipe(Object(F.a)(e),Object(p.b)(this)).subscribe((t=>this.videoPlayers.forEach((e=>e.setVolume(t,{skipEvent:!0}))))),t.speedChange.pipe(Object(F.a)(e),Object(p.b)(this)).subscribe((t=>{const e=parseFloat(t);this.videoPlayers.forEach((t=>t.setPlaybackRate(e,{skipEvent:!0})))})),t.qualityChange.pipe(Object(F.a)(e),Object(p.b)(this)).subscribe((t=>{const e="auto"===t?t:parseInt(t,10);this.videoPlayers.forEach((t=>t.setQualityLevel(e,{skipEvent:!0})))})),t.startPlaying.pipe(Object(F.a)(e),Object(p.b)(this)).subscribe((()=>{this.videoPlayers.forEach((e=>{e!==t&&e.pause({skipEvent:!0})}))})),t.destroyed.pipe(Object(O.a)(1),Object(p.b)(this)).subscribe((()=>{e.next();const n=this.videoPlayers.findIndex((e=>t===e));-1!==n&&this.videoPlayers.splice(n,1)}))}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=E.wc({token:t,factory:t.\u0275fac}),t=Object(o.b)([Object(p.a)()],t),t})();var A=n("bxfK"),B=n("cdws"),j=n("cXTK"),L=n("RmUC");let R=(()=>{class t{constructor(t,e){this.longreadTutorialFacade=t,this.logBus=e}logContinueTutorial(t){var e;const n=Object(r.a)(this.longreadTutorialFacade.id$),o=null===(e=Object(r.a)(this.longreadTutorialFacade.currentContentBlock$))||void 0===e?void 0:e.id,s=new B.a({event_type:j.a.EventTypeEnum.longread_tutorial_continue_click,event_params:{block_id:o,longread_id:n,course_id:t}});this.logBus.log(new A.a({immediateDispatch:!0,message:s}))}logNextTopic(t){const e=Object(r.a)(this.longreadTutorialFacade.id$),n=new B.a({event_type:j.a.EventTypeEnum.longread_tutorial_next_lesson_click,event_params:{longread_id:e,course_id:t}});this.logBus.log(new A.a({immediateDispatch:!0,message:n}))}logCourseCompleted(t){const e=Object(r.a)(this.longreadTutorialFacade.id$),n=new B.a({event_type:j.a.EventTypeEnum.longread_tutorial_complete_course_click,event_params:{longread_id:e,course_id:t}});this.logBus.log(new A.a({immediateDispatch:!0,message:n}))}logVideoProgress(t,e,n){const o=Object(r.a)(this.longreadTutorialFacade.id$),s=new B.a({event_type:j.a.EventTypeEnum.longread_tutorial_video_progress,event_params:{videoId:t,video_progress_timestamp:`${e}`,longread_id:o,course_id:n}});this.logBus.log(new A.a({immediateDispatch:!0,message:s}))}logTestAnswers(t,e,n){const o=Object(r.a)(this.longreadTutorialFacade.id$),s=new B.a({event_type:j.a.EventTypeEnum.longread_tutorial_test_answer,event_params:{test_id:t,answers:e.toString(),longread_id:o,course_id:n}});this.logBus.log(new A.a({immediateDispatch:!0,message:s}))}}return t.\u0275fac=function(e){return new(e||t)(E.Oc(k.b),E.Oc(L.a))},t.\u0275prov=E.wc({token:t,factory:t.\u0275fac}),t})();var q=n("2kYt"),W=n("RQ93"),N=n("puZz"),D=n("GsfJ"),$=n("xbKN"),U=n("nlu2"),X=n("po9k");let Y=(()=>{class t extends $.a{constructor(t){super(),this.videoPlayersSyncService=t,this.watchTimeUpdated=new E.t}ngOnInit(){this.videoPlayersSyncService.registerVideoPlayer(this.videoPlayer)}onInitialized(t){this.initVideoWatchTimeReporter(t)}onWatchTimeUpdated(t){this.watchTimeUpdated.emit(t)}onStartPlaying(t){this.video.is_completed||this.onWatchTimeUpdated(Math.floor(t)||1)}}return t.\u0275fac=function(e){return new(e||t)(E.Ac(G))},t.\u0275cmp=E.uc({type:t,selectors:[["app-longread-tutorial-video-unit"]],viewQuery:function(t,e){var n;1&t&&E.Ad(U.a,!0),2&t&&E.rd(n=E.Tc())&&(e.videoPlayer=n.first)},inputs:{video:"video"},outputs:{watchTimeUpdated:"watchTimeUpdated"},features:[E.kc],decls:1,vars:3,consts:[[3,"src","duration","startAt","initialized","startPlaying"]],template:function(t,e){1&t&&(E.Gc(0,"app-sb-video-player-wrapper",0),E.Sc("initialized",(function(t){return e.onInitialized(t)}))("startPlaying",(function(t){return e.onStartPlaying(t)})),E.Fc()),2&t&&E.ed("src",e.video.link)("duration",e.video.duration)("startAt",e.video.video_progress_timestamp)},directives:[X.a],styles:["[_nghost-%COMP%]{display:block}app-sb-video-player-wrapper[_ngcontent-%COMP%]{margin:24px 0}@media (min-width:768px){app-sb-video-player-wrapper[_ngcontent-%COMP%]{margin:32px 0}}"],changeDetection:0}),t})();var V=n("/6GX"),H=n("oi1H"),z=n("nIj0"),Q=n("SnGv"),K=n("UbP3");let J=(()=>{class t{constructor(t){this.fb=t}buildForm(t){switch(t.type){case s.Xb.ValueEnum.ONE_RIGHT_ANSWER:return this.fb.group({answer:[null,z.I.required]});case s.Xb.ValueEnum.MULTIPLE_RIGHT_ANSWER:return this.fb.group({answer:this.fb.array(t.answers.map((()=>!1)),[Q.w])});default:return this.fb.group({answer:[null,[z.I.required,Object(Q.q)()]]})}}buildModel(t){const e=t.value.answer;return"string"==typeof e?[e]:(null==e?void 0:e.filter((t=>!!t)))||[]}}return t.\u0275fac=function(e){return new(e||t)(E.Oc(K.b))},t.\u0275prov=E.wc({token:t,factory:t.\u0275fac}),t})();var Z=n("jR34"),tt=n("cfBW");function et(t,e){1&t&&(E.Ec(0),E.Bc(1,"div",4),E.Dc())}function nt(t,e){1&t&&(E.Ec(0),E.Gc(1,"div",5),E.Bc(2,"svg-icon",6),E.Fc(),E.Dc())}function ot(t,e){1&t&&E.Cc(0)}var st=function(t){return t.RADIO="radio",t.CHECKBOX="checkbox",t.INPUT="input",t}({}),it=function(t){return t.CORRECT="correct",t.INCORRECT="incorrect",t.CORRECT_AND_UNSELECTED="correct_and_unselected",t.DISABLED="disabled",t}({});const at={[it.CORRECT]:"correct",[it.INCORRECT]:"incorrect",[it.CORRECT_AND_UNSELECTED]:"unselected",[it.DISABLED]:"disabled"};let ct=(()=>{class t{constructor(){this.typeResult=st}getClass(t){return this.type===st.INPUT?`longread-result__input-content longread-result__input-content--${at[t]}`:`longread-result__content longread-result__content--${at[t]}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=E.uc({type:t,selectors:[["app-longread-answer-result"]],inputs:{type:"type",status:"status",text:"text"},decls:8,vars:10,consts:[[3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"longread-result__text","ui-sb-p--1"],[1,"longread-result__radio"],[1,"longread-result__checkbox"],["name","checked"]],template:function(t,e){1&t&&(E.Gc(0,"div",0),E.Xc(1,"cache"),E.Ec(2,1),E.Ed(3,et,2,0,"ng-container",2),E.Ed(4,nt,3,0,"ng-container",2),E.Ed(5,ot,1,0,"ng-container",2),E.Dc(),E.Gc(6,"div",3),E.Gd(7),E.Fc(),E.Fc()),2&t&&(E.ed("ngClass",E.ad(1,6,e.status,e.getClass,e)),E.nc(2),E.ed("ngSwitch",e.type),E.nc(1),E.ed("ngSwitchCase",e.typeResult.RADIO),E.nc(1),E.ed("ngSwitchCase",e.typeResult.CHECKBOX),E.nc(1),E.ed("ngSwitchCase",e.typeResult.INPUT),E.nc(2),E.Hd(e.text))},directives:[q.r,q.y,q.z,Z.a],pipes:[tt.a],styles:['[_nghost-%COMP%]{display:block}.longread-result__content[_ngcontent-%COMP%]{position:relative;display:flex;padding:16px;border-radius:10px;-webkit-user-select:none;user-select:none}@media (min-width:768px){.longread-result__content[_ngcontent-%COMP%]{padding:20px 24px}}@media (min-width:1024px){.longread-result__content[_ngcontent-%COMP%]{padding:24px 32px}}.longread-result__content[_ngcontent-%COMP%]   .longread-result__checkbox[_ngcontent-%COMP%]{border-radius:3px}.longread-result__content[_ngcontent-%COMP%]   .longread-result__radio[_ngcontent-%COMP%]{border-radius:50%}.longread-result__content--correct[_ngcontent-%COMP%]{background-color:var(--ui-sb-color-element-success-secondary)}.longread-result__content--correct[_ngcontent-%COMP%]   .longread-result__checkbox[_ngcontent-%COMP%]{background-color:var(--ui-sb-color-element-success);color:var(--ui-sb-color-element-always-white)}.longread-result__content--correct[_ngcontent-%COMP%]   .longread-result__radio[_ngcontent-%COMP%]{border:7px solid var(--ui-sb-color-element-success)}.longread-result__content--incorrect[_ngcontent-%COMP%]{background-color:var(--ui-sb-color-element-danger-secondary)}.longread-result__content--incorrect[_ngcontent-%COMP%]   .longread-result__checkbox[_ngcontent-%COMP%]{background-color:var(--ui-sb-color-element-danger);color:var(--ui-sb-color-element-always-white)}.longread-result__content--incorrect[_ngcontent-%COMP%]   .longread-result__radio[_ngcontent-%COMP%]{border:7px solid var(--ui-sb-color-element-danger)}.longread-result__content--unselected[_ngcontent-%COMP%]:before{top:0;right:0;bottom:0;left:0;position:absolute;width:100%;height:100%;content:"";border:3px solid var(--ui-sb-color-element-success-secondary);border-radius:inherit}.longread-result__content--disabled[_ngcontent-%COMP%]{background-color:var(--ui-sb-color-bg-secondary)}.longread-result__content--disabled[_ngcontent-%COMP%]   .longread-result__checkbox[_ngcontent-%COMP%], .longread-result__content--disabled[_ngcontent-%COMP%]   .longread-result__radio[_ngcontent-%COMP%], .longread-result__content--unselected[_ngcontent-%COMP%]   .longread-result__checkbox[_ngcontent-%COMP%], .longread-result__content--unselected[_ngcontent-%COMP%]   .longread-result__radio[_ngcontent-%COMP%]{border:1px solid var(--ui-sb-color-text-disable)}.longread-result__content--disabled[_ngcontent-%COMP%]   .longread-result__checkbox[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%], .longread-result__content--disabled[_ngcontent-%COMP%]   .longread-result__radio[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%], .longread-result__content--unselected[_ngcontent-%COMP%]   .longread-result__checkbox[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%], .longread-result__content--unselected[_ngcontent-%COMP%]   .longread-result__radio[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{display:none}.longread-result__content--disabled[_ngcontent-%COMP%]   .longread-result__checkbox[_ngcontent-%COMP%], .longread-result__content--unselected[_ngcontent-%COMP%]   .longread-result__checkbox[_ngcontent-%COMP%]{border-radius:3px}.longread-result__content--disabled[_ngcontent-%COMP%]   .longread-result__radio[_ngcontent-%COMP%], .longread-result__content--unselected[_ngcontent-%COMP%]   .longread-result__radio[_ngcontent-%COMP%]{border-radius:50%}.longread-result__input-content[_ngcontent-%COMP%]{padding:18px 16px;border-radius:10px}@media (min-width:768px){.longread-result__input-content[_ngcontent-%COMP%]{padding:18px}}.longread-result__input-content[_ngcontent-%COMP%]   .longread-result__text[_ngcontent-%COMP%]{margin:0}.longread-result__input-content--correct[_ngcontent-%COMP%]{border:1px solid var(--ui-sb-color-element-success);background-color:var(--ui-sb-color-element-success-secondary)}.longread-result__input-content--incorrect[_ngcontent-%COMP%]{border:1px solid var(--ui-sb-color-element-danger);background-color:var(--ui-sb-color-bg-main)}.longread-result__checkbox[_ngcontent-%COMP%], .longread-result__radio[_ngcontent-%COMP%]{width:20px;height:20px;position:relative;flex-shrink:0}@media (min-width:768px){.longread-result__checkbox[_ngcontent-%COMP%], .longread-result__radio[_ngcontent-%COMP%]{margin-top:1px}}@media (min-width:1024px){.longread-result__checkbox[_ngcontent-%COMP%], .longread-result__radio[_ngcontent-%COMP%]{margin-top:2px}}@media (min-width:1600px){.longread-result__checkbox[_ngcontent-%COMP%], .longread-result__radio[_ngcontent-%COMP%]{margin-top:4px}}.longread-result__text[_ngcontent-%COMP%]{margin-left:12px}@media (min-width:768px){.longread-result__text[_ngcontent-%COMP%]{margin-left:16px}}'],changeDetection:0}),t})();const rt=[[["app-longread-test-card-title"],["","app-longread-test-card-title",""],["","appLongreadTestCardTitle",""]],[["app-longread-test-card-tag"],["","app-longread-test-card-tag",""],["","appLongreadTestCardTag",""]],[["app-longread-test-card-body"],["","app-longread-test-card-body",""],["","appLongreadTestCardBody",""]],[["app-longread-test-card-footer"],["","app-longread-test-card-footer",""],["","appLongreadTestFooterBody",""]]],lt=["app-longread-test-card-title, [app-longread-test-card-title], [appLongreadTestCardTitle]","app-longread-test-card-tag, [app-longread-test-card-tag], [appLongreadTestCardTag]","app-longread-test-card-body, [app-longread-test-card-body], [appLongreadTestCardBody]","app-longread-test-card-footer, [app-longread-test-card-footer], [appLongreadTestFooterBody]"];let ut=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=E.uc({type:t,selectors:[["app-longread-test-card"]],ngContentSelectors:lt,decls:4,vars:0,template:function(t,e){1&t&&(E.dd(rt),E.cd(0),E.cd(1,1),E.cd(2,2),E.cd(3,3))},styles:["[_nghost-%COMP%]{display:block;padding:20px;border:1px solid var(--ui-sb-color-stroke-main);border-radius:20px}@media (min-width:768px){[_nghost-%COMP%]{padding:32px}}[_nghost-%COMP%]     app-longread-test-card-body, [_nghost-%COMP%]     app-longread-test-card-footer, [_nghost-%COMP%]     app-longread-test-card-title{display:block}[_nghost-%COMP%]     app-longread-test-card-tag{display:inline-flex;padding:4px 12px;border-radius:4px;background-color:var(--ui-sb-color-bg-secondary-accent)}[_nghost-%COMP%]     app-longread-test-card-body, [_nghost-%COMP%]     app-longread-test-card-tag, [_nghost-%COMP%]     app-longread-test-card-title{margin-bottom:16px}@media (min-width:768px){[_nghost-%COMP%]     app-longread-test-card-body, [_nghost-%COMP%]     app-longread-test-card-tag, [_nghost-%COMP%]     app-longread-test-card-title{margin-bottom:20px}}"],changeDetection:0}),t})(),dt=(()=>{class t{constructor(){this.hostClass="ui-sb-p--1"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=E.vc({type:t,selectors:[["app-longread-test-card-title"],["","app-longread-test-card-title",""],["","appLongreadTestCardTitle",""]],hostVars:2,hostBindings:function(t,e){2&t&&E.pc(e.hostClass)},exportAs:["app-longread-test-card-title"]}),t})(),pt=(()=>{class t{constructor(){this.hostClass="ui-sb-f--4"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=E.vc({type:t,selectors:[["app-longread-test-card-tag"],["","app-longread-test-card-tag",""],["","appLongreadTestCardTag",""]],hostVars:2,hostBindings:function(t,e){2&t&&E.pc(e.hostClass)},exportAs:["app-longread-test-card-tag"]}),t})(),gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=E.vc({type:t,selectors:[["app-longread-test-card-body"],["","app-longread-test-card-body",""],["","appLongreadTestCardBody",""]],exportAs:["app-longread-test-card-body"]}),t})(),_t=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=E.vc({type:t,selectors:[["app-longread-test-card-footer"],["","app-longread-test-card-footer",""],["","appLongreadTestFooterBody",""]],exportAs:["app-longread-test-card-footer"]}),t})();var ht=n("zrUn"),mt=n("Ht+D"),bt=n("K3eu"),Ct=n("DYRb"),ft=n("PRc/"),Ot=n("DtU0");function vt(t,e){if(1&t&&(E.Gc(0,"ui-sb-radio-button",2),E.Gc(1,"div",3),E.Gd(2),E.Fc(),E.Fc()),2&t){const t=e.$implicit;E.ed("value",t.id),E.nc(2),E.Hd(t.label)}}let xt=(()=>{class t extends mt.a{constructor(t,e,n){super(n,e),this.fb=t,this.formErrorsService=e,this.controlContainer=n,this.answerForm=this.fb.group({answer:[null,[z.I.required]]})}}return t.\u0275fac=function(e){return new(e||t)(E.Ac(K.b),E.Ac(bt.a),E.Ac(z.d))},t.\u0275cmp=E.uc({type:t,selectors:[["app-longread-one-right-answer"]],inputs:{question:"question"},features:[E.mc([{provide:z.t,useExisting:t,multi:!0}]),E.kc],decls:3,vars:5,consts:[[3,"formControl"],["radioSize","large",3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["radioSize","large",3,"value"],[1,"ui-sb-p--1"]],template:function(t,e){1&t&&(E.Gc(0,"ui-sb-radio-group",0),E.Ed(1,vt,3,2,"ui-sb-radio-button",1),E.Xc(2,"trackBy"),E.Fc()),2&t&&(E.ed("formControl",e.control),E.nc(1),E.ed("ngForOf",null==e.question?null:e.question.answers)("ngForTrackBy",E.Yc(2,3,"$index")))},directives:[Ct.a,q.t,ft.a],pipes:[Ot.a],styles:["[_nghost-%COMP%]{display:block}ui-sb-radio-group[_ngcontent-%COMP%]     .ui-sb-radio-group{display:flex;flex-direction:column}ui-sb-radio-group[_ngcontent-%COMP%]     label{padding:16px}@media (min-width:768px){ui-sb-radio-group[_ngcontent-%COMP%]     label{padding:20px 24px}}@media (min-width:1024px){ui-sb-radio-group[_ngcontent-%COMP%]     label{padding:24px 32px}}ui-sb-radio-button[_ngcontent-%COMP%]{border-radius:10px;background-color:var(--ui-sb-color-bg-secondary)}ui-sb-radio-button[_ngcontent-%COMP%]:hover{background-color:var(--ui-sb-color-bg-secondary-accent)}ui-sb-radio-button[_ngcontent-%COMP%]:not(:last-child){margin-bottom:8px}"],changeDetection:0}),t})();var wt=n("t+Hr");function Tt(t,e){if(1&t&&(E.Gc(0,"ui-sb-checkbox",1),E.Gc(1,"div",2),E.Gd(2),E.Fc(),E.Fc()),2&t){const t=e.$implicit,n=e.index,o=E.Wc();E.ed("formControl",o.formArray.at(n))("value",t.id)("checkboxLarge",!0),E.nc(2),E.Hd(t.label)}}let Pt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=E.uc({type:t,selectors:[["app-longread-multiple-right-answer"]],inputs:{question:"question",formArray:"formArray"},decls:2,vars:4,consts:[[3,"formControl","value","checkboxLarge",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formControl","value","checkboxLarge"],[1,"label"]],template:function(t,e){1&t&&(E.Ed(0,Tt,3,4,"ui-sb-checkbox",0),E.Xc(1,"trackBy")),2&t&&E.ed("ngForOf",null==e.question?null:e.question.answers)("ngForTrackBy",E.Yc(1,2,"$index"))},directives:[q.t,wt.a,z.v,z.k],pipes:[Ot.a],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   ui-sb-checkbox[_ngcontent-%COMP%]{overflow:hidden;border-radius:10px;background-color:var(--ui-sb-color-bg-secondary)}[_nghost-%COMP%]   ui-sb-checkbox[_ngcontent-%COMP%]:hover{background-color:var(--ui-sb-color-bg-secondary-accent)}[_nghost-%COMP%]   ui-sb-checkbox[_ngcontent-%COMP%]:not(:last-child){margin-bottom:8px}[_nghost-%COMP%]   ui-sb-checkbox[_ngcontent-%COMP%]     label{padding:16px}@media (min-width:768px){[_nghost-%COMP%]   ui-sb-checkbox[_ngcontent-%COMP%]     label{padding:20px 24px}}@media (min-width:1024px){[_nghost-%COMP%]   ui-sb-checkbox[_ngcontent-%COMP%]     label{padding:24px 32px}}"],changeDetection:0}),t})();var Mt=n("Lbi2");let yt=(()=>{class t extends mt.a{constructor(t,e){super(e,t),this.formErrorsService=t,this.controlContainer=e}}return t.\u0275fac=function(e){return new(e||t)(E.Ac(bt.a),E.Ac(z.d))},t.\u0275cmp=E.uc({type:t,selectors:[["app-longread-input-answer"]],features:[E.mc([{provide:z.t,useExisting:t,multi:!0}]),E.kc],decls:3,vars:8,consts:[["data-i18n","longreadTutorial.yourAnswer",3,"formControl","autoSize","label","placeholder"]],template:function(t,e){1&t&&(E.Bc(0,"ui-sb-textarea",0),E.Xc(1,"transloco"),E.Xc(2,"transloco")),2&t&&E.ed("formControl",e.control)("autoSize",!0)("label",E.Yc(1,4,"longreadTutorial.yourAnswer"))("placeholder",E.Yc(2,6,"longreadTutorial.yourAnswerPlaceholder"))},directives:[Mt.a,z.v,z.k],pipes:[d.g],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),t})();const Et=["*"];let kt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=E.uc({type:t,selectors:[["app-longread-answer-wrapper"]],ngContentSelectors:Et,decls:1,vars:0,template:function(t,e){1&t&&(E.dd(),E.cd(0))},styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     app-longread-answer-result:not(:last-child){margin-bottom:8px}"],changeDetection:0}),t})();function It(t,e){1&t&&(E.Gc(0,"app-longread-test-card-tag",9),E.Gd(1),E.Xc(2,"transloco"),E.Fc()),2&t&&(E.nc(1),E.Id(" ",E.Yc(2,1,"longreadTutorial.oneRightAnswer")," "))}function St(t,e){1&t&&(E.Gc(0,"app-longread-test-card-tag",10),E.Gd(1),E.Xc(2,"transloco"),E.Fc()),2&t&&(E.nc(1),E.Id(" ",E.Yc(2,1,"longreadTutorial.multipleRightAnswer")," "))}function Ft(t,e){if(1&t&&(E.Gc(0,"app-longread-test-card-body"),E.Bc(1,"app-longread-one-right-answer",11),E.Fc()),2&t){const t=E.Wc(2);E.nc(1),E.ed("question",t.question)("formControl",t.form.controls.answer)}}function Gt(t,e){if(1&t&&(E.Gc(0,"app-longread-test-card-body"),E.Bc(1,"app-longread-multiple-right-answer",12),E.Fc()),2&t){const t=E.Wc(2);E.nc(1),E.ed("question",t.question)("formArray",t.form.controls.answer)}}function At(t,e){if(1&t&&(E.Gc(0,"app-longread-test-card-body"),E.Gc(1,"div",13),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Bc(4,"app-longread-input-answer",14),E.Fc()),2&t){const t=E.Wc(2);E.nc(2),E.Id(" ",E.Yc(3,2,"longreadTutorial.answer")," "),E.nc(2),E.ed("formControl",t.form.controls.answer)}}const Bt=function(t,e){return[t,e]};function jt(t,e){if(1&t){const t=E.Hc();E.Ec(0),E.Gc(1,"div",2),E.Gc(2,"app-longread-test-card",3),E.Gc(3,"app-longread-test-card-title"),E.Bc(4,"app-skb-froala-content",4),E.Fc(),E.Ed(5,It,3,3,"app-longread-test-card-tag",5),E.Ed(6,St,3,3,"app-longread-test-card-tag",6),E.Ed(7,Ft,2,2,"app-longread-test-card-body",7),E.Ed(8,Gt,2,2,"app-longread-test-card-body",7),E.Ed(9,At,5,4,"app-longread-test-card-body",7),E.Gc(10,"app-longread-test-card-footer"),E.Gc(11,"button",8),E.Sc("click",(function(){return E.ud(t),E.Wc().onSubmit()})),E.Gd(12),E.Xc(13,"transloco"),E.Fc(),E.Fc(),E.Fc(),E.Fc(),E.Dc()}if(2&t){const t=E.Wc();E.nc(1),E.ed("formGroup",t.form),E.nc(1),E.ed("ngSwitch",t.question.type),E.nc(2),E.ed("content",t.question.description),E.nc(1),E.ed("ngSwitchCase",t.testTypes.ONE_RIGHT_ANSWER),E.nc(1),E.ed("ngSwitchCase",t.testTypes.MULTIPLE_RIGHT_ANSWER),E.nc(1),E.ed("ngSwitchCase",t.testTypes.ONE_RIGHT_ANSWER),E.nc(1),E.ed("ngSwitchCase",t.testTypes.MULTIPLE_RIGHT_ANSWER),E.nc(1),E.ed("ngSwitchCase",t.testTypes.STRING_INPUT),E.nc(2),E.ed("disabled",t.form.invalid)("lockButtonWhileLoading",E.kd(13,Bt,t,t.onSubmit)),E.nc(1),E.Id(" ",E.Yc(13,11,"longreadTutorial.check")," ")}}function Lt(t,e){if(1&t&&(E.Gc(0,"app-longread-test-card-body"),E.Gc(1,"div",13),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Gc(4,"app-longread-answer-wrapper"),E.Bc(5,"app-longread-answer-result",19),E.Xc(6,"cache"),E.Fc(),E.Fc()),2&t){const t=E.Wc(2);E.nc(2),E.Id(" ",E.Yc(3,4,"longreadTutorial.answer")," "),E.nc(3),E.ed("type",t.testTypeMap[t.question.type])("status",E.ad(6,6,t.question,t.getTextAnswerStatus,t))("text",null!=t.question.user_answers&&t.question.user_answers.length?t.question.user_answers[0]:t.question.correct_answers[0])}}function Rt(t,e){if(1&t&&(E.Bc(0,"app-longread-answer-result",19),E.Xc(1,"cache")),2&t){const t=e.$implicit,n=E.Wc(3);E.ed("type",n.testTypeMap[n.question.type])("status",E.ad(1,3,t.id,n.getAnswerStatus,n))("text",t.label)}}function qt(t,e){if(1&t&&(E.Gc(0,"app-longread-test-card-body"),E.Gc(1,"app-longread-answer-wrapper"),E.Ed(2,Rt,2,7,"app-longread-answer-result",20),E.Fc(),E.Fc()),2&t){const t=E.Wc(2);E.nc(2),E.ed("ngForOf",t.question.answers)}}function Wt(t,e){1&t&&(E.Gc(0,"span",21),E.Gd(1),E.Xc(2,"transloco"),E.Fc()),2&t&&(E.nc(1),E.Hd(E.Yc(2,1,"longreadTutorial.right")))}function Nt(t,e){1&t&&(E.Gc(0,"span",22),E.Gd(1),E.Xc(2,"transloco"),E.Fc()),2&t&&(E.nc(1),E.Hd(E.Yc(2,1,"longreadTutorial.wrong")))}function Dt(t,e){if(1&t&&(E.Gc(0,"app-longread-test-card",3),E.Gc(1,"app-longread-test-card-title"),E.Bc(2,"app-skb-froala-content",4),E.Fc(),E.Ed(3,Lt,7,10,"app-longread-test-card-body",7),E.Ed(4,qt,3,1,"app-longread-test-card-body",15),E.Gc(5,"app-longread-test-card-footer"),E.Gc(6,"div",16),E.Ed(7,Wt,3,3,"span",17),E.Ed(8,Nt,3,3,"ng-template",null,18,E.Fd),E.Fc(),E.Bc(10,"app-skb-froala-content",4),E.Fc(),E.Fc()),2&t){const t=E.sd(9),e=E.Wc();E.ed("ngSwitch",e.question.type),E.nc(2),E.ed("content",e.question.description),E.nc(1),E.ed("ngSwitchCase",e.testTypes.STRING_INPUT),E.nc(4),E.ed("ngIf",e.question.is_correct)("ngIfElse",t),E.nc(3),E.ed("content",e.question.comment)}}let $t=(()=>{let t=class{constructor(t,e,n,o,i){this.formService=t,this.longreadFacade=e,this.route=n,this.coursesFacade=o,this.longreadLogs=i,this.testTypes=s.Xb.ValueEnum,this.testTypeMap={[s.Xb.ValueEnum.ONE_RIGHT_ANSWER]:st.RADIO,[s.Xb.ValueEnum.MULTIPLE_RIGHT_ANSWER]:st.CHECKBOX,[s.Xb.ValueEnum.STRING_INPUT]:st.INPUT}}get question(){return this.test.question}ngOnInit(){var t;this.form=this.formService.buildForm(this.question);const{courseSlug:e}=a.a.reduceSnapshot(this.route.snapshot);this.courseId=null===(t=Object(r.a)(this.coursesFacade.selectCourseTreeBySlug(e)))||void 0===t?void 0:t.id}onSubmit(){if(this.form.valid){const t=this.formService.buildModel(this.form);this.longreadLogs.logTestAnswers(this.test.id,t,this.courseId),this.longreadFacade.sendLongreadTestAnswer(this.block.id,this.test.id,t),this.longreadFacade.answerLongreadTestSuccessAction$.pipe(Object(H.a)(this,this.onSubmit),Object(O.a)(1),Object(p.b)(this)).subscribe()}}getAnswerStatus(t){var e,n;const o=null===(e=this.question.correct_answers)||void 0===e?void 0:e.includes(t),s=!!this.question.user_answers,i=null===(n=this.question.user_answers)||void 0===n?void 0:n.includes(t);return o?i||!s?it.CORRECT:it.CORRECT_AND_UNSELECTED:i?it.INCORRECT:it.DISABLED}getTextAnswerStatus(t){var e,n,o;const s=!!(null===(e=t.user_answers)||void 0===e?void 0:e.length),i=null===(n=t.user_answers)||void 0===n?void 0:n[0],a=null===(o=t.correct_answers)||void 0===o?void 0:o[0];return a?s&&i===a?it.CORRECT:s?it.INCORRECT:it.CORRECT:it.DISABLED}};return t.\u0275fac=function(e){return new(e||t)(E.Ac(J),E.Ac(k.b),E.Ac(I.a),E.Ac(c.a),E.Ac(R))},t.\u0275cmp=E.uc({type:t,selectors:[["app-longread-test-unit"]],inputs:{test:"test",block:"block"},features:[E.mc([J])],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["questionResultTplRef",""],[3,"formGroup"],[3,"ngSwitch"],[3,"content"],["data-i18n","longreadTutorial.oneRightAnswer",4,"ngSwitchCase"],["data-i18n","longreadTutorial.multipleRightAnswer",4,"ngSwitchCase"],[4,"ngSwitchCase"],["type","button","data-i18n","longreadTutorial.check",1,"ui-sb-button--default","ui-sb-button--medium","ui-sb-button--view-1",3,"disabled","lockButtonWhileLoading","click"],["data-i18n","longreadTutorial.oneRightAnswer"],["data-i18n","longreadTutorial.multipleRightAnswer"],[3,"question","formControl"],[3,"question","formArray"],["data-i18n","longreadTutorial.answer",1,"longread-test-unit__label","ui-sb-t--2","ui-sb-weight--bold"],[3,"formControl"],[4,"ngSwitchDefault"],[1,"longread-test-unit__label","ui-sb-t--2","ui-sb-weight--bold"],["data-i18n","longreadTutorial.right",4,"ngIf","ngIfElse"],["wrong",""],[3,"type","status","text"],[3,"type","status","text",4,"ngFor","ngForOf"],["data-i18n","longreadTutorial.right"],["data-i18n","longreadTutorial.wrong"]],template:function(t,e){if(1&t&&(E.Ed(0,jt,14,16,"ng-container",0),E.Ed(1,Dt,11,6,"ng-template",null,1,E.Fd)),2&t){const t=E.sd(2);E.ed("ngIf",!e.test.is_completed)("ngIfElse",t)}},directives:[q.u,z.w,z.n,ut,q.y,dt,D.a,q.z,_t,ht.a,pt,gt,xt,z.v,z.k,Pt,yt,q.A,kt,ct,q.t],pipes:[d.g,tt.a],styles:["[_nghost-%COMP%]{display:block}.longread-test-unit__label[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:12px}app-longread-answer-wrapper[_ngcontent-%COMP%], app-longread-input-answer[_ngcontent-%COMP%]{margin-top:20px}"],changeDetection:0}),Object(o.b)([V.d,Object(o.c)("design:type",Function),Object(o.c)("design:paramtypes",[]),Object(o.c)("design:returntype",void 0)],t.prototype,"onSubmit",null),t=Object(o.b)([Object(p.a)()],t),t})();function Ut(t,e){if(1&t&&(E.Gc(0,"h3",2),E.Gd(1),E.Fc()),2&t){const t=E.Wc();E.nc(1),E.Hd(t.block.name)}}function Xt(t,e){if(1&t&&(E.Gc(0,"app-sb-text-card",7),E.Gc(1,"app-sb-text-card-body"),E.Bc(2,"app-skb-froala-content",8),E.Fc(),E.Fc()),2&t){const t=E.Wc().$implicit;E.nc(2),E.ed("content",t.text)}}function Yt(t,e){if(1&t){const t=E.Hc();E.Gc(0,"app-longread-tutorial-video-unit",9),E.Sc("watchTimeUpdated",(function(e){E.ud(t);const n=E.Wc().$implicit;return E.Wc().onWatchTimeUpdated(e,n.id)})),E.Fc()}if(2&t){const t=E.Wc().$implicit;E.ed("video",t)}}function Vt(t,e){if(1&t&&E.Bc(0,"app-longread-test-unit",10),2&t){const t=E.Wc().$implicit,e=E.Wc();E.ed("test",t)("block",e.block)}}function Ht(t,e){if(1&t&&(E.Gc(0,"div",3),E.Ed(1,Xt,3,1,"app-sb-text-card",4),E.Ed(2,Yt,1,1,"app-longread-tutorial-video-unit",5),E.Ed(3,Vt,1,2,"app-longread-test-unit",6),E.Fc()),2&t){const t=e.$implicit,n=E.Wc();E.ed("ngSwitch",t.contentType),E.nc(1),E.ed("ngSwitchCase",n.contentTypes.Text),E.nc(1),E.ed("ngSwitchCase",n.contentTypes.Video),E.nc(1),E.ed("ngSwitchCase",n.contentTypes.Test)}}let zt=(()=>{class t{constructor(t,e,n,o,s){this.elRef=t,this.longreadTutorialFacade=e,this.route=n,this.coursesFacade=o,this.longreadLogs=s,this.contentTypes=i.d.ValueEnum}ngOnInit(){var t;const{courseSlug:e}=a.a.reduceSnapshot(this.route.snapshot);this.courseId=null===(t=Object(r.a)(this.coursesFacade.selectCourseTreeBySlug(e)))||void 0===t?void 0:t.id}onWatchTimeUpdated(t,e){this.longreadTutorialFacade.updateVideoContentUnitProgress(this.block.id,e,t),this.longreadLogs.logVideoProgress(e,t,this.courseId)}}return t.\u0275fac=function(e){return new(e||t)(E.Ac(E.q),E.Ac(k.b),E.Ac(I.a),E.Ac(c.a),E.Ac(R))},t.\u0275cmp=E.uc({type:t,selectors:[["app-longread-tutorial-block"]],inputs:{block:"block"},decls:3,vars:5,consts:[["class","longread__title ui-sb-h--2","data-e2e","longread-tutorial-block__name",4,"ngIf"],["class","longread__content-unit",3,"ngSwitch",4,"ngFor","ngForOf","ngForTrackBy"],["data-e2e","longread-tutorial-block__name",1,"longread__title","ui-sb-h--2"],[1,"longread__content-unit",3,"ngSwitch"],["data-e2e","longread-tutorial-block__text-card",4,"ngSwitchCase"],["data-e2e","longread-tutorial-block__video-player",3,"video","watchTimeUpdated",4,"ngSwitchCase"],["data-e2e","longread-tutorial-block__test-card",3,"test","block",4,"ngSwitchCase"],["data-e2e","longread-tutorial-block__text-card"],[3,"content"],["data-e2e","longread-tutorial-block__video-player",3,"video","watchTimeUpdated"],["data-e2e","longread-tutorial-block__test-card",3,"test","block"]],template:function(t,e){1&t&&(E.Ed(0,Ut,2,1,"h3",0),E.Ed(1,Ht,4,4,"div",1),E.Xc(2,"trackBy")),2&t&&(E.ed("ngIf",e.block.name),E.nc(1),E.ed("ngForOf",e.block.contentUnits)("ngForTrackBy",E.Yc(2,3,"id")))},directives:[q.u,q.t,q.y,q.z,W.a,N.a,D.a,Y,$t],pipes:[Ot.a],styles:["[_nghost-%COMP%]{display:block}.longread__title[_ngcontent-%COMP%]{margin-bottom:16px}@media (min-width:1600px){.longread__title[_ngcontent-%COMP%]{margin-bottom:20px}}.longread__content-unit[_ngcontent-%COMP%]:not(:last-child){margin-bottom:32px}@media (min-width:768px){.longread__content-unit[_ngcontent-%COMP%]:not(:last-child){margin-bottom:24px}}"],changeDetection:0}),t})();var Qt=n("FZJX");class Kt extends Qt.a{resolveStep(t,e,n){const o=n.length+1;return 1===o?y.a.rating:2===o?y.a.commentRequest:3===o&&(null==t?void 0:t.type)===s.Ub.TypeEnum.INPUT?y.a.comment:y.a.thanks}}var Jt=n("TA3M"),Zt=n("kJHU"),te=n("TWpC");function ee(t,e){1&t&&E.Bc(0,"app-longread-tutorial-block",11),2&t&&E.ed("block",e.$implicit)}function ne(t,e){if(1&t){const t=E.Hc();E.Gc(0,"button",12),E.Sc("click",(function(){return E.ud(t),E.Wc(2).completeContentBlock()})),E.Xc(1,"async"),E.Gd(2),E.Xc(3,"transloco"),E.Fc()}if(2&t){const t=E.Wc(2);E.ed("disabled",E.Yc(1,2,t.nextContentBlockRequirements$)),E.nc(2),E.Id(" ",E.Yc(3,4,"longreadTutorial.continue")," ")}}function oe(t,e){if(1&t){const t=E.Hc();E.Gc(0,"button",14),E.Sc("click",(function(){E.ud(t);const n=e.ngIf;return E.Wc(3).navigateToNextTopicItem(n)})),E.Xc(1,"async"),E.Gd(2),E.Xc(3,"transloco"),E.Fc()}if(2&t){const t=E.Wc(3);E.ed("disabled",E.Yc(1,2,t.nextContentBlockRequirements$)),E.nc(2),E.Id(" ",E.Yc(3,4,"longreadTutorial.nextLesson")," ")}}function se(t,e){if(1&t&&(E.Ed(0,oe,4,6,"button",13),E.Xc(1,"async")),2&t){E.Wc();const t=E.sd(10),e=E.Wc();E.ed("ngIf",E.Yc(1,2,e.nextTopicItem$))("ngIfElse",t)}}function ie(t,e){if(1&t){const t=E.Hc();E.Gc(0,"button",15),E.Sc("click",(function(){return E.ud(t),E.Wc(2).navigateToCourseDetail()})),E.Xc(1,"async"),E.Gd(2),E.Xc(3,"transloco"),E.Fc()}if(2&t){const t=E.Wc(2);E.ed("disabled",E.Yc(1,2,t.nextContentBlockRequirements$)),E.nc(2),E.Id(" ",E.Yc(3,4,"longreadTutorial.endCourse")," ")}}function ae(t,e){if(1&t&&(E.Gc(0,"p",16),E.Gd(1),E.Xc(2,"transloco"),E.Fc()),2&t){const t=e.ngIf;E.nc(1),E.Id(" ",E.Yc(2,1,t)," ")}}function ce(t,e){if(1&t){const t=E.Hc();E.Gc(0,"app-tutorial-evaluation",17),E.Sc("selectionAnswersChange",(function(e){return E.ud(t),E.Wc(2).onEvaluationAnswerChange(e)})),E.Xc(1,"async"),E.Fc()}if(2&t){const t=E.Wc(2);E.ed("controller",E.Yc(1,2,t.evaluationController$))("steps",t.evaluationSteps)}}function re(t,e){if(1&t){const t=E.Hc();E.Ec(0),E.Ed(1,ee,1,1,"app-longread-tutorial-block",3),E.Xc(2,"async"),E.Xc(3,"trackBy"),E.Gc(4,"div",4),E.Ed(5,ne,4,6,"button",5),E.Xc(6,"async"),E.Ed(7,se,2,4,"ng-template",null,6,E.Fd),E.Ed(9,ie,4,6,"ng-template",null,7,E.Fd),E.Ed(11,ae,3,3,"p",8),E.Xc(12,"async"),E.Fc(),E.Ed(13,ce,2,4,"app-tutorial-evaluation",9),E.Xc(14,"async"),E.Gc(15,"div",10),E.Sc("appearInViewport",(function(){return E.ud(t),E.Wc().onAppearInViewport()}))("disappearFromViewport",(function(){return E.ud(t),E.Wc().onDisappearFromViewport()})),E.Fc(),E.Dc()}if(2&t){const t=E.sd(8),e=E.Wc();E.nc(1),E.ed("ngForOf",E.Yc(2,6,e.availableContentBlocks$))("ngForTrackBy",E.Yc(3,8,"id")),E.nc(4),E.ed("ngIf",E.Yc(6,10,e.hasNextContentBlock$))("ngIfElse",t),E.nc(6),E.ed("ngIf",E.Yc(12,12,e.nextContentBlockRequirements$)),E.nc(2),E.ed("ngIf",E.Yc(14,14,e.canShowEvaluations$))}}function le(t,e){1&t&&(E.Gc(0,"div",18),E.Gc(1,"div",19),E.Bc(2,"ui-sb-spinner"),E.Fc(),E.Fc())}function ue(t,e){if(1&t){const t=E.Hc();E.Gc(0,"button",20),E.Sc("click",(function(){return E.ud(t),E.Wc().scrollTop()})),E.Bc(1,"svg-icon",21),E.Fc()}if(2&t){const t=E.Wc();E.nc(1),E.ed("name",t.chevronUpIconName)}}let de=(()=>{let t=class{constructor(t,e,n,o,s,i,a,c,r,u,d,p,g){this.translocoService=t,this.scope=e,this.route=n,this.router=o,this.surveysLessonQualityService=s,this.tutorialEvaluationsService=i,this.longreadTutorialFacade=a,this.tutorialService=c,this.sbLayoutService=r,this.viewportService=u,this.confirm=d,this.coursesFacade=p,this.longreadLogs=g,this.evaluationSteps=y.b,this.SCROLL_OFFSET=15,this.chevronUpIconName=l.svgIconChevronUpV2.name,this.isScrollTopButtonAnchorVisible$=new _.a(1)}ngOnInit(){var t;const{courseSlug:e}=a.a.reduceSnapshot(this.route.snapshot);this.courseId=null===(t=Object(r.a)(this.coursesFacade.selectCourseTreeBySlug(e)))||void 0===t?void 0:t.id;const{tutorial:{token:n,lessonCheck:o}}=this.route.snapshot.data;this.longreadTutorialFacade.loadLongreadTutorial(n,o.access_token),this.longreadId$=this.longreadTutorialFacade.id$,this.availableContentBlocks$=this.longreadTutorialFacade.availableContentBlocks$,this.nextTopicItem$=this.tutorialService.nextItem$,this.initHasNextContentBlockStream(),this.initNextContentBlockRequirementsStream(),this.initCanShowScrollTopButtonStream(),this.listenOpenNextContentBlockSuccessAction(),this.listenOpenNextContentBlockFailureAction(n,o.access_token),this.listenLongreadCompletion(),this.scrollToUncompletedContentBlock(),this.initEvaluation(n)}completeContentBlock(){this.longreadTutorialFacade.completeContentBlock(this.courseId),this.longreadLogs.logContinueTutorial(this.courseId)}navigateToNextTopicItem(t){this.tutorialService.navigateToTopicItem(t),this.longreadLogs.logNextTopic(this.courseId)}navigateToCourseDetail(){this.router.navigate(["../.."],{relativeTo:this.route.parent}),this.longreadLogs.logCourseCompleted(this.courseId)}onAppearInViewport(){this.isScrollTopButtonAnchorVisible$.next(!0)}onDisappearFromViewport(){this.isScrollTopButtonAnchorVisible$.next(!1)}scrollTop(){this.sbLayoutService.scrollTo({top:0,behavior:"smooth"})}onEvaluationAnswerChange(t){this.tutorialEvaluationsService.submitAnswers(t)}initHasNextContentBlockStream(){this.hasNextContentBlock$=this.longreadTutorialFacade.currentContentBlock$.pipe(Object(m.a)((t=>!!t.next_block_id)))}initNextContentBlockRequirementsStream(){this.nextContentBlockRequirements$=this.longreadTutorialFacade.currentContentBlock$.pipe(Object(m.a)((({contentUnits:t})=>{const e=t.some((t=>t.contentType===i.d.ValueEnum.Test&&!t.is_completed)),n=t.some((t=>t.contentType===i.d.ValueEnum.Video&&!t.is_completed));return e&&n?"longreadTutorial.nextContentRequirements.incompleteVideoTest":e?"longreadTutorial.nextContentRequirements.incompleteTest":n?"longreadTutorial.nextContentRequirements.incompleteVideo":null})),Object(b.a)(1))}initCanShowScrollTopButtonStream(){this.canShowScrollTopButton$=Object(h.a)([this.viewportService.isDesktopViewport$,this.isScrollTopButtonAnchorVisible$]).pipe(Object(m.a)((([t,e])=>t&&!e)))}listenOpenNextContentBlockSuccessAction(){this.longreadTutorialFacade.completeContentBlockSuccessAction$.pipe(Object(C.a)(0),Object(f.a)((()=>this.longreadTutorialFacade.isCompleted$.pipe(Object(O.a)(1)))),Object(v.a)((t=>!t)),Object(p.b)(this)).subscribe((()=>this.scrollToLastContentBlock()))}listenOpenNextContentBlockFailureAction(t,e){this.longreadTutorialFacade.completeContentBlockFailureAction$.pipe(Object(v.a)((({versionValidation:t})=>!!t)),Object(x.a)((()=>this.confirm.open({data:{imageSrc:"assets/img/longread/longread-updated.svg",title:this.translocoService.translate("lessonGetBetter",{},this.scope),description:this.translocoService.translate("updatePage",{},this.scope),confirmText:this.translocoService.translate("update",{},this.scope),hasCancelButton:!1}}).afterClosed())),Object(p.b)(this)).subscribe((()=>this.longreadTutorialFacade.loadLongreadTutorial(t,e)))}listenLongreadCompletion(){const t=this.nextContentBlockRequirements$.pipe(Object(m.a)((t=>!t)));Object(h.a)([this.hasNextContentBlock$,t]).pipe(Object(w.a)(100),Object(v.a)((([t,e])=>!t&&e)),Object(f.a)((()=>this.longreadTutorialFacade.isCompleted$.pipe(Object(O.a)(1)))),Object(v.a)((t=>!t)),Object(p.b)(this)).subscribe((()=>{setTimeout((()=>this.completeContentBlock()))}))}scrollToUncompletedContentBlock(){this.longreadTutorialFacade.loadLongreadTutorialSuccessAction$.pipe(Object(f.a)((()=>Object(h.a)([this.availableContentBlocks$,this.longreadTutorialFacade.isCompleted$]))),Object(O.a)(1),Object(v.a)((([t,e])=>t.length>1&&!e)),Object(C.a)(0),Object(p.b)(this)).subscribe((()=>this.scrollToLastContentBlock()))}scrollToLastContentBlock(){var t;this.sbLayoutService.scrollToElement(null===(t=this.tutorialBlocks.last.elRef)||void 0===t?void 0:t.nativeElement,this.SCROLL_OFFSET,"smooth")}initEvaluation(t){this.tutorialEvaluationsService.init(t).pipe(Object(p.b)(this)).subscribe(),this.evaluationController$=this.surveysLessonQualityService.v3SurveysLessonQualityLongreadsLatestRead().pipe(Object(m.a)((e=>new Kt(e,t)))),this.canShowEvaluations$=Object(h.a)([this.tutorialEvaluationsService.hasEvaluations(),this.longreadTutorialFacade.isCompleted$]).pipe(Object(m.a)((([t,e])=>!t&&!!e)))}};return t.\u0275fac=function(e){return new(e||t)(E.Ac(d.h),E.Ac(d.d),E.Ac(I.a),E.Ac(I.f),E.Ac(s.Sf),E.Ac(P.a),E.Ac(k.b),E.Ac(M.a),E.Ac(T.a),E.Ac(g.a),E.Ac(u.U),E.Ac(c.a),E.Ac(R))},t.\u0275cmp=E.uc({type:t,selectors:[["app-longread-tutorial"]],viewQuery:function(t,e){var n;1&t&&E.Ld(zt,!0),2&t&&E.rd(n=E.Tc())&&(e.tutorialBlocks=n)},features:[E.mc([G,P.a,R])],decls:6,vars:7,consts:[[4,"ngIf","ngIfElse"],["preloader",""],["class","ui-sb-button-circle--default ui-sb-button--view-circle-1 longread-tutorial__scroll-top-button","data-e2e","longread-tutorial__scroll-top-button",3,"click",4,"ngIf"],[3,"block",4,"ngFor","ngForOf","ngForTrackBy"],[1,"longread-tutorial__button-wrapper"],["class","longread-tutorial__button ui-sb-button--default ui-sb-button--view-1 ui-sb-button--medium","data-i18n","longreadTutorial.continue",3,"disabled","click",4,"ngIf","ngIfElse"],["nextLessonButtonTplRef",""],["completeCourseButtonTplRef",""],["class","longread-tutorial__next-content-block-requirements","data-i18n","longreadTutorial.nextContentRequirements",4,"ngIf"],["class","longread-tutorial__lesson-evaluations","data-e2e","longread-tutorial__lesson-evaluations",3,"controller","steps","selectionAnswersChange",4,"ngIf"],["appElementInViewport","","data-e2e","longread-tutorial__scroll-top-button-anchor",1,"longread-tutorial__scroll-top-button-anchor",3,"appearInViewport","disappearFromViewport"],[3,"block"],["data-i18n","longreadTutorial.continue",1,"longread-tutorial__button","ui-sb-button--default","ui-sb-button--view-1","ui-sb-button--medium",3,"disabled","click"],["class","longread-tutorial__button ui-sb-button--default ui-sb-button--view-1 ui-sb-button--medium","data-i18n","longreadTutorial.nextLesson",3,"disabled","click",4,"ngIf","ngIfElse"],["data-i18n","longreadTutorial.nextLesson",1,"longread-tutorial__button","ui-sb-button--default","ui-sb-button--view-1","ui-sb-button--medium",3,"disabled","click"],["data-i18n","longreadTutorial.endCourse",1,"longread-tutorial__button","ui-sb-button--default","ui-sb-button--view-1","ui-sb-button--medium",3,"disabled","click"],["data-i18n","longreadTutorial.nextContentRequirements",1,"longread-tutorial__next-content-block-requirements"],["data-e2e","longread-tutorial__lesson-evaluations",1,"longread-tutorial__lesson-evaluations",3,"controller","steps","selectionAnswersChange"],[1,"load-indicator"],[1,"spinner"],["data-e2e","longread-tutorial__scroll-top-button",1,"ui-sb-button-circle--default","ui-sb-button--view-circle-1","longread-tutorial__scroll-top-button",3,"click"],[1,"longread-tutorial__chevron-up-icon",3,"name"]],template:function(t,e){if(1&t&&(E.Ed(0,re,16,16,"ng-container",0),E.Xc(1,"async"),E.Ed(2,le,3,0,"ng-template",null,1,E.Fd),E.Ed(4,ue,2,1,"button",2),E.Xc(5,"async")),2&t){const t=E.sd(3);E.ed("ngIf",E.Yc(1,3,e.longreadId$))("ngIfElse",t),E.nc(4),E.ed("ngIf",E.Yc(5,5,e.canShowScrollTopButton$))}},directives:[q.u,q.t,Jt.a,zt,Zt.a,te.a,Z.a],pipes:[q.b,Ot.a,d.g],styles:["[_nghost-%COMP%]{display:block}@media (min-width:1280px){[_nghost-%COMP%]{width:768px;margin:0 auto}}@media (min-width:1600px){[_nghost-%COMP%]{width:1024px}}@media (max-width:767.9px){.longread-tutorial__button[_ngcontent-%COMP%]{justify-content:center;width:100%}}.longread-tutorial__button-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;margin-top:24px}@media (min-width:768px){.longread-tutorial__button-wrapper[_ngcontent-%COMP%]{margin-top:32px}}.longread-tutorial__next-content-block-requirements[_ngcontent-%COMP%]{font-size:14px;line-height:20px;flex:1;margin:12px 0 0;color:var(--ui-sb-color-text-addition);text-align:center}@media (min-width:768px){.longread-tutorial__next-content-block-requirements[_ngcontent-%COMP%]{margin:0 0 0 20px;text-align:initial}}.longread-tutorial__scroll-top-button-anchor[_ngcontent-%COMP%]{position:absolute;top:100vh}.longread-tutorial__scroll-top-button[_ngcontent-%COMP%]{width:48px;height:48px;position:fixed;right:30px;bottom:80px}.longread-tutorial__chevron-up-icon[_ngcontent-%COMP%]{width:24px;height:24px}.longread-tutorial__lesson-evaluations[_ngcontent-%COMP%]{margin-top:60px}@media (min-width:768px){.longread-tutorial__lesson-evaluations[_ngcontent-%COMP%]{margin-top:80px}}@media (min-width:1024px){.longread-tutorial__lesson-evaluations[_ngcontent-%COMP%]{margin-top:100px}}app-longread-tutorial-block[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:60px}@media (min-width:768px){app-longread-tutorial-block[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:80px}}@media (min-width:1024px){app-longread-tutorial-block[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:100px}}.load-indicator[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%);position:fixed}"],changeDetection:0}),t=Object(o.b)([Object(p.a)()],t),t})()},RFPc:function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var o=n("ruzS"),s=n("EMWv"),i=n("bxfK"),a=n("z/bm"),c=n("cdws"),r=n("QffU"),l=n("ZTXN"),u=n("TLy2"),d=n("YtkY"),p=n("J+dc"),g=n("xVbo"),_=n("0Woy"),h=n("jIqt"),m=n("kuMc"),b=function(t){return t.START="START",t.PAUSE="PAUSE",t.RESUME="RESUME",t.FINISH="FINISH",t.REWIND="REWIND",t.SET_VIDEO_FULLSCREEN="SET_VIDEO_FULLSCREEN",t}({});class C{static resolve(t,e){return e.method===s.a.PLAY&&null==t?b.START:e.method===s.a.PLAY&&null!=t?b.RESUME:e.method===s.a.TIME&&C.passingTresholdByDuration(e.time,e.duration)&&t===o.ob.UserStatusEnum.START?b.FINISH:e.method===s.a.PAUSE?b.PAUSE:e.method===s.a.SET_VIDEO_FULLSCREEN?b.SET_VIDEO_FULLSCREEN:void 0}static passingTresholdByDuration(t,e){return t/e*100>=80}}var f=n("EM62"),O=n("lDeo"),v=n("QBoQ"),x=n("RmUC");let w=(()=>{class t{constructor(t,e,n){this.tutorialService=t,this.coursesFacade=e,this.logBus=n,this.unsubscribeFromActions$=new l.a}ngOnDestroy(){}setVideoEvents(t){if(this.unsubscribeFromActions$.next(),Object(r.a)(this.tutorialService.topicItem$).lesson_type===o.ob.LessonTypeEnum.VIDEOLESSON){const e=new l.a;this.subscribeToAllVideoEvents(t,e),this.subscribeToTimeVideoEvents(t,e),this.subscribeToActions(e)}}subscribeToAllVideoEvents(t,e){t.pipe(Object(u.a)((t=>{var e,n,o,s;return this.coursesFacade.selectLesson(null===(n=null===(e=t.options)||void 0===e?void 0:e.courseTree)||void 0===n?void 0:n.id,null===(s=null===(o=t.options)||void 0===o?void 0:o.topicItem)||void 0===s?void 0:s.id).pipe(Object(d.a)((e=>({message:t,topicItem:e}))),Object(p.a)(1))}))).subscribe((t=>{const n=t.message,o=C.resolve(t.topicItem.user_status,n.event);o&&e.next({type:o,time:n.event.time,isFullscreen:n.event.isFullscreen,duration:n.event.duration,lessonId:n.options.topicItem.id,courseId:n.options.courseTree.id})}))}subscribeToTimeVideoEvents(t,e){t.pipe(Object(g.a)((t=>t.event.method===s.a.TIME)),Object(_.a)(),Object(g.a)((([t,e])=>t.event.code===e.event.code))).subscribe((([t,n])=>{var o,s,i,c;if(Math.abs((null===(o=n.event)||void 0===o?void 0:o.time)-(null===(s=t.event)||void 0===s?void 0:s.time))>10){const o={type:b.REWIND,time:(null===(i=n.event)||void 0===i?void 0:i.time)-(null===(c=t.event)||void 0===c?void 0:c.time),isFullscreen:n.event.isFullscreen,duration:n.event.duration,lessonId:n.options.topicItem.id,courseId:n.options.courseTree.id};this.sendToStatLog(a.a.VIDEO.REWIND,o),e.next(o)}}))}subscribeToActions(t){t.pipe(Object(h.a)(null),Object(_.a)(),Object(g.a)((([t,e])=>this.isValidActionSequece(t,e))),Object(m.a)(this.unsubscribeFromActions$)).subscribe((([,t])=>{switch(null==t?void 0:t.type){case b.START:case b.RESUME:this.sendToStatLog(a.a.VIDEO.START,t);break;case b.PAUSE:this.sendToStatLog(a.a.VIDEO.PAUSE,t);break;case b.SET_VIDEO_FULLSCREEN:this.sendToStatLog(a.a.VIDEO.SET_VIDEO_FULLSCREEN,t)}}))}isValidActionSequece(t,e){const n=t&&t.type,o=e.type,s=o===b.RESUME;return!(n===o&&o!==b.SET_VIDEO_FULLSCREEN||n===b.START&&s||n===b.RESUME&&o===b.START||n===b.REWIND&&s)}sendToStatLog(t,e){var n,o;const s=new c.a({event_type:t,event_params:{position:null===(n=e.time)||void 0===n?void 0:n.toString(),switchTo:null===(o=e.isFullscreen)||void 0===o?void 0:o.toString(),duration:e.duration.toString(),lesson_token:e.lessonId}});this.logBus.log(new i.a({immediateDispatch:!1,message:s}))}}return t.\u0275fac=function(e){return new(e||t)(f.Oc(O.a),f.Oc(v.a),f.Oc(x.a))},t.\u0275prov=f.wc({token:t,factory:t.\u0275fac}),t})()},XbPE:function(t,e,n){"use strict";n.d(e,"a",(function(){return Pe}));var o=n("D57K"),s=n("ruzS"),i=n("ABPI"),a=n("RmUC"),c=n("bxfK"),r=n("z/bm"),l=n("cdws"),u=n("xo/y"),d=n("NXKV"),p=n("xzqx"),g=n("ROBh"),_=n("HM3f"),h=n("wqq/"),m=n("TLy2"),b=n("4e/d"),C=n("YtkY"),f=n("J+dc"),O=n("sn6r"),v=n("lDeo"),x=n("8Wzv"),w=function(t){return t.LIMITED="limited",t.UNLIMITED="unlimited",t}({});function T(t){var e;return(null===(e=null==t?void 0:t.attempts)||void 0===e?void 0:e.sort(((t,e)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())))||[]}function P(t){const e=T(t);return null==e?void 0:e[0]}function M(t,e){const n=t.findIndex((t=>t.id===e.last_answered_question_id));return n<0?0:n<t.length-1?n+1:n}var y=n("stbA"),E=n("EM62"),k=n("sEIs"),I=n("2kYt"),S=n("8wG+"),F=n("jR34"),G=n("Jzyt");let A=(()=>{class t{ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=E.uc({type:t,selectors:[["app-test-tutorial-alert"]],decls:4,vars:3,consts:[["name","book_next"],["data-i18n","testTutorial.testUpdated"]],template:function(t,e){1&t&&(E.Bc(0,"svg-icon",0),E.Gc(1,"span",1),E.Gd(2),E.Xc(3,"transloco"),E.Fc()),2&t&&(E.nc(2),E.Hd(E.Yc(3,1,"testTutorial.testUpdated")))},directives:[F.a],pipes:[G.g],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:flex-start;font-size:16px;line-height:24px;padding:20px;border-radius:20px;background-color:var(--ui-sb-color-bg-secondary)}@media (min-width:768px){[_nghost-%COMP%]{align-items:center;padding:16px 32px}}@media (min-width:1280px){[_nghost-%COMP%]{padding:24px 48px}}@media (min-width:1600px){[_nghost-%COMP%]{padding-right:60px;padding-left:60px}}[_nghost-%COMP%]   svg-icon[_ngcontent-%COMP%]{width:28px;height:28px;flex-shrink:0;margin-right:12px}@media (min-width:768px){[_nghost-%COMP%]   svg-icon[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:16px}}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;line-height:22px}@media (min-width:768px){[_nghost-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;line-height:24px;color:var(--ui-sb-color-text-main)}}"],changeDetection:0}),t})();const B=[[["app-test-tutorial-inner-card-title"],["","app-test-tutorial-inner-card-title",""],["","appTestTutorialInnerCardTitle",""]],[["app-test-tutorial-inner-card-body"],["","app-test-tutorial-inner-card-body",""],["","appTestTutorialInnerCardBody",""]],[["app-test-tutorial-inner-card-image"],["","app-test-tutorial-inner-card-image",""],["","appTestTutorialInnerCardImage",""]]],j=["app-test-tutorial-inner-card-title, [app-test-tutorial-inner-card-title], [appTestTutorialInnerCardTitle]","app-test-tutorial-inner-card-body, [app-test-tutorial-inner-card-body], [appTestTutorialInnerCardBody]","app-test-tutorial-inner-card-image, [app-test-tutorial-inner-card-image], [appTestTutorialInnerCardImage]"];var L=function(t){return t.SUCCESS="success",t.DANGER="danger",t.PRIMARY="primary",t}({});let R=(()=>{class t{get hostClass(){return this.color}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=E.uc({type:t,selectors:[["app-test-tutorial-inner-card"]],hostVars:2,hostBindings:function(t,e){2&t&&E.pc(e.hostClass)},inputs:{color:"color"},ngContentSelectors:j,decls:3,vars:0,template:function(t,e){1&t&&(E.dd(B),E.cd(0),E.cd(1,1),E.cd(2,2))},styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=E.vc({type:t,selectors:[["app-test-tutorial-inner-card-title"],["","app-test-tutorial-inner-card-title",""],["","appTestTutorialInnerCardTitle",""]],exportAs:["app-test-tutorial-inner-card-title"]}),t})(),W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=E.vc({type:t,selectors:[["app-test-tutorial-inner-card-body"],["","app-test-tutorial-inner-card-body",""],["","appTestTutorialInnerCardBody",""]],exportAs:["app-test-tutorial-inner-card-body"]}),t})(),N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=E.vc({type:t,selectors:[["app-test-tutorial-inner-card-image"],["","app-test-tutorial-inner-card-image",""],["","appTestTutorialInnerCardImage",""]],exportAs:["app-test-tutorial-inner-card-image"]}),t})();var D=n("j7cu");function $(t,e){1&t&&(E.Ec(0),E.Gc(1,"span",19),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Dc()),2&t&&(E.nc(2),E.Hd(E.Yc(3,1,"testTutorial.workToDo")))}function U(t,e){1&t&&(E.Gc(0,"span",20),E.Gd(1),E.Xc(2,"transloco"),E.Fc()),2&t&&(E.nc(1),E.Hd(E.Yc(2,1,"testTutorial.amazingResult")))}const X=function(t){return{count:t}};function Y(t,e){if(1&t&&(E.Gc(0,"p",21),E.Gc(1,"span",22),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Gd(4),E.Gc(5,"span",23),E.Gd(6),E.Xc(7,"transloco"),E.Fc(),E.Gd(8,". "),E.Fc()),2&t){const t=E.Wc();E.nc(2),E.Id("",E.Yc(3,3,"testTutorial.youHave")," "),E.nc(2),E.Id("",t.currentAttemptsCount," "),E.nc(2),E.Id(" ",E.Zc(7,5,"plural.attempts",E.jd(8,X,t.currentAttemptsCount)),"")}}function V(t,e){if(1&t&&(E.Gc(0,"li",24),E.Gc(1,"span",25),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Gd(4),E.Gc(5,"span",26),E.Gd(6),E.Xc(7,"transloco"),E.Fc(),E.Fc()),2&t){const t=E.Wc();E.nc(2),E.Id("",E.Yc(3,3,"testTutorial.max")," "),E.nc(2),E.Hd(t.maxErrorsCount),E.nc(2),E.Id(" ",E.Zc(7,5,"plural.errors",E.jd(8,X,t.maxErrorsCount)),"")}}function H(t,e){if(1&t&&(E.Gc(0,"span"),E.Gd(1,"\xa0"),E.Gc(2,"span",29),E.Gd(3),E.Xc(4,"transloco"),E.Fc(),E.Gc(5,"span",30),E.Gd(6),E.Xc(7,"duration"),E.Fc(),E.Fc()),2&t){const t=E.Wc(2);E.nc(3),E.Id("",E.Yc(4,2,"testTutorial.after")," "),E.nc(3),E.Hd(E.bd(7,4,t.timeToNextAttempt,"hh:mm",!1,!0))}}function z(t,e){if(1&t){const t=E.Hc();E.Gc(0,"button",27),E.Sc("click",(function(){return E.ud(t),E.Wc().continueTestButtonClick.emit()})),E.Gc(1,"span",28),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Ed(4,H,8,9,"span",17),E.Fc()}if(2&t){const t=E.Wc();E.ed("disabled",!t.canBeginTest),E.nc(2),E.Hd(E.Yc(3,3,"testTutorial.continue")),E.nc(2),E.ed("ngIf",!t.canBeginTest)}}function Q(t,e){if(1&t&&(E.Gc(0,"span"),E.Gd(1,"\xa0"),E.Gc(2,"span",29),E.Gd(3),E.Xc(4,"transloco"),E.Fc(),E.Gc(5,"span",30),E.Gd(6),E.Xc(7,"duration"),E.Fc(),E.Fc()),2&t){const t=E.Wc();E.nc(3),E.Id("",E.Yc(4,2,"testTutorial.after")," "),E.nc(3),E.Hd(E.bd(7,4,t.timeToNextAttempt,"hh:mm",!1,!0))}}const K=function(t,e){return{count:t,from:e}};let J=(()=>{class t{constructor(){this.SUCCESS_PERCENT_BY_UNLIMITED=70,this.testTypeEnum=w,this.testStatusEnum=s.vc.StatusEnum,this.beginTestButtonClick=new E.t,this.continueTestButtonClick=new E.t,this.testTutorialInnerCardColorEnum=L}get currentAttemptsCount(){return this.maxAttemptsInInterval-this.attemptsInInterval}ngOnInit(){this.someErrors=this.checkErrors()}checkErrors(){return this.testType===w.UNLIMITED&&Math.floor(this.correctAnswersCount/this.questionsCount*100)<=this.SUCCESS_PERCENT_BY_UNLIMITED}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=E.uc({type:t,selectors:[["app-test-tutorial-success-card"]],inputs:{questionsCount:"questionsCount",correctAnswersCount:"correctAnswersCount",maxErrorsCount:"maxErrorsCount",attemptsInInterval:"attemptsInInterval",maxAttemptsInInterval:"maxAttemptsInInterval",canBeginTest:"canBeginTest",canContinueTest:"canContinueTest",timeToNextAttempt:"timeToNextAttempt",testType:"testType"},outputs:{beginTestButtonClick:"beginTestButtonClick",continueTestButtonClick:"continueTestButtonClick"},decls:34,vars:34,consts:[[3,"color"],["data-e2e","test-tutorial-success-card__title"],[4,"ngIf","ngIfElse"],["amazingTemplate",""],["data-e2e","test-tutorial-success-card__corrent-answers",1,"test-tutorial__subtitle"],["data-i18n","testTutorial.youGotRightFrom"],["data-i18n","testTutorial.canTryAgain"],["class","test-tutorial__subtitle","data-e2e","test-tutorial-success-card__attempt-count",4,"ngIf"],[1,"test-tutorial__list"],["data-e2e","test-tutorial-success-card__question-count"],["data-i18n","plural.questions"],["data-e2e","test-tutorial-success-card__max-error-count",4,"ngIf"],["data-i18n","testTutorial.noTimeLimits"],[1,"test-tutorial__button-wrapper"],["class","ui-sb-button--default ui-sb-button--small ui-sb-button--view-1 test-tutorial__button","data-e2e","test-tutorial-success-card__continue-trigger",3,"disabled","click",4,"ngIf"],["data-e2e","test-tutorial-success-card__repeat-trigger",1,"ui-sb-button--default","ui-sb-button--small","ui-sb-button--view-1","test-tutorial__button",3,"disabled","click"],["data-i18n","testTutorial.takeOneMoreTime"],[4,"ngIf"],["src","/assets/img/pages/test-tutorial/test-tutorial__inner-card--result.svg",1,"test-tutorial__image",3,"alt"],["data-i18n","testTutorial.workToDo"],["data-i18n","testTutorial.amazingResult"],["data-e2e","test-tutorial-success-card__attempt-count",1,"test-tutorial__subtitle"],["data-i18n","testTutorial.youHave"],["data-i18n","plural.attempts"],["data-e2e","test-tutorial-success-card__max-error-count"],["data-i18n","testTutorial.max"],["data-i18n","plural.errors"],["data-e2e","test-tutorial-success-card__continue-trigger",1,"ui-sb-button--default","ui-sb-button--small","ui-sb-button--view-1","test-tutorial__button",3,"disabled","click"],["data-i18n","testTutorial.continue"],["data-i18n","testTutorial.after"],["data-i18n","time.short"]],template:function(t,e){if(1&t&&(E.Gc(0,"app-test-tutorial-inner-card",0),E.Gc(1,"app-test-tutorial-inner-card-body"),E.Gc(2,"app-test-tutorial-inner-card-title",1),E.Ed(3,$,4,3,"ng-container",2),E.Ed(4,U,3,3,"ng-template",null,3,E.Fd),E.Fc(),E.Gc(6,"p",4),E.Gc(7,"span",5),E.Gd(8),E.Xc(9,"transloco"),E.Fc(),E.Gc(10,"span",6),E.Gd(11),E.Xc(12,"transloco"),E.Fc(),E.Fc(),E.Ed(13,Y,9,10,"p",7),E.Gc(14,"ul",8),E.Gc(15,"li",9),E.Gd(16),E.Gc(17,"span",10),E.Gd(18),E.Xc(19,"transloco"),E.Fc(),E.Fc(),E.Ed(20,V,8,10,"li",11),E.Gc(21,"li",12),E.Gd(22),E.Xc(23,"transloco"),E.Fc(),E.Fc(),E.Gc(24,"div",13),E.Ed(25,z,5,5,"button",14),E.Gc(26,"button",15),E.Sc("click",(function(){return e.beginTestButtonClick.emit()})),E.Gc(27,"span",16),E.Gd(28),E.Xc(29,"transloco"),E.Fc(),E.Ed(30,Q,8,9,"span",17),E.Fc(),E.Fc(),E.Fc(),E.Gc(31,"app-test-tutorial-inner-card-image"),E.Bc(32,"img",18),E.Xc(33,"transloco"),E.Fc(),E.Fc()),2&t){const t=E.sd(5);E.ed("color",e.testTutorialInnerCardColorEnum.SUCCESS),E.nc(3),E.ed("ngIf",e.someErrors)("ngIfElse",t),E.nc(5),E.Id("",E.Zc(9,15,"testTutorial.youGotRightFrom",E.kd(29,K,e.correctAnswersCount,e.questionsCount))," "),E.nc(3),E.Hd(E.Yc(12,18,"testTutorial.canTryAgain")),E.nc(2),E.ed("ngIf",e.testType===e.testTypeEnum.LIMITED),E.nc(3),E.Id(" ",e.questionsCount,""),E.nc(2),E.Id(" ",E.Zc(19,20,"plural.questions",E.jd(32,X,e.questionsCount)),""),E.nc(2),E.ed("ngIf",e.testType===e.testTypeEnum.LIMITED),E.nc(2),E.Hd(E.Yc(23,23,"testTutorial.noTimeLimits")),E.nc(3),E.ed("ngIf",e.canContinueTest),E.nc(1),E.ed("disabled",!e.canBeginTest),E.nc(2),E.Hd(E.Yc(29,25,"testTutorial.takeOneMoreTime")),E.nc(2),E.ed("ngIf",!e.canBeginTest),E.nc(2),E.ed("alt",E.Yc(33,27,"testTutorial.manTakingTest.image"))}},directives:[R,W,q,I.u,N],pipes:[G.g,D.a],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),t})();const Z=function(t){return{count:t}};function tt(t,e){if(1&t&&(E.Gc(0,"p",20),E.Gc(1,"span",21),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Gd(4),E.Gc(5,"span",22),E.Gd(6),E.Xc(7,"transloco"),E.Fc(),E.Gd(8,". "),E.Fc()),2&t){const t=E.Wc();E.nc(2),E.Id("",E.Yc(3,3,"testTutorial.youHave")," "),E.nc(2),E.Id("",t.currentAttemptsCount," "),E.nc(2),E.Id(" ",E.Zc(7,5,"plural.attempts",E.jd(8,Z,t.currentAttemptsCount)),"")}}function et(t,e){if(1&t&&(E.Gc(0,"li",23),E.Gc(1,"span",24),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Gd(4),E.Gc(5,"span",25),E.Gd(6),E.Xc(7,"transloco"),E.Fc(),E.Fc()),2&t){const t=E.Wc();E.nc(2),E.Id("",E.Yc(3,3,"testTutorial.max")," "),E.nc(2),E.Hd(t.maxErrorsCount),E.nc(2),E.Id(" ",E.Zc(7,5,"plural.errors",E.jd(8,Z,t.maxErrorsCount)),"")}}function nt(t,e){if(1&t&&(E.Gc(0,"span"),E.Gd(1,"\xa0"),E.Gc(2,"span",28),E.Gd(3),E.Xc(4,"transloco"),E.Fc(),E.Gc(5,"span",29),E.Gd(6),E.Xc(7,"duration"),E.Fc(),E.Fc()),2&t){const t=E.Wc(2);E.nc(3),E.Id("",E.Yc(4,2,"testTutorial.after")," "),E.nc(3),E.Hd(E.bd(7,4,t.timeToNextAttempt,"hh:mm",!1,!0))}}function ot(t,e){if(1&t){const t=E.Hc();E.Gc(0,"button",26),E.Sc("click",(function(){return E.ud(t),E.Wc().continueTestButtonClick.emit()})),E.Gc(1,"span",27),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Ed(4,nt,8,9,"span",18),E.Fc()}if(2&t){const t=E.Wc();E.ed("disabled",!t.canBeginTest),E.nc(2),E.Hd(E.Yc(3,3,"testTutorial.continue")),E.nc(2),E.ed("ngIf",!t.canBeginTest)}}function st(t,e){if(1&t&&(E.Gc(0,"span"),E.Gd(1,"\xa0"),E.Gc(2,"span",28),E.Gd(3),E.Xc(4,"transloco"),E.Fc(),E.Gc(5,"span",29),E.Gd(6),E.Xc(7,"duration"),E.Fc(),E.Fc()),2&t){const t=E.Wc();E.nc(3),E.Id("",E.Yc(4,2,"testTutorial.after")," "),E.nc(3),E.Hd(E.bd(7,4,t.timeToNextAttempt,"hh:mm",!1,!0))}}let it=(()=>{class t{constructor(){this.testTypeEnum=w,this.testStatusEnum=s.vc.StatusEnum,this.beginTestButtonClick=new E.t,this.continueTestButtonClick=new E.t,this.testTutorialInnerCardColorEnum=L}get currentAttemptsCount(){return this.maxAttemptsInInterval-this.attemptsInInterval}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=E.uc({type:t,selectors:[["app-test-tutorial-fail-card"]],inputs:{questionsCount:"questionsCount",wrongAnswersCount:"wrongAnswersCount",maxErrorsCount:"maxErrorsCount",attemptsInInterval:"attemptsInInterval",maxAttemptsInInterval:"maxAttemptsInInterval",canBeginTest:"canBeginTest",canContinueTest:"canContinueTest",testType:"testType",timeToNextAttempt:"timeToNextAttempt"},outputs:{beginTestButtonClick:"beginTestButtonClick",continueTestButtonClick:"continueTestButtonClick"},decls:45,vars:48,consts:[[3,"color"],["data-i18n","testTutorial.testFailed"],["data-e2e","test-tutorial-fail-card__result-answers",1,"test-tutorial__subtitle"],["data-i18n","testTutorial.youMade"],["data-i18n","plural.errorsAccusative"],["data-i18n","testTutorial.from"],["data-i18n","plural.questionsGenitive"],["data-i18n","testTutorial.canTryAgain"],["class","test-tutorial__subtitle","data-e2e","test-tutorial-fail-card__current-try",4,"ngIf"],[1,"test-tutorial__list"],["data-e2e","test-tutorial-fail-card__question-count"],["data-i18n","plural.questions"],["data-e2e","test-tutorial-fail-card__max-error",4,"ngIf"],["data-i18n","testTutorial.noTimeLimits"],[1,"test-tutorial__button-wrapper"],["class","ui-sb-button--default ui-sb-button--small ui-sb-button--view-1 test-tutorial__button","data-e2e","test-tutorial-fail-card__continue-trigger",3,"disabled","click",4,"ngIf"],["data-e2e","test-tutorial-fail-card__repeat-trigger",1,"ui-sb-button--default","ui-sb-button--small","ui-sb-button--view-1","test-tutorial__button",3,"disabled","click"],["data-i18n","testTutorial.takeOneMoreTime"],[4,"ngIf"],["src","/assets/img/pages/test-tutorial/test-tutorial__inner-card--result.svg","loading","lazy",1,"test-tutorial__image",3,"alt"],["data-e2e","test-tutorial-fail-card__current-try",1,"test-tutorial__subtitle"],["data-i18n","testTutorial.youHave"],["data-i18n","plural.attempts"],["data-e2e","test-tutorial-fail-card__max-error"],["data-i18n","testTutorial.max"],["data-i18n","plural.errors"],["data-e2e","test-tutorial-fail-card__continue-trigger",1,"ui-sb-button--default","ui-sb-button--small","ui-sb-button--view-1","test-tutorial__button",3,"disabled","click"],["data-i18n","testTutorial.continue"],["data-i18n","testTutorial.after"],["data-i18n","time.short"]],template:function(t,e){1&t&&(E.Gc(0,"app-test-tutorial-inner-card",0),E.Gc(1,"app-test-tutorial-inner-card-body"),E.Gc(2,"app-test-tutorial-inner-card-title",1),E.Gd(3),E.Xc(4,"transloco"),E.Fc(),E.Gc(5,"p",2),E.Gc(6,"span",3),E.Gd(7),E.Xc(8,"transloco"),E.Fc(),E.Gd(9),E.Gc(10,"span",4),E.Gd(11),E.Xc(12,"transloco"),E.Fc(),E.Gc(13,"span",5),E.Gd(14),E.Xc(15,"transloco"),E.Fc(),E.Gd(16),E.Gc(17,"span",6),E.Gd(18),E.Xc(19,"transloco"),E.Fc(),E.Gd(20,". "),E.Gc(21,"span",7),E.Gd(22),E.Xc(23,"transloco"),E.Fc(),E.Fc(),E.Ed(24,tt,9,10,"p",8),E.Gc(25,"ul",9),E.Gc(26,"li",10),E.Gd(27),E.Gc(28,"span",11),E.Gd(29),E.Xc(30,"transloco"),E.Fc(),E.Fc(),E.Ed(31,et,8,10,"li",12),E.Gc(32,"li",13),E.Gd(33),E.Xc(34,"transloco"),E.Fc(),E.Fc(),E.Gc(35,"div",14),E.Ed(36,ot,5,5,"button",15),E.Gc(37,"button",16),E.Sc("click",(function(){return e.beginTestButtonClick.emit()})),E.Gc(38,"span",17),E.Gd(39),E.Xc(40,"transloco"),E.Fc(),E.Ed(41,st,8,9,"span",18),E.Fc(),E.Fc(),E.Fc(),E.Gc(42,"app-test-tutorial-inner-card-image"),E.Bc(43,"img",19),E.Xc(44,"transloco"),E.Fc(),E.Fc()),2&t&&(E.ed("color",e.testTutorialInnerCardColorEnum.DANGER),E.nc(3),E.Id(" ",E.Yc(4,19,"testTutorial.testFailed")," "),E.nc(4),E.Id("",E.Yc(8,21,"testTutorial.youMade")," "),E.nc(2),E.Id("",e.wrongAnswersCount,"\xa0"),E.nc(2),E.Id("",E.Zc(12,23,"plural.errorsAccusative",E.jd(42,Z,e.wrongAnswersCount))," "),E.nc(3),E.Hd(E.Yc(15,26,"testTutorial.from")),E.nc(2),E.Id("\xa0",e.questionsCount,"\xa0"),E.nc(2),E.Hd(E.Zc(19,28,"plural.questionsGenitive",E.jd(44,Z,e.questionsCount))),E.nc(4),E.Hd(E.Yc(23,31,"testTutorial.canTryAgain")),E.nc(2),E.ed("ngIf",e.testType===e.testTypeEnum.LIMITED),E.nc(3),E.Id(" ",e.questionsCount,""),E.nc(2),E.Id(" ",E.Zc(30,33,"plural.questions",E.jd(46,Z,e.questionsCount)),""),E.nc(2),E.ed("ngIf",e.testType===e.testTypeEnum.LIMITED),E.nc(2),E.Hd(E.Yc(34,36,"testTutorial.noTimeLimits")),E.nc(3),E.ed("ngIf",e.canContinueTest),E.nc(1),E.ed("disabled",!e.canBeginTest),E.nc(2),E.Hd(E.Yc(40,38,"testTutorial.takeOneMoreTime")),E.nc(2),E.ed("ngIf",!e.canBeginTest),E.nc(2),E.ed("alt",E.Yc(44,40,"testTutorial.manTakingTest.image")))},directives:[R,W,q,I.u,N],pipes:[G.g,D.a],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),t})();const at=function(t){return{count:t}};function ct(t,e){if(1&t&&(E.Gc(0,"li",11),E.Gc(1,"span",12),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Gd(4),E.Gc(5,"span",13),E.Gd(6),E.Xc(7,"transloco"),E.Fc(),E.Fc()),2&t){const t=E.Wc();E.nc(2),E.Hd(E.Yc(3,3,"testTutorial.max")),E.nc(2),E.Id(" ",t.maxErrorsCount," "),E.nc(2),E.Id(" ",E.Zc(7,5,"plural.errors",E.jd(8,at,t.maxErrorsCount)),"")}}function rt(t,e){if(1&t&&(E.Gc(0,"li",14),E.Gc(1,"span",15),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Gd(4),E.Gc(5,"span",16),E.Gd(6),E.Xc(7,"transloco"),E.Fc(),E.Fc()),2&t){const t=E.Wc();E.nc(2),E.Id("",E.Yc(3,3,"testTutorial.everyDayWillHave")," "),E.nc(2),E.Id(" ",t.maxAttemptsInInterval,"\xa0"),E.nc(2),E.Hd(E.Zc(7,5,"plural.attempts",E.jd(8,at,t.maxAttemptsInInterval)))}}function lt(t,e){if(1&t&&(E.Gc(0,"span"),E.Gd(1,"\xa0"),E.Gc(2,"span",24),E.Gd(3),E.Xc(4,"transloco"),E.Fc(),E.Gc(5,"span",25),E.Gd(6),E.Xc(7,"duration"),E.Fc(),E.Fc()),2&t){const t=E.Wc(3);E.nc(3),E.Id("",E.Yc(4,2,"testTutorial.after")," "),E.nc(3),E.Hd(E.bd(7,4,t.timeToNextAttempt,"hh:mm",!1,!0))}}function ut(t,e){if(1&t){const t=E.Hc();E.Gc(0,"button",22),E.Sc("click",(function(){return E.ud(t),E.Wc(2).continueTestButtonClick.emit()})),E.Gc(1,"span",23),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Ed(4,lt,8,9,"span",21),E.Fc()}if(2&t){const t=E.Wc(2);E.ed("disabled",!t.canContinueTest),E.nc(2),E.Hd(E.Yc(3,3,"testTutorial.continue")),E.nc(2),E.ed("ngIf",!t.canContinueTest)}}function dt(t,e){if(1&t&&(E.Gc(0,"span"),E.Gd(1,"\xa0"),E.Gc(2,"span",24),E.Gd(3),E.Xc(4,"transloco"),E.Fc(),E.Gc(5,"span",25),E.Gd(6),E.Xc(7,"duration"),E.Fc(),E.Fc()),2&t){const t=E.Wc(2);E.nc(3),E.Id("",E.Yc(4,2,"testTutorial.after")," "),E.nc(3),E.Hd(E.bd(7,4,t.timeToNextAttempt,"hh:mm",!1,!0))}}function pt(t,e){if(1&t){const t=E.Hc();E.Ec(0),E.Gc(1,"div",17),E.Ed(2,ut,5,5,"button",18),E.Gc(3,"button",19),E.Sc("click",(function(){return E.ud(t),E.Wc().beginTestButtonClick.emit()})),E.Gc(4,"span",20),E.Gd(5),E.Xc(6,"transloco"),E.Fc(),E.Ed(7,dt,8,9,"span",21),E.Fc(),E.Fc(),E.Dc()}if(2&t){const t=E.Wc();E.nc(2),E.ed("ngIf",t.canContinueTest),E.nc(1),E.ed("disabled",!t.canBeginTest),E.nc(2),E.Hd(E.Yc(6,4,"testTutorial.repeat")),E.nc(2),E.ed("ngIf",!t.canBeginTest)}}function gt(t,e){if(1&t&&(E.Gc(0,"span"),E.Gd(1,"\xa0"),E.Gc(2,"span",24),E.Gd(3),E.Xc(4,"transloco"),E.Fc(),E.Gc(5,"span",25),E.Gd(6),E.Xc(7,"duration"),E.Fc(),E.Fc()),2&t){const t=E.Wc(2);E.nc(3),E.Id("",E.Yc(4,2,"testTutorial.after")," "),E.nc(3),E.Hd(E.bd(7,4,t.timeToNextAttempt,"hh:mm",!1,!0))}}function _t(t,e){if(1&t){const t=E.Hc();E.Gc(0,"button",26),E.Sc("click",(function(){return E.ud(t),E.Wc().beginTestButtonClick.emit()})),E.Gc(1,"span",27),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Ed(4,gt,8,9,"span",21),E.Fc()}if(2&t){const t=E.Wc();E.ed("disabled",!t.canBeginTest),E.nc(2),E.Hd(E.Yc(3,3,"testTutorial.takeTest")),E.nc(2),E.ed("ngIf",!t.canBeginTest)}}let ht=(()=>{class t{constructor(){this.testType=w.UNLIMITED,this.testTypeEnum=w,this.testStatusEnum=s.vc.StatusEnum,this.userTestAttemptsStatusEnum=s.Hc.StatusEnum,this.beginTestButtonClick=new E.t,this.continueTestButtonClick=new E.t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=E.uc({type:t,selectors:[["app-test-tutorial-begin-card"]],inputs:{questionsCount:"questionsCount",maxErrorsCount:"maxErrorsCount",maxAttemptsInInterval:"maxAttemptsInInterval",lastAttempt:"lastAttempt",testStatus:"testStatus",testType:"testType",canBeginTest:"canBeginTest",canContinueTest:"canContinueTest",timeToNextAttempt:"timeToNextAttempt"},outputs:{beginTestButtonClick:"beginTestButtonClick",continueTestButtonClick:"continueTestButtonClick"},decls:25,vars:23,consts:[["data-i18n","testTutorial.timeToTest"],["data-i18n","testTutorial.checkYourKnowledge",1,"test-tutorial__subtitle"],[1,"test-tutorial__list"],["data-e2e","test-tutorial-begin-card__question-count"],["data-i18n","plural.questions"],["data-e2e","test-tutorial-begin-card__max-error-count",4,"ngIf"],["data-i18n","testTutorial.noTimeLimits"],["data-e2e","test-tutorial-begin-card__innterval",4,"ngIf"],[4,"ngIf","ngIfElse"],["beginButton",""],["src","/assets/img/pages/test-tutorial/test-tutorial__inner-card--begin.svg","loading","lazy",1,"test-tutorial__image",3,"alt"],["data-e2e","test-tutorial-begin-card__max-error-count"],["data-i18n","testTutorial.max"],["data-i18n","plural.errors"],["data-e2e","test-tutorial-begin-card__innterval"],["data-i18n","testTutorial.everyDayWillHave"],["data-i18n","plural.attempts"],[1,"test-tutorial__button-wrapper"],["class","ui-sb-button--default ui-sb-button--small ui-sb-button--view-1 test-tutorial__button","data-e2e","test-tutorial-begin-card__continue-trigger",3,"disabled","click",4,"ngIf"],["data-e2e","test-tutorial-begin-card__again-trigger",1,"ui-sb-button--default","ui-sb-button--small","ui-sb-button--view-2","test-tutorial__button",3,"disabled","click"],["data-i18n","testTutorial.repeat"],[4,"ngIf"],["data-e2e","test-tutorial-begin-card__continue-trigger",1,"ui-sb-button--default","ui-sb-button--small","ui-sb-button--view-1","test-tutorial__button",3,"disabled","click"],["data-i18n","testTutorial.continue"],["data-i18n","testTutorial.after"],["data-i18n","time.short"],["data-e2e","test-tutorial-begin-card__start-trigger",1,"ui-sb-button--default","ui-sb-button--small","ui-sb-button--view-1","test-tutorial__button",3,"disabled","click"],["data-i18n","testTutorial.takeTest"]],template:function(t,e){if(1&t&&(E.Gc(0,"app-test-tutorial-inner-card"),E.Gc(1,"app-test-tutorial-inner-card-body"),E.Gc(2,"app-test-tutorial-inner-card-title",0),E.Gd(3),E.Xc(4,"transloco"),E.Fc(),E.Gc(5,"p",1),E.Gd(6),E.Xc(7,"transloco"),E.Fc(),E.Gc(8,"ul",2),E.Gc(9,"li",3),E.Gd(10),E.Gc(11,"span",4),E.Gd(12),E.Xc(13,"transloco"),E.Fc(),E.Fc(),E.Ed(14,ct,8,10,"li",5),E.Gc(15,"li",6),E.Gd(16),E.Xc(17,"transloco"),E.Fc(),E.Ed(18,rt,8,10,"li",7),E.Fc(),E.Ed(19,pt,8,6,"ng-container",8),E.Ed(20,_t,5,5,"ng-template",null,9,E.Fd),E.Fc(),E.Gc(22,"app-test-tutorial-inner-card-image"),E.Bc(23,"img",10),E.Xc(24,"transloco"),E.Fc(),E.Fc()),2&t){const t=E.sd(21);E.nc(3),E.Hd(E.Yc(4,10,"testTutorial.timeToTest")),E.nc(3),E.Id(" ",E.Yc(7,12,"testTutorial.checkYourKnowledge")," "),E.nc(4),E.Id(" ",e.questionsCount," "),E.nc(2),E.Id(" ",E.Zc(13,14,"plural.questions",E.jd(21,at,e.questionsCount)),""),E.nc(2),E.ed("ngIf",e.testType===e.testTypeEnum.LIMITED),E.nc(2),E.Hd(E.Yc(17,17,"testTutorial.noTimeLimits")),E.nc(2),E.ed("ngIf",e.testType===e.testTypeEnum.LIMITED),E.nc(1),E.ed("ngIf",e.lastAttempt)("ngIfElse",t),E.nc(4),E.ed("alt",E.Yc(24,19,"testTutorial.manBehindLaptop.image"))}},directives:[R,W,q,I.u,N],pipes:[G.g,D.a],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;padding:32px 20px;border-radius:20px;background-color:var(--ui-sb-color-bg-secondary)}@media (min-width:768px){[_nghost-%COMP%]{padding:32px}}@media (min-width:1280px){[_nghost-%COMP%]{padding:48px}}@media (min-width:1600px){[_nghost-%COMP%]{padding:60px}}[_nghost-%COMP%]   app-test-tutorial-inner-card[_ngcontent-%COMP%]{display:flex}@media (max-width:767.9px){[_nghost-%COMP%]   app-test-tutorial-inner-card[_ngcontent-%COMP%]{flex-direction:column}}[_nghost-%COMP%]   app-test-tutorial-inner-card-title[_ngcontent-%COMP%]{font-size:20px;line-height:26px;font-weight:600;display:block;margin-bottom:8px;color:var(--ui-sb-color-text-main)}@media (min-width:1024px){[_nghost-%COMP%]   app-test-tutorial-inner-card-title[_ngcontent-%COMP%]{font-size:24px;line-height:32px}}@media (min-width:1600px){[_nghost-%COMP%]   app-test-tutorial-inner-card-title[_ngcontent-%COMP%]{font-size:28px;line-height:36px}}[_nghost-%COMP%]   app-test-tutorial-inner-card-body[_ngcontent-%COMP%]{flex-grow:1}@media (min-width:768px){[_nghost-%COMP%]   app-test-tutorial-inner-card-body[_ngcontent-%COMP%]{margin-right:64px}}@media (min-width:1024px){[_nghost-%COMP%]   app-test-tutorial-inner-card-body[_ngcontent-%COMP%]{margin-right:32px}}@media (min-width:1600px){[_nghost-%COMP%]   app-test-tutorial-inner-card-body[_ngcontent-%COMP%]{margin-right:100px}}[_nghost-%COMP%]   app-test-tutorial-inner-card-image[_ngcontent-%COMP%]{display:inline-flex;align-items:center}@media (max-width:767.9px){[_nghost-%COMP%]   app-test-tutorial-inner-card-image[_ngcontent-%COMP%]{margin-top:24px}}[_nghost-%COMP%]   .test-tutorial__list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%], [_nghost-%COMP%]   .test-tutorial__subtitle[_ngcontent-%COMP%]{font-size:14px;line-height:22px;color:var(--ui-sb-color-text-main)}[_nghost-%COMP%]   .test-tutorial__subtitle[_ngcontent-%COMP%]{margin-bottom:4px}[_nghost-%COMP%]   .test-tutorial__list[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:24px;padding-left:0}@media (min-width:1024px){[_nghost-%COMP%]   .test-tutorial__list[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:28px}}[_nghost-%COMP%]   .test-tutorial__list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative;margin-bottom:8px;padding-left:8px;list-style-type:none}[_nghost-%COMP%]   .test-tutorial__list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:before{content:"\xb7";position:absolute;left:0}[_nghost-%COMP%]   .test-tutorial__list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]   .test-tutorial__button[_ngcontent-%COMP%]{margin-right:12px;margin-bottom:12px}@media (max-width:767.9px){[_nghost-%COMP%]   .test-tutorial__button[_ngcontent-%COMP%]{justify-content:center;width:100%}}[_nghost-%COMP%]   .test-tutorial__button[_ngcontent-%COMP%]:last-child{margin-right:0}[_nghost-%COMP%]   .test-tutorial__button-wrapper[_ngcontent-%COMP%]{margin-bottom:-12px}[_nghost-%COMP%]   .test-tutorial__image[_ngcontent-%COMP%]{position:relative;display:block;width:100%}@media (min-width:768px){[_nghost-%COMP%]   .test-tutorial__image[_ngcontent-%COMP%]{width:212px}}@media (min-width:1024px){[_nghost-%COMP%]   .test-tutorial__image[_ngcontent-%COMP%]{width:256px}}@media (min-width:1280px){[_nghost-%COMP%]   .test-tutorial__image[_ngcontent-%COMP%]{width:220px}}@media (min-width:1600px){[_nghost-%COMP%]   .test-tutorial__image[_ngcontent-%COMP%]{width:296px}}'],changeDetection:0}),t})();function mt(t,e){1&t&&E.Bc(0,"app-test-tutorial-alert",3)}function bt(t,e){if(1&t){const t=E.Hc();E.Gc(0,"app-test-tutorial-success-card",8),E.Sc("beginTestButtonClick",(function(){return E.ud(t),E.Wc(2).beginTestButtonClick.emit()}))("continueTestButtonClick",(function(){return E.ud(t),E.Wc(2).continueTestButtonClick.emit()})),E.Fc()}if(2&t){const t=E.Wc(2);E.ed("testType",t.testType)("questionsCount",t.test.questions.length)("correctAnswersCount",(null==t.attemptResult?null:t.attemptResult.correct_answers.length)||0)("attemptsInInterval",null==t.userTest?null:t.userTest.attempts_in_interval)("maxAttemptsInInterval",t.maxAttemptsInInterval)("maxErrorsCount",t.maxErrorsCount)("canBeginTest",t.canBeginTest)("canContinueTest",t.canContinueTest)("timeToNextAttempt",null==t.userTest?null:t.userTest.next_attempt)}}function Ct(t,e){if(1&t){const t=E.Hc();E.Gc(0,"app-test-tutorial-fail-card",9),E.Sc("beginTestButtonClick",(function(){return E.ud(t),E.Wc(2).beginTestButtonClick.emit()}))("continueTestButtonClick",(function(){return E.ud(t),E.Wc(2).continueTestButtonClick.emit()})),E.Fc()}if(2&t){const t=E.Wc(2);E.ed("testType",t.testType)("questionsCount",t.test.questions.length)("wrongAnswersCount",(null==t.attemptResult?null:t.attemptResult.wrong_answers.length)||0)("attemptsInInterval",null==t.userTest?null:t.userTest.attempts_in_interval)("maxAttemptsInInterval",t.maxAttemptsInInterval)("maxErrorsCount",t.maxErrorsCount)("canBeginTest",t.canBeginTest)("canContinueTest",t.canContinueTest)("timeToNextAttempt",null==t.userTest?null:t.userTest.next_attempt)}}function ft(t,e){if(1&t){const t=E.Hc();E.Gc(0,"app-test-tutorial-begin-card",10),E.Sc("beginTestButtonClick",(function(){return E.ud(t),E.Wc(2).beginTestButtonClick.emit()}))("continueTestButtonClick",(function(){return E.ud(t),E.Wc(2).continueTestButtonClick.emit()})),E.Fc()}if(2&t){const t=E.Wc(2);E.ed("testType",t.testType)("questionsCount",t.test.questions.length)("maxAttemptsInInterval",t.maxAttemptsInInterval)("maxErrorsCount",t.maxErrorsCount)("lastAttempt",t.lastAttempt)("canBeginTest",t.canBeginTest)("canContinueTest",t.canContinueTest)("timeToNextAttempt",null==t.userTest?null:t.userTest.next_attempt)}}function Ot(t,e){if(1&t&&(E.Ec(0),E.Ec(1,4),E.Ed(2,bt,1,9,"app-test-tutorial-success-card",5),E.Ed(3,Ct,1,9,"app-test-tutorial-fail-card",6),E.Ed(4,ft,1,8,"app-test-tutorial-begin-card",7),E.Dc(),E.Dc()),2&t){const t=E.Wc();E.nc(1),E.ed("ngSwitch",null==t.lastAttempt?null:t.lastAttempt.status),E.nc(1),E.ed("ngSwitchCase",t.userTestAttemptsStatusEnum.DONE),E.nc(1),E.ed("ngSwitchCase",t.userTestAttemptsStatusEnum.FAIL)}}function vt(t,e){if(1&t){const t=E.Hc();E.Gc(0,"app-test-tutorial-begin-card",10),E.Sc("beginTestButtonClick",(function(){return E.ud(t),E.Wc().beginTestButtonClick.emit()}))("continueTestButtonClick",(function(){return E.ud(t),E.Wc().continueTestButtonClick.emit()})),E.Fc()}if(2&t){const t=E.Wc();E.ed("testType",t.testType)("questionsCount",null==t.test?null:t.test.questions.length)("maxAttemptsInInterval",t.maxAttemptsInInterval)("maxErrorsCount",t.maxErrorsCount)("lastAttempt",t.lastAttempt)("canBeginTest",t.canBeginTest)("canContinueTest",t.canContinueTest)("timeToNextAttempt",null==t.userTest?null:t.userTest.next_attempt)}}let xt=(()=>{class t{constructor(){this.beginTestButtonClick=new E.t,this.continueTestButtonClick=new E.t,this.userTestAttemptsStatusEnum=s.Hc.StatusEnum,this.maxAttemptsInInterval=3}ngOnInit(){}ngOnChanges(t){var e,n,o;(null===(e=null==t?void 0:t.test)||void 0===e?void 0:e.currentValue)!==(null===(n=null==t?void 0:t.test)||void 0===n?void 0:n.previousValue)&&(this.testType=this.test.passing_threshold?w.LIMITED:w.UNLIMITED,this.maxErrorsCount=(o=this.test).passing_threshold?Math.floor(o.questions.length*(100-o.passing_threshold)/100):null)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=E.uc({type:t,selectors:[["app-test-tutorial-inner-card-director"]],inputs:{test:"test",attemptResult:"attemptResult",bestAttempt:"bestAttempt",lastAttempt:"lastAttempt",userTest:"userTest",canBeginTest:"canBeginTest",canContinueTest:"canContinueTest"},outputs:{beginTestButtonClick:"beginTestButtonClick",continueTestButtonClick:"continueTestButtonClick"},features:[E.lc],decls:4,vars:3,consts:[["class","test-tutorial__alert",4,"ngIf"],[4,"ngIf","ngIfElse"],["beginCard",""],[1,"test-tutorial__alert"],[3,"ngSwitch"],[3,"testType","questionsCount","correctAnswersCount","attemptsInInterval","maxAttemptsInInterval","maxErrorsCount","canBeginTest","canContinueTest","timeToNextAttempt","beginTestButtonClick","continueTestButtonClick",4,"ngSwitchCase"],[3,"testType","questionsCount","wrongAnswersCount","attemptsInInterval","maxAttemptsInInterval","maxErrorsCount","canBeginTest","canContinueTest","timeToNextAttempt","beginTestButtonClick","continueTestButtonClick",4,"ngSwitchCase"],[3,"testType","questionsCount","maxAttemptsInInterval","maxErrorsCount","lastAttempt","canBeginTest","canContinueTest","timeToNextAttempt","beginTestButtonClick","continueTestButtonClick",4,"ngSwitchDefault"],[3,"testType","questionsCount","correctAnswersCount","attemptsInInterval","maxAttemptsInInterval","maxErrorsCount","canBeginTest","canContinueTest","timeToNextAttempt","beginTestButtonClick","continueTestButtonClick"],[3,"testType","questionsCount","wrongAnswersCount","attemptsInInterval","maxAttemptsInInterval","maxErrorsCount","canBeginTest","canContinueTest","timeToNextAttempt","beginTestButtonClick","continueTestButtonClick"],[3,"testType","questionsCount","maxAttemptsInInterval","maxErrorsCount","lastAttempt","canBeginTest","canContinueTest","timeToNextAttempt","beginTestButtonClick","continueTestButtonClick"]],template:function(t,e){if(1&t&&(E.Ed(0,mt,1,0,"app-test-tutorial-alert",0),E.Ed(1,Ot,5,3,"ng-container",1),E.Ed(2,vt,1,8,"ng-template",null,2,E.Fd)),2&t){const t=E.sd(3);E.ed("ngIf",null==e.userTest?null:e.userTest.test_was_updated_since_last_attempt),E.nc(1),E.ed("ngIf",e.lastAttempt)("ngIfElse",t)}},directives:[I.u,A,I.y,I.z,I.A,J,it,ht],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]{background-color:var(--ui-sb-color-element-danger-secondary)}[_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]{background-color:var(--ui-sb-color-element-success-secondary)}[_nghost-%COMP%]   app-test-tutorial-alert.test-tutorial__alert[_ngcontent-%COMP%]{margin-bottom:8px}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%], [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]{border-radius:20px}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card{display:flex;padding:32px 20px}@media (max-width:767.9px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card{flex-direction:column}}@media (min-width:768px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card{padding:32px}}@media (min-width:1280px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card{padding:48px}}@media (min-width:1600px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card{padding:60px}}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-title, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-title{font-size:20px;line-height:26px;font-weight:600;display:block;margin-bottom:8px;color:var(--ui-sb-color-text-main)}@media (min-width:1024px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-title, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-title{font-size:24px;line-height:32px}}@media (min-width:1600px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-title, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-title{font-size:28px;line-height:36px}}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-body, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-body{flex-grow:1}@media (min-width:768px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-body, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-body{margin-right:32px}}@media (min-width:1600px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-body, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-body{margin-right:40px}}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-image, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-image{display:flex;align-items:center;flex-shrink:0}@media (max-width:767.9px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-image, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     app-test-tutorial-inner-card-image{margin-top:24px}}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__list>li, [_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__subtitle, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__list>li, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__subtitle{font-size:14px;line-height:22px;color:var(--ui-sb-color-text-main)}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__subtitle, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__subtitle{margin-bottom:4px}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__list, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__list{margin-top:16px;margin-bottom:24px;padding-left:0}@media (min-width:1024px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__list, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__list{margin-top:20px;margin-bottom:28px}}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__list>li, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__list>li{position:relative;margin-bottom:8px;padding-left:8px;list-style-type:none}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__list>li:before, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__list>li:before{content:"\xb7";position:absolute;left:0}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__list>li:last-child, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__list>li:last-child{margin-bottom:0}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__button, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__button{margin-right:12px;margin-bottom:12px}@media (max-width:767.9px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__button, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__button{justify-content:center;width:100%}}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__button:last-child, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__button:last-child{margin-right:0}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__button-wrapper, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__button-wrapper{margin-bottom:-12px}[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__image, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__image{position:relative;display:block;width:100%}@media (min-width:768px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__image, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__image{width:212px}}@media (min-width:1024px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__image, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__image{width:256px}}@media (min-width:1280px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__image, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__image{width:220px}}@media (min-width:1600px){[_nghost-%COMP%]   app-test-tutorial-fail-card[_ngcontent-%COMP%]     .test-tutorial__image, [_nghost-%COMP%]   app-test-tutorial-success-card[_ngcontent-%COMP%]     .test-tutorial__image{width:296px}}'],changeDetection:0}),t})();var wt=n("kJHU"),Tt=n("5h/E"),Pt=n("UbP3"),Mt=n("wN7T"),yt=n("QQZH"),Et=n("jIqt"),kt=function(t){return t.CORRECT="correct",t.WRONG="wrong",t}({}),It=n("nIj0"),St=n("gIew"),Ft=n("GsfJ");function Gt(t,e){1&t&&(E.Ec(0),E.Bc(1,"svg-icon",5),E.Dc())}function At(t,e){1&t&&(E.Ec(0),E.Bc(1,"svg-icon",6),E.Dc())}let Bt=(()=>{class t{constructor(){this.userAnswerStatusEnum=kt}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=E.uc({type:t,selectors:[["app-test-tutorial-results-input-answer"]],hostVars:2,hostBindings:function(t,e){2&t&&E.pc(e.status)},inputs:{answer:"answer",status:"status"},decls:7,vars:4,consts:[[1,"input-answer__container"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"input-answer__field"],["data-e2e","test-tutorial-results-input-answer__text",1,"input-answer__text"],["name","done_filled_v_2",1,"input-answer__icon"],["name","error_filled_v_2",1,"input-answer__icon"]],template:function(t,e){1&t&&(E.Gc(0,"div",0),E.Ec(1,1),E.Ed(2,Gt,2,0,"ng-container",2),E.Ed(3,At,2,0,"ng-container",2),E.Dc(),E.Gc(4,"div",3),E.Gc(5,"div",4),E.Gd(6),E.Fc(),E.Fc(),E.Fc()),2&t&&(E.nc(1),E.ed("ngSwitch",e.status),E.nc(1),E.ed("ngSwitchCase",e.userAnswerStatusEnum.CORRECT),E.nc(1),E.ed("ngSwitchCase",e.userAnswerStatusEnum.WRONG),E.nc(3),E.Id(" ",e.answer.selected_answers[0]," "))},directives:[I.y,I.z,F.a],styles:["[_nghost-%COMP%]{display:block;margin-top:32px}@media (min-width:768px){[_nghost-%COMP%]{margin-top:40px}}[_nghost-%COMP%]   .input-answer__container[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (min-width:768px){[_nghost-%COMP%]   .input-answer__container[_ngcontent-%COMP%]{flex-direction:row}}[_nghost-%COMP%]   .input-answer__field[_ngcontent-%COMP%]{flex-grow:1;min-height:112px;padding:18px 14px;border-radius:10px;word-break:break-word}@media (max-width:767.9px){[_nghost-%COMP%]   .input-answer__field[_ngcontent-%COMP%]{width:100%;margin-top:12px}}[_nghost-%COMP%]   .input-answer__text[_ngcontent-%COMP%]{font-size:16px;line-height:20px;color:var(--ui-sb-color-text-main)}[_nghost-%COMP%]   .input-answer__icon[_ngcontent-%COMP%]{width:24px;height:24px;flex-shrink:0;margin-right:16px}.wrong[_nghost-%COMP%]   .input-answer__icon[_ngcontent-%COMP%]{color:var(--ui-sb-color-element-danger)}.wrong[_nghost-%COMP%]   .input-answer__field[_ngcontent-%COMP%]{border:1px solid var(--ui-sb-color-element-danger);background-color:var(--ui-sb-color-element-danger-secondary)}.correct[_nghost-%COMP%]   .input-answer__icon[_ngcontent-%COMP%]{color:var(--ui-sb-color-element-success)}.correct[_nghost-%COMP%]   .input-answer__field[_ngcontent-%COMP%]{border:1px solid var(--ui-sb-color-stroke-main);background-color:var(--ui-sb-color-bg-main)}"],changeDetection:0}),t})();var jt=n("kXIt"),Lt=function(t){return t.CORRECT="correct",t.WRONG="wrong",t.UNSELECTED="unselected",t}({}),Rt=n("DtU0");function qt(t,e){1&t&&(E.Ec(0),E.Bc(1,"svg-icon",10),E.Dc())}function Wt(t,e){1&t&&(E.Ec(0),E.Bc(1,"svg-icon",11),E.Dc())}function Nt(t,e){1&t&&(E.Ec(0),E.Bc(1,"div",12),E.Dc())}function Dt(t,e){if(1&t&&(E.Ec(0),E.Ec(1,4),E.Ed(2,qt,2,0,"ng-container",5),E.Ed(3,Wt,2,0,"ng-container",5),E.Ed(4,Nt,2,0,"ng-container",5),E.Dc(),E.Dc()),2&t){const t=E.Wc().ngVar,e=E.Wc(2);E.nc(1),E.ed("ngSwitch",t),E.nc(1),E.ed("ngSwitchCase",e.questionAnswerStatusEnum.CORRECT),E.nc(1),E.ed("ngSwitchCase",e.questionAnswerStatusEnum.WRONG),E.nc(1),E.ed("ngSwitchCase",e.questionAnswerStatusEnum.UNSELECTED)}}function $t(t,e){1&t&&(E.Ec(0),E.Bc(1,"div",14),E.Dc())}function Ut(t,e){1&t&&(E.Ec(0),E.Bc(1,"svg-icon",15),E.Dc())}function Xt(t,e){if(1&t&&(E.Ec(0),E.Ec(1,4),E.Ed(2,$t,2,0,"ng-container",5),E.Ed(3,Ut,2,0,"ng-container",13),E.Dc(),E.Dc()),2&t){const t=E.Wc(2).ngVar,e=E.Wc(2);E.nc(1),E.ed("ngSwitch",t),E.nc(1),E.ed("ngSwitchCase",e.questionAnswerStatusEnum.UNSELECTED)}}function Yt(t,e){1&t&&(E.Ec(0),E.Bc(1,"div",14),E.Dc())}function Vt(t,e){1&t&&(E.Ec(0),E.Bc(1,"svg-icon",16),E.Dc())}function Ht(t,e){if(1&t&&(E.Ec(0),E.Ec(1,4),E.Ed(2,Yt,2,0,"ng-container",5),E.Ed(3,Vt,2,0,"ng-container",13),E.Dc(),E.Dc()),2&t){const t=E.Wc(2).ngVar,e=E.Wc(2);E.nc(1),E.ed("ngSwitch",t),E.nc(1),E.ed("ngSwitchCase",e.questionAnswerStatusEnum.UNSELECTED)}}function zt(t,e){if(1&t&&(E.Ec(0),E.Ec(1,4),E.Ed(2,Xt,4,2,"ng-container",5),E.Ed(3,Ht,4,2,"ng-container",5),E.Dc(),E.Dc()),2&t){const t=E.Wc(3);E.nc(1),E.ed("ngSwitch",t.status),E.nc(1),E.ed("ngSwitchCase",t.statusEnum.CORRECT),E.nc(1),E.ed("ngSwitchCase",t.statusEnum.WRONG)}}function Qt(t,e){if(1&t&&(E.Bc(0,"img",17),E.Xc(1,"transloco")),2&t){const t=E.Wc(2).$implicit;E.ed("src",t.files[0],E.wd)("alt",E.Yc(1,2,"testTutorial.manChoosingAnswer.image"))}}function Kt(t,e){if(1&t){const t=E.Hc();E.Gc(0,"svg-icon",18),E.Sc("click",(function(){E.ud(t);const e=E.Wc(2).index;return E.Wc().openGallery(e)})),E.Fc()}}const Jt=function(t){return[t]};function Zt(t,e){if(1&t&&(E.Gc(0,"div",3),E.Ec(1,4),E.Ed(2,Dt,5,4,"ng-container",5),E.Ed(3,zt,4,3,"ng-container",5),E.Dc(),E.Gc(4,"span",6),E.Gd(5),E.Fc(),E.Gc(6,"div",7),E.Ed(7,Qt,2,4,"img",8),E.Fc(),E.Ed(8,Kt,1,0,"svg-icon",9),E.Fc()),2&t){const t=e.ngVar,n=E.Wc().$implicit,o=E.Wc();E.sc("result__answer-answer--with-image",null==n.files?null:n.files.length),E.ed("ngClass",E.jd(9,Jt,"result__answer--"+t)),E.nc(1),E.ed("ngSwitch",o.type),E.nc(1),E.ed("ngSwitchCase",o.questionTypesEnum.ONE_RIGHT_ANSWER),E.nc(1),E.ed("ngSwitchCase",o.questionTypesEnum.MULTIPLE_RIGHT_ANSWER),E.nc(2),E.Hd(n.label),E.nc(2),E.ed("ngIf",null==n.files?null:n.files.length),E.nc(1),E.ed("ngIf",null==n.files?null:n.files.length)}}function te(t,e){if(1&t&&(E.Gc(0,"div",1),E.Ed(1,Zt,9,11,"div",2),E.Fc()),2&t){const t=e.$implicit,n=E.Wc();E.nc(1),E.ed("ngVar",n.getAnswerStatusEnum(t))}}var ee=function(t){return t.ONLY_IMAGE="only-image",t.ONLY_LABEL="only-label",t.IMAGE_AND_LABEL="image-label",t}({});let ne=(()=>{class t{constructor(t){this.galleryService=t,this.statusEnum=kt,this.questionAnswerStatusEnum=Lt,this.questionTypesEnum=s.Wb.TypeEnum}get viewTypeClass(){const t="select-answer--",e=this.answer.question.answers.every((t=>{var e;return!t.label&&(null===(e=t.files)||void 0===e?void 0:e.length)})),n=this.answer.question.answers.every((t=>{var e;return t.label&&!(null===(e=t.files)||void 0===e?void 0:e.length)}));return e?t+ee.ONLY_IMAGE:n?t+ee.ONLY_LABEL:t+ee.IMAGE_AND_LABEL}getAnswerStatusEnum(t){return function(t,e){return t.selected_answers.includes(e.id)&&e.is_correct?Lt.CORRECT:t.selected_answers.includes(e.id)&&!e.is_correct?Lt.WRONG:Lt.UNSELECTED}(this.answer,t)}openGallery(t){const e=Object(jt.b)(this.answer.question),n=Object(jt.a)(this.answer.question,t);this.galleryService.openGallery(e,n)}}return t.\u0275fac=function(e){return new(e||t)(E.Ac(Tt.Eb))},t.\u0275cmp=E.uc({type:t,selectors:[["app-test-tutorial-results-select-answer"]],hostVars:2,hostBindings:function(t,e){2&t&&E.pc(e.viewTypeClass)},inputs:{answer:"answer",type:"type",status:"status"},decls:2,vars:4,consts:[["class","result-answer__wrapper",4,"ngFor","ngForOf","ngForTrackBy"],[1,"result-answer__wrapper"],["class","result-answer__inner-wrapper",3,"ngClass","result__answer-answer--with-image",4,"ngVar"],[1,"result-answer__inner-wrapper",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],["data-e2e","test-tutorial-results-select-answer__label",1,"result-answer__label"],[1,"result-answer__image-wrapper"],["class","result-answer__image","data-e2e","test-tutorial-results-select-answer__image","loading","lazy",3,"src","alt",4,"ngIf"],["class","result-answer__icon-zoom","name","zoom_next","data-e2e","test-tutorial-results-select-answer__open-trigger",3,"click",4,"ngIf"],["name","done_filled_v_2",1,"result-answer__icon","circle","success"],["name","error_filled_v_2",1,"result-answer__icon","circle","danger"],[1,"result-answer__empty-field","circle"],[4,"ngSwitchDefault"],[1,"result-answer__empty-field","square"],["name","done_filled_v_2",1,"result-answer__icon","square","success"],["name","done_filled_v_2",1,"result-answer__icon","square","faded"],["data-e2e","test-tutorial-results-select-answer__image","loading","lazy",1,"result-answer__image",3,"src","alt"],["name","zoom_next","data-e2e","test-tutorial-results-select-answer__open-trigger",1,"result-answer__icon-zoom",3,"click"]],template:function(t,e){1&t&&(E.Ed(0,te,2,1,"div",0),E.Xc(1,"trackBy")),2&t&&E.ed("ngForOf",e.answer.question.answers)("ngForTrackBy",E.Yc(1,2,"id"))},directives:[I.t,S.a,I.r,I.y,I.z,I.u,F.a,I.A],pipes:[Rt.a,G.g],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .result-answer__wrapper[_ngcontent-%COMP%]{position:relative;padding:20px 0;border-bottom:1px solid var(--ui-sb-color-stroke-main)}[_nghost-%COMP%]   .result-answer__wrapper[_ngcontent-%COMP%]:last-child{padding-bottom:0;border:0}[_nghost-%COMP%]   .result-answer__label[_ngcontent-%COMP%]{font-size:16px;line-height:24px;flex-grow:1}[_nghost-%COMP%]   .result-answer__label[_ngcontent-%COMP%]:empty{display:none}[_nghost-%COMP%]   .result-answer__empty-field[_ngcontent-%COMP%], [_nghost-%COMP%]   .result-answer__icon[_ngcontent-%COMP%]{width:24px;height:24px;flex-shrink:0;margin-right:16px}@media (max-width:767.9px){[_nghost-%COMP%]   .result-answer__empty-field[_ngcontent-%COMP%], [_nghost-%COMP%]   .result-answer__icon[_ngcontent-%COMP%]{margin-right:12px}}[_nghost-%COMP%]   .result-answer__icon.success[_ngcontent-%COMP%]{color:var(--ui-sb-color-element-success)}[_nghost-%COMP%]   .result-answer__icon.success.square[_ngcontent-%COMP%]{background-color:var(--ui-sb-color-element-success)}[_nghost-%COMP%]   .result-answer__icon.danger[_ngcontent-%COMP%]{color:var(--ui-sb-color-element-danger)}[_nghost-%COMP%]   .result-answer__icon.faded[_ngcontent-%COMP%]{color:var(--ui-sb-color-bg-secondary-accent)}[_nghost-%COMP%]   .result-answer__icon.faded.square[_ngcontent-%COMP%]{background-color:var(--ui-sb-color-bg-secondary-accent)}[_nghost-%COMP%]   .result-answer__icon.square[_ngcontent-%COMP%]{border-radius:3px}[_nghost-%COMP%]   .result-answer__icon-zoom[_ngcontent-%COMP%]{width:24px;height:24px;position:absolute;bottom:20px;left:0;color:var(--ui-sb-color-icon-secondary);cursor:pointer;transition:.2s ease-in-out}[_nghost-%COMP%]   .result-answer__icon-zoom[_ngcontent-%COMP%]:hover{color:var(--ui-sb-color-icon-main)}[_nghost-%COMP%]   .result-answer__empty-field.circle[_ngcontent-%COMP%], [_nghost-%COMP%]   .result-answer__empty-field.square[_ngcontent-%COMP%]{border:1px solid var(--ui-sb-color-icon-secondary)}[_nghost-%COMP%]   .result-answer__empty-field.circle[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .result-answer__empty-field.square[_ngcontent-%COMP%]{border-radius:3px}[_nghost-%COMP%]   .result-answer__image[_ngcontent-%COMP%]{display:block;object-fit:cover;max-width:100%;height:160px}.select-answer--image-label[_nghost-%COMP%]   .result-answer__inner-wrapper[_ngcontent-%COMP%], .select-answer--only-image[_nghost-%COMP%]   .result-answer__inner-wrapper[_ngcontent-%COMP%], .select-answer--only-label[_nghost-%COMP%]   .result-answer__inner-wrapper[_ngcontent-%COMP%]{display:flex}.select-answer--only-image[_nghost-%COMP%]   .result-answer__wrapper[_ngcontent-%COMP%]:last-child   .result-answer__icon-zoom[_ngcontent-%COMP%]{bottom:0}@media (max-width:767.9px){.select-answer--only-image[_nghost-%COMP%]   .result-answer__image-wrapper[_ngcontent-%COMP%]{width:100%}}.select-answer--image-label[_nghost-%COMP%]   .result-answer__inner-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap}.select-answer--image-label[_nghost-%COMP%]   .result-answer__label[_ngcontent-%COMP%]{width:calc(100% - 36px)}@media (min-width:768px){.select-answer--image-label[_nghost-%COMP%]   .result-answer__label[_ngcontent-%COMP%]{width:calc(100% - 40px)}}.select-answer--image-label[_nghost-%COMP%]   .result-answer__wrapper[_ngcontent-%COMP%]:last-child   .result-answer__icon-zoom[_ngcontent-%COMP%]{bottom:0}.select-answer--image-label[_nghost-%COMP%]   .result-answer__image-wrapper[_ngcontent-%COMP%]{margin-top:12px}@media (max-width:767.9px){.select-answer--image-label[_nghost-%COMP%]   .result-answer__image-wrapper[_ngcontent-%COMP%]{width:100%;height:auto;margin-left:36px}}@media (min-width:768px){.select-answer--image-label[_nghost-%COMP%]   .result-answer__image-wrapper[_ngcontent-%COMP%]{margin-left:40px}}"],changeDetection:0}),t})(),oe=(()=>{class t{ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=E.uc({type:t,selectors:[["app-test-tutorial-results-wrong-hint"]],decls:6,vars:3,consts:[[1,"wrong-hint__container"],["name","error_filled_v_2",1,"wrong-hint__icon"],[1,"wrong-hint__field"],["data-i18n","testTutorial.wrongAnswer",1,"wrong-hint__text"]],template:function(t,e){1&t&&(E.Gc(0,"div",0),E.Bc(1,"svg-icon",1),E.Gc(2,"div",2),E.Gc(3,"div",3),E.Gd(4),E.Xc(5,"transloco"),E.Fc(),E.Fc(),E.Fc()),2&t&&(E.nc(4),E.Id(" ",E.Yc(5,1,"testTutorial.wrongAnswer")," "))},directives:[F.a],pipes:[G.g],styles:["[_nghost-%COMP%]{display:block;margin-top:24px}@media (min-width:768px){[_nghost-%COMP%]{margin-top:32px}}[_nghost-%COMP%]   .wrong-hint__container[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .wrong-hint__field[_ngcontent-%COMP%]{flex-grow:1;padding:12px;border:1px solid var(--ui-sb-color-element-danger);border-radius:10px;background-color:var(--ui-sb-color-element-danger-secondary)}[_nghost-%COMP%]   .wrong-hint__text[_ngcontent-%COMP%]{font-size:12px;line-height:18px;color:var(--ui-sb-color-text-main)}[_nghost-%COMP%]   .wrong-hint__icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:16px;color:var(--ui-sb-color-element-danger)}"],changeDetection:0}),t})();function se(t,e){if(1&t&&(E.Ec(0,5),E.Bc(1,"ui-sb-toggle",6),E.Xc(2,"transloco"),E.Dc()),2&t){const t=e.ngVar,n=E.Wc(2);E.ed("formGroup",n.form),E.nc(1),E.ed("formControl",n.form.controls.onlyWrongAnswers)("labelPosition",t?"after":"before")("toggleLabel",E.Yc(2,4,"testTutorial.showWrong"))}}function ie(t,e){if(1&t&&(E.Gc(0,"div",14),E.Gc(1,"span",15),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Bc(4,"app-skb-froala-content",16),E.Fc()),2&t){const t=E.Wc().$implicit;E.nc(2),E.Id("",E.Yc(3,2,"testTutorial.commentLabel"),":"),E.nc(2),E.ed("content",t.question.description)}}function ae(t,e){if(1&t){const t=E.Hc();E.Gc(0,"div",18),E.Bc(1,"img",19),E.Gc(2,"svg-icon",20),E.Sc("click",(function(){E.ud(t);const n=e.index,o=E.Wc(2).$implicit;return E.Wc(2).openGallery(o.question.files,n)})),E.Fc(),E.Fc()}if(2&t){const t=e.$implicit;E.nc(1),E.ed("src",t.file,E.wd)("alt",t.name)}}function ce(t,e){if(1&t&&(E.Ec(0),E.Ed(1,ae,3,2,"div",17),E.Xc(2,"trackBy"),E.Dc()),2&t){const t=E.Wc().$implicit;E.nc(1),E.ed("ngForOf",t.question.files)("ngForTrackBy",E.Yc(2,2,"id"))}}function re(t,e){if(1&t&&(E.Ec(0),E.Bc(1,"app-test-tutorial-results-input-answer",21),E.Dc()),2&t){const t=E.Wc().$implicit;E.nc(1),E.ed("answer",t)("status",t.status)}}function le(t,e){if(1&t&&(E.Ec(0),E.Bc(1,"app-test-tutorial-results-select-answer",22),E.Dc()),2&t){const t=E.Wc().$implicit;E.nc(1),E.ed("answer",t)("type",t.question.type)}}function ue(t,e){1&t&&(E.Gc(0,"div"),E.Bc(1,"app-test-tutorial-results-wrong-hint"),E.Fc())}function de(t,e){if(1&t&&(E.Ec(0),E.Ed(1,ue,2,0,"div",0),E.Bc(2,"app-test-tutorial-results-select-answer",23),E.Dc()),2&t){const t=E.Wc().$implicit,e=E.Wc(2);E.nc(1),E.ed("ngIf",t.status===e.answerStatusEnum.WRONG),E.nc(1),E.ed("answer",t)("type",t.question.type)("status",t.status)}}function pe(t,e){if(1&t&&(E.Gc(0,"div",24),E.Gc(1,"div",25),E.Gd(2),E.Xc(3,"transloco"),E.Fc(),E.Bc(4,"app-skb-froala-content",26),E.Fc()),2&t){const t=E.Wc().$implicit;E.nc(2),E.Id("",E.Yc(3,2,"testTutorial.hint"),":"),E.nc(2),E.ed("content",t.question.comment)}}function ge(t,e){if(1&t&&(E.Ec(0),E.Gc(1,"div",7),E.Gc(2,"div",8),E.Gc(3,"p",9),E.Gd(4),E.Fc(),E.Ed(5,ie,5,4,"div",10),E.Ed(6,ce,3,4,"ng-container",0),E.Ec(7,11),E.Ed(8,re,2,2,"ng-container",12),E.Ed(9,le,2,2,"ng-container",12),E.Ed(10,de,3,4,"ng-container",12),E.Dc(),E.Fc(),E.Ed(11,pe,5,4,"div",13),E.Fc(),E.Dc()),2&t){const t=e.$implicit,n=E.Wc(2);E.nc(4),E.Jd(" ",t.question._order,".\xa0",t.question.title," "),E.nc(1),E.ed("ngIf",t.question.description),E.nc(1),E.ed("ngIf",null==t.question.files?null:t.question.files.length),E.nc(1),E.ed("ngSwitch",t.question.type),E.nc(1),E.ed("ngSwitchCase",n.questionTypesEnum.STRING_INPUT),E.nc(1),E.ed("ngSwitchCase",n.questionTypesEnum.ONE_RIGHT_ANSWER),E.nc(1),E.ed("ngSwitchCase",n.questionTypesEnum.MULTIPLE_RIGHT_ANSWER),E.nc(1),E.ed("ngIf",t.status===n.answerStatusEnum.WRONG&&t.question.comment)}}function _e(t,e){if(1&t&&(E.Gc(0,"div"),E.Gc(1,"div",1),E.Gc(2,"h2",2),E.Gd(3),E.Xc(4,"transloco"),E.Fc(),E.Ed(5,se,3,6,"ng-container",3),E.Xc(6,"async"),E.Fc(),E.Ed(7,ge,12,9,"ng-container",4),E.Xc(8,"trackBy"),E.Fc()),2&t){const t=e.ngIf,n=E.Wc();E.nc(3),E.Hd(E.Yc(4,4,"testTutorial.myAnswers")),E.nc(2),E.ed("ngVar",E.Yc(6,6,n.viewportService.isMobileViewport$)),E.nc(2),E.ed("ngForOf",t)("ngForTrackBy",E.Yc(8,8,"question.id"))}}let he=(()=>{let t=class{constructor(t,e,n){this.viewportService=t,this.galleryService=e,this.logBus=n,this.answerStatusEnum=kt,this.questionTypesEnum=s.Wb.TypeEnum,this.answers$=new yt.a(1),this.form=new Pt.d({onlyWrongAnswers:new Pt.c(!1)})}ngOnChanges({results:t}){const e=null==t?void 0:t.currentValue;if(e){const t=[...e.correct_answers.map((t=>Object.assign({status:kt.CORRECT},t))),...e.wrong_answers.map((t=>Object.assign({status:kt.WRONG},t)))].sort(((t,e)=>{var n,o;return(null===(n=null==t?void 0:t.question)||void 0===n?void 0:n._order)-(null===(o=null==e?void 0:e.question)||void 0===o?void 0:o._order)}));this.answers$.next(t)}}ngOnInit(){this.filteredAnswers$=Object(_.a)([this.answers$,this.form.controls.onlyWrongAnswers.valueChanges.pipe(Object(Et.a)(!1))]).pipe(Object(C.a)((([t,e])=>e?t.filter((({status:t})=>t===kt.WRONG)):t)),Object(h.a)(1)),this.listenToLogTestToggleResultsType(this.testId,this.lastAttemptId)}openGallery(t,e){const n=t.map((({file:t})=>t));this.galleryService.openGallery(n,e)}listenToLogTestToggleResultsType(t,e){this.form.controls.onlyWrongAnswers.valueChanges.pipe(Object(p.b)(this)).subscribe((n=>{const o=new l.a({event_type:r.a.TEST.TOGGLE_RESULTS_TYPE,event_params:{onlyWrongAnswers:n.toString(),lesson_token:t,user_test_attempt_id:e}});this.logBus.log(new c.a({immediateDispatch:!0,message:o}))}))}};return t.\u0275fac=function(e){return new(e||t)(E.Ac(Mt.a),E.Ac(Tt.Eb),E.Ac(a.a))},t.\u0275cmp=E.uc({type:t,selectors:[["app-test-tutorial-results"]],inputs:{results:"results",testId:"testId",lastAttemptId:"lastAttemptId"},features:[E.lc],decls:2,vars:3,consts:[[4,"ngIf"],[1,"test-result__header"],["data-i18n","testTutorial.myAnswers",1,"test-result__title"],[3,"formGroup",4,"ngVar"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"formGroup"],["data-i18n","testTutorial.showWrong","data-e2e","test-tutorial-results__show-hide-trigger",3,"formControl","labelPosition","toggleLabel"],[1,"test-result__card-container"],[1,"test-result__card","result-card"],["data-e2e","test-tutorial-results__title",1,"result-card__title"],["class","result-card__comment",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","test-result__help help",4,"ngIf"],[1,"result-card__comment"],["data-i18n","testTutorial.commentLabel",1,"result-card__comment-title"],["data-e2e","test-tutorial-results__comment",1,"result-card__comment-text",3,"content"],["class","result-card__image-wrapper",4,"ngFor","ngForOf","ngForTrackBy"],[1,"result-card__image-wrapper"],["data-e2e","test-tutorial-results__image","loading","lazy",1,"result-card__image",3,"src","alt"],["name","zoom_next","data-e2e","test-tutorial-results__open-trigger",1,"result-card__icon",3,"click"],[3,"answer","status"],[3,"answer","type"],[3,"answer","type","status"],[1,"test-result__help","help"],["data-i18n","testTutorial.hint",1,"help__title"],["data-e2e","test-tutorial-results__help",1,"help__text",3,"content"]],template:function(t,e){1&t&&(E.Ed(0,_e,9,10,"div",0),E.Xc(1,"async")),2&t&&E.ed("ngIf",E.Yc(1,1,e.filteredAnswers$))},directives:[I.u,S.a,I.t,It.w,It.n,St.b,It.v,It.k,I.y,I.z,Ft.a,F.a,Bt,ne,oe],pipes:[I.b,G.g,Rt.a],styles:["[_nghost-%COMP%]{display:block;margin-top:64px}@media (min-width:1024px){[_nghost-%COMP%]{margin-top:80px}}[_nghost-%COMP%]   app-test-tutorial-results-select-answer[_ngcontent-%COMP%]{margin-top:12px}@media (min-width:768px){[_nghost-%COMP%]   app-test-tutorial-results-select-answer[_ngcontent-%COMP%]{margin-top:20px}}[_nghost-%COMP%]   .test-result__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:28px}@media (max-width:767.9px){[_nghost-%COMP%]   .test-result__header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}@media (min-width:768px){[_nghost-%COMP%]   .test-result__header[_ngcontent-%COMP%]{margin-bottom:40px}}@media (min-width:1024px) and (max-width:1279.9px){[_nghost-%COMP%]   .test-result__header[_ngcontent-%COMP%]{margin-bottom:32px}}[_nghost-%COMP%]   .test-result__title[_ngcontent-%COMP%]{font-size:20px;line-height:26px;font-weight:600;margin-bottom:0}@media (max-width:767.9px){[_nghost-%COMP%]   .test-result__title[_ngcontent-%COMP%]{margin-bottom:24px}}@media (min-width:1024px){[_nghost-%COMP%]   .test-result__title[_ngcontent-%COMP%]{font-size:24px;line-height:32px}}@media (min-width:1600px){[_nghost-%COMP%]   .test-result__title[_ngcontent-%COMP%]{font-size:28px;line-height:36px}}[_nghost-%COMP%]   .test-result__card[_ngcontent-%COMP%], [_nghost-%COMP%]   .test-result__help[_ngcontent-%COMP%]{padding:32px 20px;border-radius:20px;background-color:var(--ui-sb-color-bg-secondary)}@media (min-width:768px){[_nghost-%COMP%]   .test-result__card[_ngcontent-%COMP%], [_nghost-%COMP%]   .test-result__help[_ngcontent-%COMP%]{padding:48px;border-radius:10px}}[_nghost-%COMP%]   .test-result__card-container[_ngcontent-%COMP%]{margin-bottom:40px}[_nghost-%COMP%]   .test-result__card-container[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]   .test-result__help[_ngcontent-%COMP%]{margin-top:8px}[_nghost-%COMP%]   .result-card__title[_ngcontent-%COMP%]{font-size:16px;line-height:20px;font-weight:600;margin-bottom:24px;color:var(--ui-sb-color-text-main)}@media (min-width:768px){[_nghost-%COMP%]   .result-card__title[_ngcontent-%COMP%]{font-size:18px;line-height:24px}}[_nghost-%COMP%]   .result-card__icon[_ngcontent-%COMP%]{width:24px;height:24px;position:absolute;bottom:16px;left:16px;color:var(--ui-sb-color-icon-secondary);cursor:pointer;transition:.2s ease-in-out}@media (max-width:767.9px){[_nghost-%COMP%]   .result-card__icon[_ngcontent-%COMP%]{position:relative;bottom:0;left:0;margin-top:12px}}[_nghost-%COMP%]   .result-card__icon[_ngcontent-%COMP%]:hover{color:var(--ui-sb-color-icon-main)}[_nghost-%COMP%]   .result-card__image[_ngcontent-%COMP%]{display:block;width:100%}@media (min-width:768px){[_nghost-%COMP%]   .result-card__image[_ngcontent-%COMP%]{width:auto;height:160px}}[_nghost-%COMP%]   .result-card__image-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative;margin-top:24px;padding:20px;border:1px solid var(--ui-sb-color-stroke-main);border-radius:10px;background-color:var(--ui-sb-color-element-always-white)}@media (max-width:767.9px){[_nghost-%COMP%]   .result-card__image-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:flex-start}}[_nghost-%COMP%]   .result-card__comment[_ngcontent-%COMP%]{display:block;overflow:hidden;padding:12px;border:1px solid var(--ui-sb-color-stroke-main);border-radius:10px}[_nghost-%COMP%]   .result-card__comment[_ngcontent-%COMP%]     pre{overflow-x:auto}[_nghost-%COMP%]   .result-card__comment-text[_ngcontent-%COMP%], [_nghost-%COMP%]   .result-card__comment-title[_ngcontent-%COMP%]{font-size:12px;line-height:18px}[_nghost-%COMP%]   .result-card__comment-title[_ngcontent-%COMP%]{margin-bottom:4px;color:var(--ui-sb-color-text-secondary)}[_nghost-%COMP%]   .result-card__comment-text[_ngcontent-%COMP%]{color:var(--ui-sb-color-text-main)}[_nghost-%COMP%]   .help__title[_ngcontent-%COMP%]{font-size:16px;line-height:20px;font-weight:600;margin-bottom:24px}@media (min-width:768px){[_nghost-%COMP%]   .help__title[_ngcontent-%COMP%]{font-size:18px;line-height:24px}}"],changeDetection:0}),t=Object(o.b)([Object(p.a)()],t),t})();function me(t,e){if(1&t){const t=E.Hc();E.Ec(0),E.Gc(1,"app-test-tutorial-inner-card-director",3),E.Sc("beginTestButtonClick",(function(){E.ud(t);const e=E.Wc().ngVar,n=E.Wc(2).ngVar;return E.Wc(4).onBeginTestButtonClick(e,n)}))("continueTestButtonClick",(function(){E.ud(t);const e=E.Wc(3).ngVar,n=E.Wc(4);return n.onContinueTestButtonClick(n.test,e)})),E.Fc(),E.Dc()}if(2&t){const t=E.Wc(2).ngVar,e=E.Wc().ngVar,n=E.Wc().ngVar,o=E.Wc(2).ngIf,s=E.Wc();E.nc(1),E.ed("test",s.test)("userTest",o)("attemptResult",n)("lastAttempt",e)("bestAttempt",t)("canBeginTest",s.canBeginTest(o))("canContinueTest",s.canContinueTest(o,e))}}function be(t,e){if(1&t&&(E.Ec(0),E.Ed(1,me,2,7,"ng-container",0),E.Dc()),2&t){const t=E.Wc().ngVar;E.nc(1),E.ed("ngIf",void 0!==t)}}function Ce(t,e){if(1&t&&(E.Ec(0),E.Ed(1,be,2,1,"ng-container",1),E.Xc(2,"async"),E.Dc()),2&t){const t=E.Wc(5);E.nc(1),E.ed("ngVar",E.Yc(2,1,t.tutorialService.topicItem$))}}function fe(t,e){if(1&t&&(E.Ec(0),E.Ed(1,Ce,3,3,"ng-container",1),E.Dc()),2&t){const t=E.Wc(3).ngIf,e=E.Wc();E.nc(1),E.ed("ngVar",e.getBestAttempt(t))}}function Oe(t,e){if(1&t&&(E.Ec(0),E.Ed(1,fe,2,1,"ng-container",1),E.Dc()),2&t){const t=E.Wc(2).ngIf,e=E.Wc();E.nc(1),E.ed("ngVar",e.getLastAttempt(t))}}function ve(t,e){if(1&t){const t=E.Hc();E.Gc(0,"app-tutorial-evaluation",4),E.Sc("selectionAnswersChange",(function(e){return E.ud(t),E.Wc(3).onEvaluationAnswerChange(e)})),E.Xc(1,"async"),E.Fc()}if(2&t){const t=E.Wc(3);E.ed("controller",E.Yc(1,2,t.evaluationController$))("steps",t.evaluationSteps)}}function xe(t,e){if(1&t&&(E.Ec(0),E.Bc(1,"app-test-tutorial-results",5),E.Dc()),2&t){const t=e.ngIf,n=E.Wc(3);E.nc(1),E.ed("lastAttemptId",n.lastAttemptId)("testId",n.testTutorialId)("results",t)}}function we(t,e){if(1&t&&(E.Ec(0),E.Ed(1,Oe,2,1,"ng-container",1),E.Xc(2,"async"),E.Ed(3,ve,2,4,"app-tutorial-evaluation",2),E.Xc(4,"async"),E.Ed(5,xe,2,3,"ng-container",0),E.Xc(6,"async"),E.Dc()),2&t){const t=E.Wc(2);E.nc(1),E.ed("ngVar",E.Yc(2,3,t.attemptResult$)),E.nc(2),E.ed("ngIf",E.Yc(4,5,t.canShowEvaluations$)),E.nc(2),E.ed("ngIf",E.Yc(6,7,t.attemptResult$))}}function Te(t,e){if(1&t&&(E.Ec(0),E.Ed(1,we,7,9,"ng-container",0),E.Xc(2,"async"),E.Dc()),2&t){const t=E.Wc();E.nc(1),E.ed("ngIf",E.Yc(2,1,t.attemptResultLoaded$))}}let Pe=(()=>{let t=class{constructor(t,e,n,o,s,a,c,r){this.tutorialService=t,this.route=e,this.router=n,this.studentsTestsService=o,this.surveysLessonQualityService=s,this.tutorialEvaluationsService=a,this.logBus=c,this.titleService=r,this.evaluationSteps=x.b,this.test=this.route.snapshot.data.context,this.testTutorialId=i.a.reduceSnapshot(this.route.snapshot).token,this.listenToLogBackButtonNavigate(this.testTutorialId),this.initEvaluation(this.testTutorialId),this.titleService.setTitle(this.test.name)}ngOnInit(){this.userTest$=this.studentsTestsService.v3StudentsTestsUserStatusRead({lessonId:this.testTutorialId}).pipe(Object(h.a)(1)),this.attemptResult$=this.userTest$.pipe(Object(m.a)((t=>{var e,n;return(null===(e=t.attempts)||void 0===e?void 0:e.length)?this.studentsTestsService.v3StudentsTestsAttemptsResultRead({id:null===(n=P(t))||void 0===n?void 0:n.id}).pipe(Object(b.a)((()=>Object(g.a)(null)))):Object(g.a)(null)})),Object(h.a)(1)),this.attemptResultLoaded$=this.attemptResult$.pipe(Object(C.a)((()=>!0)),Object(h.a)(1)),this.userTest$.pipe(Object(p.b)(this)).subscribe((t=>{var e;this.lastAttemptId=null===(e=this.getLastAttempt(t))||void 0===e?void 0:e.id}))}onEvaluationAnswerChange(t){this.tutorialEvaluationsService.submitAnswers(t)}canBeginTest(t){return null==t?void 0:t.can_attempt}canContinueTest(t,e){return!(null==t?void 0:t.test_was_updated_since_last_attempt)&&(null==e?void 0:e.status)===s.Hc.StatusEnum.START}getLastAttempt(t){return P(t)}getBestAttempt(t){if(t)return function(t){const e=T(t),n=null==e?void 0:e.filter((t=>t.status===s.Hc.StatusEnum.DONE)),o=null==e?void 0:e.filter((t=>t.status===s.Hc.StatusEnum.FAIL)),i=null==n?void 0:n.sort(((t,e)=>e.correct_count-t.correct_count)),a=null==o?void 0:o.sort(((t,e)=>e.correct_count-t.correct_count));return(null==i?void 0:i[0])||(null==a?void 0:a[0])}(t)||P(t)||null}onBeginTestButtonClick(t,e){this.studentsTestsService.v3StudentsTestsStartCreate({lessonId:this.testTutorialId}).pipe(Object(u.a)(),Object(p.b)(this)).subscribe((()=>{this.router.navigate([y.a.TESTING],{relativeTo:this.route,state:{test:this.test}}),e?this.logReplayTest(this.testTutorialId,null==t?void 0:t.user_status):this.logBeginTest(this.testTutorialId)}))}onContinueTestButtonClick(t,e){this.router.navigate([y.a.TESTING],{relativeTo:this.route,state:{test:this.test,currentQuestionIdx:M(t.questions,e)}}),this.logContinueTest(this.testTutorialId)}listenToLogBackButtonNavigate(t){this.tutorialService.backButtonNavigate$.pipe(Object(p.b)(this)).subscribe((()=>{const e=new l.a({event_type:r.a.TEST.NAVIGATE_TO_COURSE,event_params:{lesson_token:t}});this.logBus.log(new c.a({immediateDispatch:!0,message:e}))}))}logBeginTest(t){const e=new l.a({event_type:r.a.TEST.BEGIN,event_params:{lesson_token:t}});this.logBus.log(new c.a({immediateDispatch:!0,message:e}))}logReplayTest(t,e){const n=new l.a({event_type:r.a.TEST.REPLAY,event_params:{userTestStatus:e,lesson_token:t}});this.logBus.log(new c.a({immediateDispatch:!0,message:n}))}logContinueTest(t){const e=new l.a({event_type:r.a.TEST.CONTINUE,event_params:{lesson_token:t,user_test_attempt_id:this.lastAttemptId}});this.logBus.log(new c.a({immediateDispatch:!0,message:e}))}initEvaluation(t){this.tutorialEvaluationsService.init(t).pipe(Object(p.b)(this)).subscribe(),this.tutorialEvaluationsService.setSurveyTreeSource(this.surveysLessonQualityService.v3SurveysLessonQualityTestsLatestRead()),this.evaluationController$=this.tutorialEvaluationsService.getController(),this.canShowEvaluations$=Object(_.a)([this.tutorialEvaluationsService.hasEvaluations(),this.tutorialService.topicItem$]).pipe(Object(C.a)((([t,e])=>(e.user_status===s.wc.UserStatusEnum.DONE||e.user_status===s.wc.UserStatusEnum.FAIL)&&!t)),Object(f.a)(1))}};return t.\u0275fac=function(e){return new(e||t)(E.Ac(v.a),E.Ac(k.a),E.Ac(k.f),E.Ac(s.Jf),E.Ac(s.Sf),E.Ac(O.a),E.Ac(a.a),E.Ac(d.a))},t.\u0275cmp=E.uc({type:t,selectors:[["app-test-tutorial-component"]],features:[E.mc([O.a])],decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngVar"],["class","lesson-evaluations",3,"controller","steps","selectionAnswersChange",4,"ngIf"],[3,"test","userTest","attemptResult","lastAttempt","bestAttempt","canBeginTest","canContinueTest","beginTestButtonClick","continueTestButtonClick"],[1,"lesson-evaluations",3,"controller","steps","selectionAnswersChange"],[3,"lastAttemptId","testId","results"]],template:function(t,e){1&t&&(E.Ed(0,Te,3,3,"ng-container",0),E.Xc(1,"async")),2&t&&E.ed("ngIf",E.Yc(1,1,e.userTest$))},directives:[I.u,S.a,xt,wt.a,he],pipes:[I.b],styles:["[_nghost-%COMP%]{display:block}.lesson-evaluations[_ngcontent-%COMP%]{margin:64px 0}"],changeDetection:0}),t=Object(o.b)([Object(p.a)()],t),t})()},hSmh:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return u}));var o=n("wHcO");class s extends o.a{constructor(t){super(),this.staffLessonsService=t}getKey(t){return t.value}displayWith(t){return t.hint}getData(){return this.staffLessonsService.v3StaffLessonsLongreadsContentBlocksContentBlockStatusesLongreadContentBlockStatusesInitial()}}class i extends o.a{constructor(t,e){super(),this.staffLessonsService=t,this.blockId=e}getKey(t){return t.name}displayWith(t){return t.hint}getData(){return this.staffLessonsService.v3StaffLessonsLongreadsContentBlocksAllowedStatuses({blockId:this.blockId})}}var a,c=n("ROBh");!function(t){t.ValueEnum={Text:"text",Video:"video",Test:"test"}}(a||(a={}));class r extends o.a{getKey(t){return t.value}displayWith(t){return t.hint}getData(){return Object(c.a)([{value:a.ValueEnum.Text,hint:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435/\u0422\u0435\u043a\u0441\u0442"},{value:a.ValueEnum.Video,hint:"\u0412\u0438\u0434\u0435\u043e"},{value:a.ValueEnum.Test,hint:"\u0422\u0435\u0441\u0442"}])}}class l extends o.a{constructor(t){super(),this.staffLessonsService=t}getKey(t){return t.value}displayWith(t){return t.hint}getData(){return this.staffLessonsService.v3StaffLessonsLongreadsLongreadStatusesInitialLongreadStatuses()}}class u extends o.a{constructor(t,e){super(),this.staffLessonsService=t,this.longreadId=e}getKey(t){return t.name}displayWith(t){return t.hint}getData(){return this.staffLessonsService.v3StaffLessonsLongreadsAllowedStatuses({id:this.longreadId})}}},hfQm:function(t,e,n){"use strict";n.d(e,"a",(function(){return at}));var o=n("D57K"),s=n("ABPI"),i=n("RmUC"),a=n("bxfK"),c=n("cdws"),r=n("cXTK"),l=n("2kYt"),u=n("KTx3"),d=n("YtkY"),p=n("EM62");let g=(()=>{class t{constructor(t){this.document=t}isVisible(){return Object(u.a)(this.document,"visibilitychange").pipe(Object(d.a)((()=>!this.document.hidden)))}}return t.\u0275fac=function(e){return new(e||t)(p.Oc(l.e))},t.\u0275prov=p.wc({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=n("5h/E"),h=n("xzqx"),m=n("w0kG"),b=n("J+dc"),C=n("TLy2"),f=n("NA6a"),O=n("ZJrq"),v=n("Jzyt"),x=n("jR34"),w=n("3vM3");let T=(()=>{class t{constructor(){this.onClose=new p.t,this.scrollElementOffset=new p.t,this.statLogEvents=r.a.EventTypeEnum,this.scrollElementOffset=new p.t}ngOnInit(){if(this.activeLessonId){const[t]=O.a.findItemIndexes(this.course,this.activeLessonId);this.currentTopicId=this.course.topics[t].id}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p.uc({type:t,selectors:[["app-sb-course-content"]],inputs:{course:"course",activeLessonId:"activeLessonId",lessonURLCallback:"lessonURLCallback",lessonClickCallback:"lessonClickCallback"},outputs:{onClose:"onClose",scrollElementOffset:"scrollElementOffset"},features:[p.mc([{provide:v.d,useValue:"tutorial"}])],decls:8,vars:10,consts:[[1,"course-content"],[1,"head-content"],["data-i18n","tutorial.courseContent.titleContent",1,"wrap"],[1,"ui-sb-button-circle--default","ui-sb-button--view-circle-1","ui-sb-button-circle--medium",3,"click"],["name","close_v_2",1,"small","close"],["gridClass","ui-sb-col-sm-6 ui-sb-col-xs-2","scrollMode","topic",3,"topics","courseId","activeTopicID","highlightActiveTutorial","activeTutorialID","lessonURLCallback","lessonClickCallback","scrollElementOffset"]],template:function(t,e){1&t&&(p.Gc(0,"div",0),p.Gc(1,"div",1),p.Gc(2,"div",2),p.Gd(3),p.Xc(4,"transloco"),p.Fc(),p.Gc(5,"button",3),p.Sc("click",(function(t){return e.onClose.emit(t)})),p.Bc(6,"svg-icon",4),p.Fc(),p.Fc(),p.Gc(7,"app-topics-list",5),p.Sc("scrollElementOffset",(function(t){return e.scrollElementOffset.emit(t)})),p.Fc(),p.Fc()),2&t&&(p.nc(3),p.Id(" ",p.Yc(4,8,"tutorial.courseContent.titleContent")," "),p.nc(4),p.ed("topics",null==e.course?null:e.course.topics)("courseId",null==e.course?null:e.course.id)("activeTopicID",e.currentTopicId)("highlightActiveTutorial",!0)("activeTutorialID",e.activeLessonId)("lessonURLCallback",e.lessonURLCallback)("lessonClickCallback",e.lessonClickCallback))},directives:[x.a,w.a],pipes:[v.g],styles:[".course-content[_ngcontent-%COMP%]{padding:0 8px}@media screen and (max-width:767.9px) and (device-aspect-ratio:2/3){.course-content[_ngcontent-%COMP%]{padding-bottom:76px}}@media screen and (max-width:767.9px) and (device-aspect-ratio:40/71){.course-content[_ngcontent-%COMP%]{padding-bottom:76px}}@media screen and (max-width:767.9px) and (device-aspect-ratio:375/667){.course-content[_ngcontent-%COMP%]{padding-bottom:76px}}@media screen and (max-width:767.9px) and (device-aspect-ratio:9/16){.course-content[_ngcontent-%COMP%]{padding-bottom:76px}}@media screen and (max-width:767.9px) and (device-aspect-ratio:828/1792){.course-content[_ngcontent-%COMP%]{padding-bottom:112px}}@media screen and (max-width:767.9px) and (device-aspect-ratio:1242/2688){.course-content[_ngcontent-%COMP%]{padding-bottom:112px}}@media screen and (max-width:767.9px) and (device-aspect-ratio:1125/2436){.course-content[_ngcontent-%COMP%]{padding-bottom:112px}}@media screen and (max-width:767.9px) and (device-aspect-ratio:1170/2532){.course-content[_ngcontent-%COMP%]{padding-bottom:112px}}@media screen and (max-width:767.9px) and (device-aspect-ratio:1080/2340){.course-content[_ngcontent-%COMP%]{padding-bottom:112px}}@media screen and (max-width:767.9px) and (device-aspect-ratio:1284/2778){.course-content[_ngcontent-%COMP%]{padding-bottom:112px}}@media (min-width:768px){.course-content[_ngcontent-%COMP%]{padding:0 28px}}.course-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{cursor:pointer}.course-content[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:20px 12px;border-bottom:1px solid var(--skb-color-background-darker);font-size:14px;line-height:20px;font-weight:500}.course-content[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{color:inherit}.course-content[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.course-content[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{margin-right:16px;color:var(--skb-color-main-text)}.course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{margin:0;border-radius:0;box-shadow:none}.course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]    .mat-expansion-panel-body{padding:0;background-color:rgba(var(--skb-color-background-darker-rgb),.5)}.course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:24px 16px;border-bottom:1px solid var(--skb-color-background-darker)}.course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{color:var(--skb-color-secondary-text)}.course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%], .course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]:hover   mat-panel-title[_ngcontent-%COMP%]{color:var(--skb-color-primary)}.course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{color:var(--skb-color-secondary-text)}.course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]   svg-icon.open[_ngcontent-%COMP%]{color:var(--skb-color-primary)}.course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .has-progress[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .has-progress[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{color:var(--skb-color-main-text)}.course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]    .mat-expansion-indicator{display:none}.course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:8px;color:var(--skb-color-secondary-text);font-size:16px;line-height:24px;font-weight:500}.course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;color:var(--skb-color-main-text)}.course-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:-webkit-box;overflow:hidden;margin-bottom:8px;-webkit-line-clamp:2;-webkit-box-orient:vertical}.course-content[_ngcontent-%COMP%]   .topic-information[_ngcontent-%COMP%]{display:flex;flex-direction:row;color:var(--skb-color-secondary-text);font-size:12px;line-height:18px}.course-content[_ngcontent-%COMP%]   .topic-information[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-right:16px}.course-content[_ngcontent-%COMP%]   app-topics-list[_ngcontent-%COMP%]     app-sb-accordion, .course-content[_ngcontent-%COMP%]   app-topics-list[_ngcontent-%COMP%]     app-sb-accordion-panel{overflow:hidden}.course-content[_ngcontent-%COMP%]   app-topics-list[_ngcontent-%COMP%]     app-sb-accordion-panel-header, .course-content[_ngcontent-%COMP%]   app-topics-list[_ngcontent-%COMP%]     app-topic-items{padding-right:12px;padding-left:12px}"],changeDetection:0}),t})(),P=(()=>{class t{constructor(t,e,n,o){this.data=t,this.sidenavRef=e,this.hostElRef=n,this.logBus=o,this.decorateLessonClickCallback()}close(){this.sidenavRef.close(),this.logBus.log(new a.a({immediateDispatch:!0,message:new c.a({event_type:r.a.EventTypeEnum.lessons_menu_hide_done,event_params:{switchTo:(!0).toString(),lesson_token:this.data.activeLessonId}})}))}onScrollElementOffset(t){this.hostElRef.nativeElement.scrollBy(0,t)}decorateLessonClickCallback(){const t=this.data.lessonClickCallback;this.data.lessonClickCallback=e=>{t&&t(e),this.close()}}}return t.\u0275fac=function(e){return new(e||t)(p.Ac(_.y),p.Ac(_.Ub),p.Ac(p.q),p.Ac(i.a))},t.\u0275cmp=p.uc({type:t,selectors:[["app-course-content-sidenav-host"]],decls:1,vars:4,consts:[[3,"course","activeLessonId","lessonURLCallback","lessonClickCallback","scrollElementOffset","onClose"]],template:function(t,e){1&t&&(p.Gc(0,"app-sb-course-content",0),p.Sc("scrollElementOffset",(function(t){return e.onScrollElementOffset(t)}))("onClose",(function(){return e.close()})),p.Fc()),2&t&&p.ed("course",e.data.courseTree)("activeLessonId",e.data.activeLessonId)("lessonURLCallback",e.data.getLessonURL)("lessonClickCallback",e.data.lessonClickCallback)},directives:[T],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block;overflow-y:auto}@media (min-width:768px){[_nghost-%COMP%]{width:416px}}[_nghost-%COMP%]     .course-content .head-content{padding:24px 0!important;border-bottom:0!important}@media (min-width:768px){[_nghost-%COMP%]     .course-content .head-content{padding:40px 0 24px!important}}[_nghost-%COMP%]     .course-content .head-content .wrap{font-size:20px;line-height:26px}@media (min-width:768px){[_nghost-%COMP%]     .course-content .head-content .wrap{font-size:18px;line-height:24px}}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-topic-on-air{flex-direction:column}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-topic-on-air .topic__image-wrapper{margin-right:0;margin-bottom:20px}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-topic-on-air .topic__title{margin-bottom:8px!important}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-topic-on-air .topic__text{margin-bottom:0}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-topic-on-air .topic__text, [_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-topic-on-air .topic__title{text-align:center}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-sb-accordion-panel-header app-sb-accordion-panel-status{margin-right:16px}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-sb-accordion-panel-header app-sb-accordion-panel-status .status__dev{align-items:flex-start!important}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-sb-accordion-panel-header .status__icon-action, [_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-sb-accordion-panel-header .status__icon-dev{width:16px!important;height:16px!important;margin-top:2px}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-sb-accordion-panel-header button.accordion-panel-header__button{margin-top:2px!important}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-sb-accordion-panel-header .status__text-dev{display:none}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-sb-accordion-panel-header .accordion-title__num, [_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel app-sb-accordion-panel-header .accordion-title__text{font-size:16px;line-height:20px}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel .preview__link .preview__subtitle:empty{display:none}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel .preview__link .preview__title{font-size:12px;line-height:16px;margin-top:12px}@media (min-width:768px){[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel .preview__link .preview__container{--preview-width:calc((416px - 100px) / 2);height:calc(var(--preview-width) * 9 / 16)!important}}[_nghost-%COMP%]     app-sb-accordion app-sb-accordion-panel .preview__link .preview__image-badge{bottom:8px;left:8px}"],changeDetection:0}),t})();var M=n("J6YB"),y=n("6VxW"),E=n("qV/k"),k=n("lDeo"),I=n("RFPc"),S=n("XbPE"),F=n("p4wv"),G=n("sEIs"),A=n("T7HF"),B=n("Tm2R"),j=n("gGzw"),L=n("7hoA"),R=n("17mZ"),q=n("6BpR"),W=n("Y2X+"),N=n("LllD");const D=function(t){return{switchTo:!1,lesson_token:t}};function $(t,e){if(1&t){const t=p.Hc();p.Gc(0,"a",13),p.Sc("click",(function(n){p.ud(t);const o=e.ngIf;return p.Wc().openSidenav(o,n)})),p.Gc(1,"span",14),p.Bc(2,"svg-icon",15),p.Fc(),p.Fc()}if(2&t){const t=e.ngIf,n=p.Wc();p.ed("appStatLogOnClick",n.logMessages.lessons_menu_hide_done)("eventParams",p.jd(2,D,t.id))}}const U=function(t){return["../",t]},X=function(t){return{lesson_token:t}};function Y(t,e){if(1&t&&(p.Gc(0,"a",19),p.Gc(1,"span",14),p.Bc(2,"svg-icon",20),p.Fc(),p.Fc()),2&t){const t=e.ngIf,n=p.Wc(3);p.ed("routerLink",p.jd(3,U,t.prev.id))("appStatLogOnClick",n.logMessages.selectPrevLesson)("eventParams",p.jd(5,X,t.current.id))}}const V=function(t,e){return{prev:t,current:e}};function H(t,e){if(1&t&&(p.Gc(0,"div",17),p.Ed(1,Y,3,7,"a",18),p.Xc(2,"async"),p.Xc(3,"async"),p.Fc()),2&t){const t=e.ngIf,n=p.Wc(2);p.sc("not-allowed",!t.access_token),p.ed("matTooltip",t.reason),p.nc(1),p.ed("ngIf",p.kd(8,V,p.Yc(2,4,n.tutorialService.prevItem$),p.Yc(3,6,n.tutorialService.topicItem$)))}}function z(t,e){if(1&t&&(p.Gc(0,"a",22),p.Gc(1,"span",14),p.Bc(2,"svg-icon",23),p.Fc(),p.Fc()),2&t){const t=e.ngIf,n=p.Wc(3);p.ed("routerLink",p.jd(3,U,t.next.id))("appStatLogOnClick",n.logMessages.selectNextLesson)("eventParams",p.jd(5,X,t.current.id))}}const Q=function(t,e){return{next:t,current:e}};function K(t,e){if(1&t&&(p.Gc(0,"div",17),p.Ed(1,z,3,7,"a",21),p.Xc(2,"async"),p.Xc(3,"async"),p.Fc()),2&t){const t=e.ngIf,n=p.Wc(2);p.sc("not-allowed",!t.access_token),p.ed("matTooltip",t.reason),p.nc(1),p.ed("ngIf",p.kd(8,Q,p.Yc(2,4,n.tutorialService.nextItem$),p.Yc(3,6,n.tutorialService.topicItem$)))}}function J(t,e){if(1&t&&(p.Ec(0),p.Ed(1,H,4,11,"div",16),p.Xc(2,"async"),p.Ed(3,K,4,11,"div",16),p.Xc(4,"async"),p.Dc()),2&t){const t=p.Wc();p.nc(1),p.ed("ngIf",p.Yc(2,2,t.lessonCheckService.prevItemPermission$)),p.nc(2),p.ed("ngIf",p.Yc(4,4,t.lessonCheckService.nextItemPermission$))}}const Z=function(t,e){return[t,e]};function tt(t,e){if(1&t&&(p.Gc(0,"a",26),p.Xc(1,"async"),p.Xc(2,"transloco"),p.Bc(3,"svg-icon",27),p.Fc()),2&t){const t=e.ngIf,n=p.Wc(2);p.fd("uiSbTooltip",p.Yc(2,7,"tutorial.tutorial.previousLesson")),p.ed("ngClass",p.kd(9,Z,n.isNavFixed?"controls__nav-fixed":"controls__nav-left",p.Yc(1,5,n.lessonCheckService.nextItemPermission$)?"":"disabled"))("routerLink",p.jd(12,U,(null==t.prev?null:t.prev.id)||""))("appStatLogOnClick",n.logMessages.selectPrevLesson)("eventParams",p.jd(14,X,t.current.id))}}function et(t,e){if(1&t&&(p.Gc(0,"div",24),p.Ed(1,tt,4,16,"a",25),p.Xc(2,"async"),p.Xc(3,"async"),p.Fc()),2&t){const t=p.Wc();p.nc(1),p.ed("ngIf",p.kd(5,V,p.Yc(2,1,t.tutorialService.prevItem$),p.Yc(3,3,t.tutorialService.topicItem$)))}}function nt(t,e){if(1&t&&(p.Gc(0,"a",30),p.Xc(1,"async"),p.Xc(2,"transloco"),p.Bc(3,"svg-icon",31),p.Fc()),2&t){const t=e.ngIf,n=p.Wc(2);p.fd("uiSbTooltip",p.Yc(2,7,"tutorial.tutorial.nextLesson")),p.ed("ngClass",p.kd(9,Z,n.isNavFixed?"controls__nav-fixed":"controls__nav-right",p.Yc(1,5,n.lessonCheckService.nextItemPermission$)?"":"disabled"))("routerLink",p.jd(12,U,(null==t.next?null:t.next.id)||""))("appStatLogOnClick",n.logMessages.selectNextLesson)("eventParams",p.jd(14,X,t.current.id))}}function ot(t,e){if(1&t&&(p.Gc(0,"div",28),p.Ed(1,nt,4,16,"a",29),p.Xc(2,"async"),p.Xc(3,"async"),p.Fc()),2&t){const t=p.Wc();p.nc(1),p.ed("ngIf",p.kd(5,Q,p.Yc(2,1,t.tutorialService.nextItem$),p.Yc(3,3,t.tutorialService.topicItem$)))}}const st=function(t){return{"test__column-content":t}};var it=function(t){return t.VIDEO_LESSON="video_lesson",t.HOMEWORK="homework",t.TEST="test",t}({});let at=(()=>{let t=class{constructor(t,e,n,o,s,i,a,c){this.tutorialService=t,this.lessonCheckService=e,this.sidenav=n,this.router=o,this.route=s,this.logBus=i,this.pageVisibilityService=a,this.lastOpenedLesson=c,this.logMessages=r.a.EventTypeEnum,this.inTesting=!1,this.tutorialService.init(),this.lessonCheckService.init(),this.backButtonLink=[".."],this.isNavFixed=!1}ngOnInit(){this.lastOpenedLesson.set(s.a.reduceSnapshot(this.route.snapshot).token),this.pageVisibilityService.isVisible().pipe(Object(m.a)(this.tutorialService.topicItem$),Object(h.b)(this)).subscribe((([t,{id:e,lesson_type:n}])=>{this.logBus.log(new a.a({immediateDispatch:!0,message:new c.a({event_type:r.a.EventTypeEnum.change_screen_focus,event_params:{page_type:"videolesson"===n?it.VIDEO_LESSON:n,lesson_token:e,focus:t.toString()}})}))}))}openSidenav(t,e){e.preventDefault(),this.tutorialService.tree$.pipe(Object(b.a)(1),Object(C.a)((e=>this.sidenav.open({content:P,hasBackdrop:!0,panelClass:"ui-sb-sidenav-container__panel--without-scroll",data:{courseTree:e,activeLessonId:t.id,getLessonURL:t=>this.router.url.split("/").slice(0,-2).concat([t]).join("/")}}).afterClosed().pipe(Object(b.a)(1)))),Object(h.b)(this)).subscribe()}onActivate(t){t instanceof S.a?(this.inTesting=!0,this.tutorialService.canShowNavigationLinks=!0,this.backButtonLink=[".."],this.isNavFixed=!1):t instanceof F.a?(this.tutorialService.canShowNavigationLinks=!1,this.backButtonLink=["."],this.inTesting=!0,this.isNavFixed=!1):t instanceof M.a?(this.tutorialService.canShowNavigationLinks=!0,this.backButtonLink=[".."],this.inTesting=!1,this.isNavFixed=!0):(this.tutorialService.canShowNavigationLinks=!0,this.backButtonLink=[".."],this.inTesting=!1,this.isNavFixed=!1)}};return t.\u0275fac=function(e){return new(e||t)(p.Ac(k.a),p.Ac(y.a),p.Ac(_.Vb),p.Ac(G.f),p.Ac(G.a),p.Ac(i.a),p.Ac(g),p.Ac(f.a))},t.\u0275cmp=p.uc({type:t,selectors:[["ng-component"]],features:[p.mc([k.a,E.a,y.a,I.a])],decls:23,vars:25,consts:[["appHtmlElementsStorage","","htmlElementStorageName","tutorial-subheader",1,"subheader"],[1,"subheader__subtitle","subtitle"],[1,"ui-sb-col-lg-2","ui-sb-col-sm-6","ui-sb-col-xs-2",3,"link","navigate"],["data-i18n","tutorial.tutorial.backButton"],[1,"subtitle__controls","ui-sb-col-lg-2","ui-sb-col-sm-6","ui-sb-col-xs-2"],["class","ui-sb-button-circle--default ui-sb-button--view-circle-1 ui-sb-button-circle--medium subtitle__controls__topic","href","#",3,"appStatLogOnClick","eventParams","click",4,"ngIf"],[4,"ngIf"],["data-e2e","lesson-subheader__lesson-title",1,"subtitle__head","ui-sb-col-lg-8","ui-sb-h--1"],[1,"ui-sb-grid-container","ui-sb-grid-gap"],["class","ui-sb-col-lg-1 tutorial__column-left",4,"ngIf"],[1,"ui-sb-col-lg-10",3,"ngClass"],[3,"activate"],["class","ui-sb-col-lg-1 tutorial__column-right",4,"ngIf"],["href","#",1,"ui-sb-button-circle--default","ui-sb-button--view-circle-1","ui-sb-button-circle--medium","subtitle__controls__topic",3,"appStatLogOnClick","eventParams","click"],[1,"icon"],["name","playlist_stroke_v_2"],["class","subtitle__control control--hide-desktop",3,"not-allowed","matTooltip",4,"ngIf"],[1,"subtitle__control","control--hide-desktop",3,"matTooltip"],["class","ui-sb-button-icon--default ui-sb-button-icon--40 ui-sb-button--view-icon-2","data-e2e","lesson-subheader__previous-lesson-trigger--tablet-mobile",3,"routerLink","appStatLogOnClick","eventParams",4,"ngIf"],["data-e2e","lesson-subheader__previous-lesson-trigger--tablet-mobile",1,"ui-sb-button-icon--default","ui-sb-button-icon--40","ui-sb-button--view-icon-2",3,"routerLink","appStatLogOnClick","eventParams"],["name","arrow_left_v_2"],["class","ui-sb-button-icon--default ui-sb-button-icon--40 ui-sb-button--view-icon-2","data-e2e","lesson-subheader__next-lesson-trigger--tablet-mobile",3,"routerLink","appStatLogOnClick","eventParams",4,"ngIf"],["data-e2e","lesson-subheader__next-lesson-trigger--tablet-mobile",1,"ui-sb-button-icon--default","ui-sb-button-icon--40","ui-sb-button--view-icon-2",3,"routerLink","appStatLogOnClick","eventParams"],["name","arrow_right_v_2"],[1,"ui-sb-col-lg-1","tutorial__column-left"],["class","ui-sb-button-circle--default ui-sb-button--view-circle-1 ui-sb-button-circle--medium","data-e2e","lesson-subheader__previous-lesson-trigger--desktop",3,"ngClass","routerLink","appStatLogOnClick","eventParams","uiSbTooltip",4,"ngIf"],["data-e2e","lesson-subheader__previous-lesson-trigger--desktop",1,"ui-sb-button-circle--default","ui-sb-button--view-circle-1","ui-sb-button-circle--medium",3,"ngClass","routerLink","appStatLogOnClick","eventParams","uiSbTooltip"],["name","arrow_left_v_2",1,"controls__nav-icon"],[1,"ui-sb-col-lg-1","tutorial__column-right"],["class","ui-sb-button-circle--default ui-sb-button--view-circle-1 ui-sb-button-circle--medium","data-e2e","lesson-subheader__next-lesson-trigger--desktop",3,"ngClass","routerLink","appStatLogOnClick","eventParams","uiSbTooltip",4,"ngIf"],["data-e2e","lesson-subheader__next-lesson-trigger--desktop",1,"ui-sb-button-circle--default","ui-sb-button--view-circle-1","ui-sb-button-circle--medium",3,"ngClass","routerLink","appStatLogOnClick","eventParams","uiSbTooltip"],["name","arrow_right_v_2",1,"controls__nav-icon"]],template:function(t,e){1&t&&(p.Gc(0,"app-lesson-subheader",0),p.Gc(1,"app-lesson-subheader-title",1),p.Gc(2,"app-lesson-subheader-back-button",2),p.Sc("navigate",(function(){return e.tutorialService.back()})),p.Gc(3,"app-lesson-subheader-back-button-content-desktop",3),p.Gd(4),p.Xc(5,"transloco"),p.Fc(),p.Gc(6,"app-lesson-subheader-back-button-content-mobile",3),p.Gd(7),p.Xc(8,"transloco"),p.Fc(),p.Fc(),p.Gc(9,"div",4),p.Ed(10,$,3,4,"a",5),p.Xc(11,"async"),p.Ed(12,J,5,6,"ng-container",6),p.Fc(),p.Gc(13,"h4",7),p.Gd(14),p.Xc(15,"async"),p.Xc(16,"async"),p.Xc(17,"async"),p.Fc(),p.Fc(),p.Fc(),p.Gc(18,"div",8),p.Ed(19,et,4,8,"div",9),p.Gc(20,"div",10),p.Gc(21,"router-outlet",11),p.Sc("activate",(function(t){return e.onActivate(t)})),p.Fc(),p.Fc(),p.Ed(22,ot,4,8,"div",12),p.Fc()),2&t&&(p.nc(2),p.ed("link",e.backButtonLink),p.nc(2),p.Hd(p.Yc(5,11,"tutorial.tutorial.backButton")),p.nc(3),p.Hd(p.Yc(8,13,"tutorial.tutorial.backButton")),p.nc(3),p.ed("ngIf",p.Yc(11,15,e.tutorialService.topicItem$)),p.nc(2),p.ed("ngIf",e.tutorialService.canShowNavigationLinks),p.nc(2),p.Kd(" ",p.Yc(15,17,e.tutorialService.topicOrder$),".",p.Yc(16,19,e.tutorialService.topicItem$).number," ",p.Yc(17,21,e.tutorialService.topicItem$).name," "),p.nc(5),p.ed("ngIf",e.tutorialService.canShowNavigationLinks),p.nc(1),p.ed("ngClass",p.jd(23,st,e.inTesting)),p.nc(2),p.ed("ngIf",e.tutorialService.canShowNavigationLinks))},directives:[A.a,B.a,j.a,L.a,R.a,R.b,l.u,l.r,G.k,q.a,x.a,W.b,G.i,N.a],pipes:[v.g,l.b],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]  .mat-sidenav-container{width:auto;height:100%}[_nghost-%COMP%]   .subheader[_ngcontent-%COMP%]     .title{background-color:var(--skb-color-background-darker)}[_nghost-%COMP%]   .subheader[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:24px}@media (min-width:768px){[_nghost-%COMP%]   .subheader[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:40px}}@media (min-width:1024px){[_nghost-%COMP%]   .subheader[_ngcontent-%COMP%]{margin-top:40px}}@media (min-width:768px) and (max-width:1279.9px){[_nghost-%COMP%]   .subtitle[_ngcontent-%COMP%]{width:100%}}[_nghost-%COMP%]   .subtitle__controls[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}@media (min-width:1280px){[_nghost-%COMP%]   .subtitle__controls[_ngcontent-%COMP%]{order:1}}[_nghost-%COMP%]   .subtitle__controls__topic[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{width:24px;height:24px}[_nghost-%COMP%]   .subtitle__control[_ngcontent-%COMP%]{margin-left:20px}@media (max-width:1023.9px){[_nghost-%COMP%]   .subtitle__control[_ngcontent-%COMP%]{margin-left:12px}}@media (min-width:1280px){[_nghost-%COMP%]   .subtitle[_ngcontent-%COMP%]   .control--hide-desktop[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .subtitle__head[_ngcontent-%COMP%]{align-items:center;overflow:hidden;margin-bottom:0;text-overflow:ellipsis}@media (max-width:1279.9px){[_nghost-%COMP%]   .tutorial__column-left[_ngcontent-%COMP%], [_nghost-%COMP%]   .tutorial__column-right[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .tutorial__column-right[_ngcontent-%COMP%]{grid-column:12/13;justify-self:end}[_nghost-%COMP%]   .controls__nav-icon[_ngcontent-%COMP%]{width:24px;height:24px}[_nghost-%COMP%]   .controls__nav-left[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls__nav-right[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:51%}[_nghost-%COMP%]   .controls__nav-left.disabled[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls__nav-right.disabled[_ngcontent-%COMP%]{pointer-events:none}@media (min-width:1280px){[_nghost-%COMP%]   .controls__nav-fixed[_ngcontent-%COMP%]{margin-top:252px}}@media (min-width:1600px){[_nghost-%COMP%]   .controls__nav-fixed[_ngcontent-%COMP%]{margin-top:384px}}[_nghost-%COMP%]   .controls__nav-fixed.disabled[_ngcontent-%COMP%]{pointer-events:none}@media (min-width:1280px){[_nghost-%COMP%]   .test__column-content[_ngcontent-%COMP%]{grid-column:3/11}}"],changeDetection:0}),t=Object(o.b)([Object(h.a)()],t),t})()},kAA3:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var o=n("D57K"),s=n("sEIs"),i=n("G/jq"),a=n("bxfK"),c=n("z/bm"),r=n("cdws"),l=n("J+dc"),u=n("8j5Y"),d=n("YtkY"),p=n("hfQm"),g=n("EM62"),_=n("RmUC"),h=n("QBoQ");let m=(()=>{class t{constructor(t,e){this.logBus=t,this.coursesFacade=e}canDeactivate(t,e){return this.coursesFacade.selectCourseTreeBySlug(e.params.courseSlug).pipe(Object(l.a)(1),Object(u.a)((t=>this.toLogEvent(t.id,e.params.token,c.a.LESSON.CLOSE))),Object(d.a)((()=>!0)))}canActivate(t){return this.coursesFacade.selectCourseTreeBySlug(t.params.courseSlug).pipe(Object(l.a)(1),Object(u.a)((e=>this.toLogEvent(e.id,t.params.token,c.a.LESSON.OPEN))),Object(d.a)((()=>!0)))}toLogEvent(t,e,n){this.logBus.log(new a.a({immediateDispatch:!0,message:new r.a({event_type:n,event_params:{course_token:t,lesson_token:e}})}))}}return t.\u0275fac=function(e){return new(e||t)(g.Oc(_.a),g.Oc(h.a))},t.\u0275prov=g.wc({token:t,factory:t.\u0275fac}),Object(o.b)([i.a,Object(o.c)("design:type",Function),Object(o.c)("design:paramtypes",[p.a,s.b]),Object(o.c)("design:returntype",Object)],t.prototype,"canDeactivate",null),t})()},kXIt:function(t,e,n){"use strict";function o(t){return t.answers.reduce(((t,e)=>{var n;return(null===(n=e.files)||void 0===n?void 0:n.length)?[...t,e.files[0]]:t}),[])}function s(t,e){return t.answers.reduce(((t,n,o)=>{var s;return o<e&&!(null===(s=n.files)||void 0===s?void 0:s.length)?t-1:t}),e)}n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s}))},lDeo:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var o=n("D57K"),s=n("ruzS"),i=n("oY2D"),a=n("ZJrq"),c=n("ABPI"),r=n("QBoQ"),l=n("QffU"),u=n("xzqx"),d=n("ZTXN"),p=n("HM3f"),g=n("TLy2"),_=n("YtkY"),h=n("Ohay"),m=n("w0kG"),b=n("wqq/"),C=n("EM62"),f=n("sEIs");let O=(()=>{let t=class{constructor(t,e,n,o){this.route=t,this.router=e,this.coursesFacade=n,this.permissioinCacheFacade=o,this.canShowNavigationLinks=!0,this._backButtonNavigate$=new d.a,this.backButtonNavigate$=this._backButtonNavigate$.asObservable(),this.canSetVideoPlayerFullscreenSave$=this.permissioinCacheFacade.hasPermission(s.yb.EnumValuesEnum.CAN_SET_VIDEO_PLAYER_FULLSCREEN_SAVE_CUSTOM)}init(){if(this.initialized)throw new Error("Already initialized");this.tree$=this.route.data.pipe(Object(g.a)((t=>this.coursesFacade.selectCourseTreeById(t.courseTreeSnapshot.id))),Object(u.b)(this)),this.params$=c.a.reduce(this.route),this.topicItem$=Object(p.a)([this.params$,this.tree$]).pipe(Object(_.a)((([t,e])=>a.a.findItem(e,t.token))),Object(h.a)(((t,e)=>(null==t?void 0:t.id)===(null==e?void 0:e.id)))),this.prevItem$=this.topicItem$.pipe(Object(m.a)(this.tree$),Object(_.a)((([t,e])=>a.a.getPreviousItem(e,t))),Object(b.a)(1)),this.nextItem$=this.topicItem$.pipe(Object(m.a)(this.tree$),Object(_.a)((([t,e])=>a.a.getNextItem(e,t))),Object(b.a)(1)),this.nextTopic$=this.nextItem$.pipe(Object(m.a)(this.tree$),Object(_.a)((([t,e])=>{const n=a.a.calculateTopicAndItemIndexes(e,t).topicIndex;return e.topics[n]}))),this.topicOrder$=this.params$.pipe(Object(m.a)(this.tree$),Object(_.a)((([t,e])=>a.a.findItemOrders(e,t.token)[0]))),this.initialized=!0}getPlayerAutoplayState(){var t,e,n,o;return null===(o=null===(n=null===(e=null===(t=this.router.getCurrentNavigation())||void 0===t?void 0:t.previousNavigation)||void 0===e?void 0:e.extras)||void 0===n?void 0:n.state)||void 0===o?void 0:o.playerAutoplay}getFullScreenState(){var t,e,n,o;return null===(o=null===(n=null===(e=null===(t=this.router.getCurrentNavigation())||void 0===t?void 0:t.previousNavigation)||void 0===e?void 0:e.extras)||void 0===n?void 0:n.state)||void 0===o?void 0:o.isFullscreen}navigateToTopicItem(t,e){this.router.navigate(["..",t.id],{relativeTo:this.route,state:{playerAutoplay:!0,isFullscreen:Object(l.a)(this.canSetVideoPlayerFullscreenSave$)&&e}})}back(){this._backButtonNavigate$.next()}};return t.\u0275fac=function(e){return new(e||t)(C.Oc(f.a),C.Oc(f.f),C.Oc(r.a),C.Oc(i.a))},t.\u0275prov=C.wc({token:t,factory:t.\u0275fac}),t=Object(o.b)([Object(u.a)()],t),t})()},p4wv:function(t,e,n){"use strict";n.d(e,"a",(function(){return ft}));var o=n("D57K"),s=n("ruzS"),i=n("/6GX"),a=n("ABPI"),c=n("RmUC"),r=n("bxfK"),l=n("z/bm"),u=n("cdws"),d=n("QBoQ"),p=n("xo/y"),g=n("oi1H"),_=n("yVt2"),h=n("5h/E"),m=n("xzqx"),b=n("ROBh"),C=n("J+dc"),f=n("YtkY"),O=n("4e/d"),v=n("wqq/"),x=n("TLy2"),w=n("xVbo"),T=n("8j5Y"),P=n("7WrI"),M=n("EM62"),y=n("sEIs"),E=n("Jzyt"),k=n("nIj0"),I=n("5Tod"),S=n("2kYt"),F=n("g1kL"),G=n("IrDo"),A=n("3mST"),B=n("GsfJ"),j=n("jR34"),L=n("DtU0");function R(t,e){if(1&t&&(M.Gc(0,"div",3),M.Gc(1,"span",4),M.Gd(2),M.Xc(3,"transloco"),M.Fc(),M.Bc(4,"app-skb-froala-content",5),M.Fc()),2&t){const t=M.Wc();M.nc(2),M.Id("",M.Yc(3,2,"testTutorial.commentLabel"),":"),M.nc(2),M.ed("content",null==t.question?null:t.question.description)}}function q(t,e){if(1&t){const t=M.Hc();M.Gc(0,"div",7),M.Bc(1,"img",8),M.Gc(2,"svg-icon",9),M.Sc("click",(function(){M.ud(t);const n=e.index,o=M.Wc(2);return o.openGallery(o.question.files,n)})),M.Fc(),M.Fc()}if(2&t){const t=e.$implicit;M.nc(1),M.ed("src",null==t?null:t.file,M.wd)}}function W(t,e){if(1&t&&(M.Ec(0),M.Ed(1,q,3,1,"div",6),M.Xc(2,"trackBy"),M.Dc()),2&t){const t=M.Wc();M.nc(1),M.ed("ngForOf",t.question.files)("ngForTrackBy",M.Yc(2,2,"id"))}}const N=["*"];let D=(()=>{let t=class{constructor(t,e){this.galleryService=t,this.logBus=e}ngOnInit(){}openGallery(t,e){const n=t.map((({file:t})=>t)),o=this.galleryService.openGallery(n,e);this.logOpenGallery(),this.listenToLogCloseGallery(o),this.listenToLogChangeImage(o)}logOpenGallery(){const t=new u.a({event_type:l.a.TEST.FLOW.QUESTION.OPEN_GALLERY,event_params:{lesson_token:this.lessonId}});this.logBus.log(new r.a({immediateDispatch:!0,message:t}))}listenToLogCloseGallery(t){t.afterClosed().pipe(Object(C.a)(1),Object(m.b)(this)).subscribe((()=>{const t=new u.a({event_type:l.a.TEST.FLOW.QUESTION.CLOSE_GALLERY,event_params:{lesson_token:this.lessonId}});this.logBus.log(new r.a({immediateDispatch:!0,message:t}))}))}listenToLogChangeImage(t){t.componentInstance.swiperSlideChange$.pipe(Object(A.a)(1),Object(m.b)(this)).subscribe((t=>{const e=new u.a({event_type:l.a.TEST.FLOW.QUESTION.GALLERY_CHANGE_IMAGE,event_params:{imageIndex:t.toString(10)}});this.logBus.log(new r.a({immediateDispatch:!0,message:e}))}))}};return t.\u0275fac=function(e){return new(e||t)(M.Ac(h.Eb),M.Ac(c.a))},t.\u0275cmp=M.uc({type:t,selectors:[["app-test-tutorial-flow-question"]],inputs:{question:"question",lessonId:"lessonId"},ngContentSelectors:N,decls:5,vars:3,consts:[["data-e2e","test-tutorial-question__title",1,"title"],["class","comment",4,"ngIf"],[4,"ngIf"],[1,"comment"],["data-i18n","testTutorial.commentLabel",1,"comment__title"],["data-e2e","test-tutorial-question__comment",1,"comment__text",3,"content"],["class","image-container",4,"ngFor","ngForOf","ngForTrackBy"],[1,"image-container"],["data-e2e","test-tutorial-question__image","loading","lazy","alt","",1,"image",3,"src"],["name","zoom_next","data-e2e","test-tutorial-question__open-trigger",1,"icon",3,"click"]],template:function(t,e){1&t&&(M.dd(),M.Gc(0,"div",0),M.Gd(1),M.Fc(),M.Ed(2,R,5,4,"div",1),M.Ed(3,W,3,4,"ng-container",2),M.cd(4)),2&t&&(M.nc(1),M.Hd(null==e.question?null:e.question.title),M.nc(1),M.ed("ngIf",null==e.question?null:e.question.description),M.nc(1),M.ed("ngIf",null==e.question||null==e.question.files?null:e.question.files.length))},directives:[S.u,B.a,S.t,j.a],pipes:[E.g,L.a],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;line-height:24px;margin-bottom:16px}@media (min-width:768px){[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;line-height:28px}}@media (min-width:1600px){[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px;line-height:32px}}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]{margin-bottom:16px;padding:12px;border:1px solid var(--ui-sb-color-stroke-main);border-radius:10px}[_nghost-%COMP%]   .comment__text[_ngcontent-%COMP%], [_nghost-%COMP%]   .comment__title[_ngcontent-%COMP%]{font-size:12px;line-height:18px}[_nghost-%COMP%]   .comment__title[_ngcontent-%COMP%]{margin-bottom:4px;color:var(--ui-sb-color-text-secondary)}[_nghost-%COMP%]   .comment__text[_ngcontent-%COMP%]{display:block;overflow:hidden;color:var(--ui-sb-color-text-main)}[_nghost-%COMP%]   .comment__text[_ngcontent-%COMP%]     pre{overflow-x:auto}[_nghost-%COMP%]   .comment__text[_ngcontent-%COMP%]     img{max-width:100%}[_nghost-%COMP%]   .image-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;position:relative;margin-bottom:32px;padding:20px;border:1px solid var(--ui-sb-color-stroke-main);border-radius:10px}@media (max-width:767.9px){[_nghost-%COMP%]   .image-container[_ngcontent-%COMP%]{align-items:flex-start}}[_nghost-%COMP%]   .image-container[_ngcontent-%COMP%] + .image-container[_ngcontent-%COMP%]{margin-top:8px}[_nghost-%COMP%]   .image[_ngcontent-%COMP%]{display:block;object-fit:cover;max-width:100%;height:160px}@media (max-width:767.9px){[_nghost-%COMP%]   .image[_ngcontent-%COMP%]{width:100%;height:auto}}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{width:24px;height:24px;position:relative;margin-top:12px;color:var(--ui-sb-color-icon-secondary);cursor:pointer;transition:.2s ease-in-out}@media (min-width:768px){[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;bottom:16px;left:16px}}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]:hover{color:var(--ui-sb-color-icon-main)}"],changeDetection:0}),t=Object(o.b)([Object(m.a)()],t),t})();var $,U=n("m+73"),X=n("K3eu"),Y=n("Ht+D"),V=n("kXIt"),H=n("UbP3"),z=n("DYRb"),Q=n("PRc/");function K(t,e){if(1&t){const t=M.Hc();M.Ec(0),M.Bc(1,"img",5),M.Gc(2,"svg-icon",6),M.Sc("click",(function(e){M.ud(t);const n=M.Wc().index;return M.Wc().openGallery(e,n)})),M.Fc(),M.Dc()}if(2&t){const t=M.Wc().$implicit;M.nc(1),M.ed("src",null==t?null:t.files[0],M.wd)}}function J(t,e){if(1&t&&(M.Gc(0,"ui-sb-radio-button",2),M.Gc(1,"div",3),M.Gd(2),M.Fc(),M.Ed(3,K,3,1,"ng-container",4),M.Fc()),2&t){const t=e.$implicit;M.ed("value",t.id),M.nc(2),M.Hd(null==t?null:t.label),M.nc(1),M.ed("ngIf",null==t||null==t.files?null:t.files.length)}}let Z=(()=>{let t=$=class extends Y.a{constructor(t,e,n,o,s){super(n,e),this.fb=t,this.formErrorsService=e,this.controlContainer=n,this.galleryService=s,o.set(this),this.answerForm=this.fb.group({answer:[null,[k.I.required]]})}ngOnInit(){}openGallery(t,e){t.preventDefault(),t.stopPropagation();const n=Object(V.b)(this.question),o=Object(V.a)(this.question,e);this.galleryService.openGallery(n,o)}};return t.\u0275fac=function(e){return new(e||t)(M.Ac(H.b),M.Ac(X.a),M.Ac(k.d),M.Ac(U.a),M.Ac(h.Eb))},t.\u0275cmp=M.uc({type:t,selectors:[["app-test-tutorial-flow-one-right-answer"]],inputs:{question:"question"},features:[M.mc([{provide:k.t,useExisting:$,multi:!0},U.a]),M.kc],decls:3,vars:5,consts:[[3,"formControl"],["radioSize","large","data-e2e","test-tutorial-one-right-answer__choice",3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["radioSize","large","data-e2e","test-tutorial-one-right-answer__choice",3,"value"],["data-e2e","test-tutorial-one-right-answer__label",1,"label"],[4,"ngIf"],["data-e2e","test-tutorial-one-right-answer__image","loading","lazy","alt","",1,"image",3,"src"],["name","zoom_next","data-e2e","test-tutorial-one-right-answer__open-trigger",1,"icon",3,"click"]],template:function(t,e){1&t&&(M.Gc(0,"ui-sb-radio-group",0),M.Ed(1,J,4,3,"ui-sb-radio-button",1),M.Xc(2,"trackBy"),M.Fc()),2&t&&(M.ed("formControl",e.control),M.nc(1),M.ed("ngForOf",null==e.question?null:e.question.answers)("ngForTrackBy",M.Yc(2,3,"$index")))},directives:[z.a,k.v,k.k,S.t,Q.a,S.u,j.a],pipes:[L.a],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]  .ui-sb-radio__wrapper{padding:24px 32px;border-radius:10px;background:var(--ui-sb-color-bg-secondary)}[_nghost-%COMP%]  ui-sb-radio-button+ui-sb-radio-button .ui-sb-radio__wrapper{margin-top:8px}[_nghost-%COMP%]  .ui-sb-radio-group{display:flex;flex-direction:column}[_nghost-%COMP%]  .ui-sb-radio__label{position:relative}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;line-height:22px}@media (min-width:768px){[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px;line-height:24px}}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{width:24px;height:24px;position:absolute;right:calc(100% + 8px);bottom:0;color:var(--ui-sb-color-icon-secondary);transition:.2s ease-in-out}@media (min-width:768px){[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{right:calc(100% + 12px)}}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]:hover{color:var(--ui-sb-color-icon-main)}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]:not(:empty) + .image[_ngcontent-%COMP%]{margin-top:16px}[_nghost-%COMP%]   .image[_ngcontent-%COMP%]{display:block;object-fit:cover;max-width:100%;min-height:64px;max-height:100%}@media (min-width:768px){[_nghost-%COMP%]   .image[_ngcontent-%COMP%]{max-height:160px}}"],changeDetection:0}),t=$=Object(o.b)([Object(m.a)()],t),t})();var tt=n("t+Hr");function et(t,e){if(1&t){const t=M.Hc();M.Ec(0),M.Bc(1,"img",4),M.Gc(2,"svg-icon",5),M.Sc("click",(function(e){M.ud(t);const n=M.Wc().index;return M.Wc().openGallery(e,n)})),M.Fc(),M.Dc()}if(2&t){const t=M.Wc().$implicit;M.nc(1),M.ed("src",null==t?null:t.files[0],M.wd)}}function nt(t,e){if(1&t&&(M.Gc(0,"ui-sb-checkbox",1),M.Gc(1,"div",2),M.Gd(2),M.Fc(),M.Ed(3,et,3,1,"ng-container",3),M.Fc()),2&t){const t=e.$implicit,n=e.index,o=M.Wc();M.ed("formControl",o.formArray.at(n))("value",null==t?null:t.id)("checkboxLarge",!0),M.nc(2),M.Hd(null==t?null:t.label),M.nc(1),M.ed("ngIf",null==t||null==t.files?null:t.files.length)}}let ot=(()=>{class t{constructor(t){this.galleryService=t}openGallery(t,e){t.preventDefault(),t.stopPropagation();const n=Object(V.b)(this.question),o=Object(V.a)(this.question,e);this.galleryService.openGallery(n,o)}}return t.\u0275fac=function(e){return new(e||t)(M.Ac(h.Eb))},t.\u0275cmp=M.uc({type:t,selectors:[["app-test-tutorial-flow-multiple-right-answer"]],inputs:{question:"question",formArray:"formArray"},decls:2,vars:4,consts:[["data-e2e","test-tutorial-multiple-answer__choice",3,"formControl","value","checkboxLarge",4,"ngFor","ngForOf","ngForTrackBy"],["data-e2e","test-tutorial-multiple-answer__choice",3,"formControl","value","checkboxLarge"],["data-e2e","test-tutorial-multiple-answer__label",1,"label"],[4,"ngIf"],["data-e2e","test-tutorial-multiple-answer__image","loading","lazy","alt","",1,"image",3,"src"],["name","zoom_next","data-e2e","test-tutorial-multiple-answer__open-trigger",1,"zoom",3,"click"]],template:function(t,e){1&t&&(M.Ed(0,nt,4,5,"ui-sb-checkbox",0),M.Xc(1,"trackBy")),2&t&&M.ed("ngForOf",null==e.question?null:e.question.answers)("ngForTrackBy",M.Yc(1,2,"$index"))},directives:[S.t,tt.a,k.v,k.k,S.u,j.a],pipes:[L.a],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]  .ui-sb-checkbox__container{padding:24px 32px;border-radius:10px;background:var(--ui-sb-color-bg-secondary)}[_nghost-%COMP%]  .ui-sb-checkbox__container .ui-sb-checkbox__checker{flex-shrink:0;margin-top:2px;margin-right:12px}@media (min-width:768px){[_nghost-%COMP%]  .ui-sb-checkbox__container .ui-sb-checkbox__checker{margin-right:16px}}[_nghost-%COMP%]  .ui-sb-checkbox__container .ui-sb-checkbox__label{position:relative}[_nghost-%COMP%]  ui-sb-checkbox+ui-sb-checkbox{margin-top:8px}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px;line-height:24px;font-weight:400}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]:not(:empty) + .image[_ngcontent-%COMP%]{margin-top:16px}[_nghost-%COMP%]   .image[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%}@media (min-width:768px){[_nghost-%COMP%]   .image[_ngcontent-%COMP%]{max-height:160px}}[_nghost-%COMP%]   .zoom[_ngcontent-%COMP%]{width:24px;height:24px;position:absolute;right:calc(100% + 8px);bottom:0;color:var(--ui-sb-color-icon-secondary);transition:.2s ease-in-out}@media (min-width:768px){[_nghost-%COMP%]   .zoom[_ngcontent-%COMP%]{right:calc(100% + 12px)}}[_nghost-%COMP%]   .zoom[_ngcontent-%COMP%]:hover{color:var(--ui-sb-color-icon-main)}"],changeDetection:0}),t})();var st=n("Lbi2"),it=n("Tupa");function at(t,e){if(1&t&&(M.Ec(0),M.Bc(1,"img",4),M.Dc()),2&t){const t=M.Wc().ngIf;M.nc(1),M.ed("src",t.files[0],M.wd)}}function ct(t,e){if(1&t&&(M.Gc(0,"ui-sb-hint",5),M.Gd(1),M.Fc()),2&t){const t=e.ngIf;M.nc(1),M.Hd(t)}}function rt(t,e){if(1&t&&(M.Ec(0),M.Ed(1,at,2,1,"ng-container",0),M.Gc(2,"div",1),M.Gd(3),M.Fc(),M.Gc(4,"ui-sb-textarea",2),M.Xc(5,"transloco"),M.Ed(6,ct,2,1,"ui-sb-hint",3),M.Fc(),M.Dc()),2&t){const t=e.ngIf,n=M.Wc();M.nc(1),M.ed("ngIf",null==t.files?null:t.files.length),M.nc(2),M.Hd(null==t?null:t.label),M.nc(1),M.ed("formControl",n.control)("autoSize",!0)("label",M.Yc(5,6,"testTutorial.yourAnswer")),M.nc(2),M.ed("ngIf",t.hint)}}let lt=(()=>{class t extends Y.a{constructor(t,e,n){super(e,t),this.formErrorsService=t,this.controlContainer=e,n.set(this)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(M.Ac(X.a),M.Ac(k.d),M.Ac(U.a))},t.\u0275cmp=M.uc({type:t,selectors:[["app-test-tutorial-flow-input-answer"]],inputs:{question:"question"},features:[M.mc([{provide:k.t,useExisting:t,multi:!0},U.a]),M.kc],decls:1,vars:1,consts:[[4,"ngIf"],["data-e2e","test-tutorial-flow-input__label"],["data-i18n","testTutorial.yourAnswer","placeholder","","data-e2e","test-tutorial-flow-input__text",3,"formControl","autoSize","label"],["data-e2e","test-tutorial-flow-input__hint",4,"ngIf"],["data-e2e","test-tutorial-flow-input__image","loading","lazy","alt","",3,"src"],["data-e2e","test-tutorial-flow-input__hint"]],template:function(t,e){1&t&&M.Ed(0,rt,7,8,"ng-container",0),2&t&&M.ed("ngIf",e.question.answers[0])},directives:[S.u,st.a,k.v,k.k,it.a],pipes:[E.g],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),t})();var ut=n("zrUn"),dt=n("G8aL");function pt(t,e){if(1&t&&M.Bc(0,"app-test-tutorial-flow-one-right-answer",16),2&t){const t=M.Wc(),e=t.index,o=t.$implicit,s=M.Wc();var n=null;M.ed("formControl",null==s.form||null==s.form.controls||null==(n=s.form.controls.steps.at(e))?null:n.controls.answer)("question",o)}}function gt(t,e){if(1&t&&M.Bc(0,"app-test-tutorial-flow-multiple-right-answer",17),2&t){const t=M.Wc(),e=t.index,o=t.$implicit,s=M.Wc();var n=null;M.ed("formArray",null==s.form||null==s.form.controls||null==(n=s.form.controls.steps.at(e))?null:n.controls.answer)("question",o)}}function _t(t,e){if(1&t&&M.Bc(0,"app-test-tutorial-flow-input-answer",16),2&t){const t=M.Wc(),e=t.index,o=t.$implicit,s=M.Wc();var n=null;M.ed("formControl",null==s.form||null==s.form.controls||null==(n=s.form.controls.steps.at(e))?null:n.controls.answer)("question",o)}}function ht(t,e){if(1&t&&(M.Gc(0,"cdk-step",11),M.Gc(1,"app-test-tutorial-flow-question",12),M.Ec(2,13),M.Ed(3,pt,1,2,"app-test-tutorial-flow-one-right-answer",14),M.Ed(4,gt,1,2,"app-test-tutorial-flow-multiple-right-answer",15),M.Ed(5,_t,1,2,"app-test-tutorial-flow-input-answer",14),M.Dc(),M.Fc(),M.Fc()),2&t){const t=e.$implicit,n=e.index,o=M.Wc();M.ed("formGroupName",n)("stepControl",o.form.controls.steps.at(n).controls.answer),M.nc(1),M.ed("question",t)("lessonId",o.lessonId),M.nc(1),M.ed("ngSwitch",t.type),M.nc(1),M.ed("ngSwitchCase",o.testQuestionTypeEnum.ONE_RIGHT_ANSWER),M.nc(1),M.ed("ngSwitchCase",o.testQuestionTypeEnum.MULTIPLE_RIGHT_ANSWER),M.nc(1),M.ed("ngSwitchCase",o.testQuestionTypeEnum.STRING_INPUT)}}const mt=function(t,e){return[t,e]};function bt(t,e){if(1&t){const t=M.Hc();M.Gc(0,"button",18),M.Sc("click",(function(){return M.ud(t),M.Wc().finishTest()})),M.Gd(1),M.Xc(2,"transloco"),M.Fc()}if(2&t){const t=M.Wc();var n=null;M.ed("lockButtonWhileLoading",M.kd(5,mt,t,t.finishTest))("disabled",null==t.form||null==t.form.controls||null==t.form.controls.steps||null==(n=t.form.controls.steps.at(t.stepper.selectedIndex))?null:n.invalid),M.nc(1),M.Id(" ",M.Yc(2,3,"testTutorial.done")," ")}}function Ct(t,e){if(1&t){const t=M.Hc();M.Gc(0,"button",19),M.Sc("click",(function(){return M.ud(t),M.Wc().toNextQuestion()})),M.Gd(1),M.Xc(2,"transloco"),M.Fc()}if(2&t){const t=M.Wc();var n=null;M.ed("disabled",null==t.form||null==t.form.controls||null==t.form.controls.steps||null==(n=t.form.controls.steps.at(t.stepper.selectedIndex))?null:n.invalid),M.nc(1),M.Id(" ",M.Yc(2,2,"testTutorial.next")," ")}}let ft=(()=>{let t=class{constructor(t,e,n,o,i,c,r,l,u){var d;this.router=t,this.studentsTestsService=e,this.route=n,this.formService=o,this.logBus=i,this.coursesFacade=c,this.footerVisibilityService=r,this.confirm=l,this.translocoService=u;const p=null===(d=this.router.getCurrentNavigation())||void 0===d?void 0:d.extras.state,g=a.a.reduceSnapshot(this.route.snapshot);this.stepController=this.route.snapshot.data.stepController,this.test=null==p?void 0:p.test,this.testQuestionTypeEnum=s.Wb.TypeEnum,this.lessonId=g.token,this.form=this.formService.buildForm(this.test),this.testStatusUpdated=!1}ngOnInit(){this.testCompleted$=this.studentsTestsService.v3StudentsTestsUserStatusRead({lessonId:this.lessonId}).pipe(Object(C.a)(1),Object(f.a)((({is_completed:t})=>t)),Object(O.a)((()=>Object(b.a)(!1))),Object(v.a)(1),Object(m.b)(this))}ngAfterViewInit(){this.stepController.initStepper(this.stepper),this.stepController.initCompletedSteps()}onSelectionChange(t){var e;t.previouslySelectedStep.completed=!0,this.sendAnswer(this.form.controls.steps.at(t.previouslySelectedIndex).controls.answer.value,null===(e=this.test.questions[t.previouslySelectedIndex])||void 0===e?void 0:e.id).pipe(Object(C.a)(1),Object(p.a)(!1),Object(x.a)((()=>this.testCompleted$)),Object(w.a)((t=>!t&&!this.testStatusUpdated)),Object(m.b)(this)).subscribe((()=>this.updateTestStatus()))}finishTest(){var t;this.sendAnswer(this.form.controls.steps.at(this.stepper.selectedIndex).controls.answer.value,null===(t=this.test.questions[this.stepper.selectedIndex])||void 0===t?void 0:t.id).pipe(Object(x.a)((()=>this.studentsTestsService.v3StudentsTestsFinishCreate({lessonId:this.lessonId}))),Object(x.a)((()=>this.studentsTestsService.v3StudentsTestsUserStatusRead({lessonId:this.lessonId}))),Object(p.a)(!1),Object(g.a)(this,this.finishTest),Object(m.b)(this)).subscribe((({is_completed:t})=>{var e;this.coursesFacade.updateTopicItemUserStatus(null===(e=this.test.topic)||void 0===e?void 0:e.course_id,this.lessonId,t?s.wc.UserStatusEnum.DONE:s.wc.UserStatusEnum.FAIL),this.router.navigate(["../"],{relativeTo:this.route,state:{finished:!0}})}))}toNextQuestion(){this.logNavigateToNextQuestion(),this.stepper.next()}canDeactivate(){var t;const e=null===(t=this.router.getCurrentNavigation())||void 0===t?void 0:t.extras.state;return(null==e?void 0:e.finished)?(this.footerVisibilityService.resetVisibility(),Object(b.a)(!0)):this.confirm.open({maxWidth:696,maxWidthBreakpoints:{md:616},data:{title:`${this.translocoService.translate("closeTest",{},"test-tutorial")}<br>${this.translocoService.translate("resultsWillSave",{},"test-tutorial")}`,confirmText:this.translocoService.translate("close",{},"test-tutorial"),cancelText:this.translocoService.translate("cancel",{},"test-tutorial")}}).afterClosed().pipe(Object(T.a)((()=>this.logTestLeaveBegin())),Object(T.a)((t=>this.logTestLeaveSolution(t))),Object(T.a)((t=>{t&&this.footerVisibilityService.resetVisibility()})))}sendAnswer(t,e){const n={answers:Array.isArray(t)?t.filter((t=>!!t)):[t],question_id:e};return this.studentsTestsService.v3StudentsTestsAnswerCreate({lessonId:this.lessonId,data:n})}updateTestStatus(){var t;this.coursesFacade.updateTopicItemUserStatus(null===(t=this.test.topic)||void 0===t?void 0:t.course_id,this.lessonId,s.wc.UserStatusEnum.START),this.testStatusUpdated=!0}logTestLeaveBegin(){const t=new u.a({event_type:l.a.TEST.FLOW.LEAVE.BEGIN,event_params:{lesson_token:this.lessonId}});this.logBus.log(new r.a({immediateDispatch:!0,message:t}))}logTestLeaveSolution(t){if(t){const t=new u.a({event_type:l.a.TEST.FLOW.LEAVE.SUBMIT,event_params:{lesson_token:this.lessonId}});this.logBus.log(new r.a({immediateDispatch:!0,message:t}))}else{const t=new u.a({event_type:l.a.TEST.FLOW.LEAVE.CANCEL,event_params:{lesson_token:this.lessonId}});this.logBus.log(new r.a({immediateDispatch:!0,message:t}))}}logNavigateToNextQuestion(){const t=new u.a({event_type:l.a.TEST.FLOW.QUESTION.NEXT,event_params:{lesson_token:this.lessonId}});this.logBus.log(new r.a({immediateDispatch:!0,message:t}))}};return t.\u0275fac=function(e){return new(e||t)(M.Ac(y.f),M.Ac(s.Jf),M.Ac(y.a),M.Ac(P.a),M.Ac(c.a),M.Ac(d.a),M.Ac(_.a),M.Ac(h.U),M.Ac(E.h))},t.\u0275cmp=M.uc({type:t,selectors:[["app-test-tutorial-flow"]],viewQuery:function(t,e){var n;1&t&&M.Ad(h.dc,!0),2&t&&M.rd(n=M.Tc())&&(e.stepper=n.first)},decls:15,vars:16,consts:[[3,"formGroup"],["formArrayName","steps",3,"selectedIndex","linear","selectionChange"],[3,"formGroupName","stepControl",4,"ngFor","ngForOf"],[1,"test-tutorial__progress","progress"],[1,"ui-sb-container"],[1,"ui-sb-grid-container","ui-sb-grid-gap"],[1,"progress__container","ui-sb-col-md-12"],["data-e2e","test-tutorial-flow__progress-count",1,"progress__counter"],[1,"progress__bar",3,"percent","barHeight"],["type","button","class","ui-sb-button--default ui-sb-button--small ui-sb-button--view-1","data-e2e","test-tutorial-flow__done-trigger","data-i18n","testTutorial.done",3,"lockButtonWhileLoading","disabled","click",4,"ngIf","ngIfElse"],["nextButton",""],[3,"formGroupName","stepControl"],[3,"question","lessonId"],[3,"ngSwitch"],[3,"formControl","question",4,"ngSwitchCase"],[3,"formArray","question",4,"ngSwitchCase"],[3,"formControl","question"],[3,"formArray","question"],["type","button","data-e2e","test-tutorial-flow__done-trigger","data-i18n","testTutorial.done",1,"ui-sb-button--default","ui-sb-button--small","ui-sb-button--view-1",3,"lockButtonWhileLoading","disabled","click"],["type","button","data-e2e","test-tutorial-flow__next-trigger","data-i18n","testTutorial.next",1,"ui-sb-button--default","ui-sb-button--small","ui-sb-button--view-1",3,"disabled","click"]],template:function(t,e){if(1&t&&(M.Gc(0,"form",0),M.Gc(1,"ui-sb-stepper",1),M.Sc("selectionChange",(function(t){return e.onSelectionChange(t)})),M.Ed(2,ht,6,8,"cdk-step",2),M.Fc(),M.Gc(3,"div",3),M.Gc(4,"div",4),M.Gc(5,"div",5),M.Gc(6,"div",6),M.Gc(7,"span",7),M.Gd(8),M.Xc(9,"leadingZero"),M.Xc(10,"leadingZero"),M.Fc(),M.Bc(11,"app-progress-bar",8),M.Ed(12,bt,3,8,"button",9),M.Ed(13,Ct,3,4,"ng-template",null,10,M.Fd),M.Fc(),M.Fc(),M.Fc(),M.Fc(),M.Fc()),2&t){const t=M.sd(14);M.ed("formGroup",e.form),M.nc(1),M.ed("selectedIndex",e.stepController.initialStepIdx)("linear",!0),M.nc(1),M.ed("ngForOf",null==e.test?null:e.test.questions),M.nc(6),M.Jd("",M.Zc(9,10,e.stepController.selectedStepNumber,2)," / ",M.Zc(10,13,null==e.stepper||null==e.stepper.steps?null:e.stepper.steps.length,2),""),M.nc(3),M.ed("percent",e.stepController.progressPercent)("barHeight",6),M.nc(1),M.ed("ngIf",e.stepController.isLastStep())("ngIfElse",t)}},directives:[k.K,k.w,k.n,I.b,k.h,S.t,F.a,S.u,G.a,k.o,D,S.y,S.z,Z,k.v,k.k,ot,lt,ut.a],pipes:[dt.a,E.g],styles:["[_nghost-%COMP%]{margin-bottom:132px;display:block}[_nghost-%COMP%]  .ui-sb-stepper__step{width:100%}[_nghost-%COMP%]   .test-tutorial__progress[_ngcontent-%COMP%]{transform:translateZ(.1px);position:fixed;right:0;bottom:var(--safari-bottom-offset);left:0;background-color:var(--ui-sb-color-bg-main)}[_nghost-%COMP%]   .progress__container[_ngcontent-%COMP%]{display:flex;align-items:center;height:80px}@media (min-width:1024px){[_nghost-%COMP%]   .progress__container[_ngcontent-%COMP%]{grid-column:3/11}}[_nghost-%COMP%]   .progress__counter[_ngcontent-%COMP%]{font-size:14px;line-height:14px;font-weight:500;white-space:nowrap}[_nghost-%COMP%]   .progress__bar[_ngcontent-%COMP%]{margin-right:32px;margin-left:20px;flex-grow:1}@media (min-width:1024px){[_nghost-%COMP%]   .progress__bar[_ngcontent-%COMP%]{margin-right:40px;margin-left:16px}}@media (min-width:1280px){[_nghost-%COMP%]   .progress__bar[_ngcontent-%COMP%]{margin-left:20px}}[_nghost-%COMP%]   .progress__bar[_ngcontent-%COMP%]     .progress-bar__preview{background-color:var(--ui-sb-color-bg-secondary-accent)}"],changeDetection:0}),Object(o.b)([i.d,Object(o.c)("design:type",Function),Object(o.c)("design:paramtypes",[]),Object(o.c)("design:returntype",void 0)],t.prototype,"finishTest",null),t=Object(o.b)([Object(m.a)()],t),t})()},"qV/k":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var o=n("D57K"),s=n("ruzS"),i=n("yQYJ"),a=n("QBoQ"),c=n("xzqx"),r=n("HM3f"),l=n("ROBh"),u=n("YtkY"),d=n("J+dc"),p=n("xVbo"),g=n("TLy2"),_=n("8j5Y"),h=n("lDeo"),m=n("EM62");let b=(()=>{let t=class{constructor(t,e,n,o){this.tutorialService=t,this.studentsVideosService=e,this.env=n,this.coursesFacade=o}completeNonTrackingTutorial(t){Object(r.a)([t,this.tutorialService.topicItem$,this.tutorialService.tree$.pipe(Object(u.a)((({id:t})=>t)))]).pipe(Object(d.a)(1),Object(p.a)((([,t])=>t.lesson_type===s.ob.LessonTypeEnum.VIDEOLESSON)),Object(p.a)((([t])=>this.isNonTrackingTutorial(t))),Object(g.a)((([,t,e])=>this.changeLessonStatusForUnknownPlayer(t.id,e,t.user_status))),Object(c.b)(this)).subscribe()}isNonTrackingTutorial(t){var e;return!t.video||!t.video.duration||!this.checkVideoSourceForBoomstream(null===(e=t.video)||void 0===e?void 0:e.link)}checkVideoSourceForBoomstream(t){return this.env.get("playerUrl").some((e=>new RegExp(e).test(t)))}changeLessonStatusForUnknownPlayer(t,e,n){switch(n){case null:return this.startAndFinishLesson(t,e);case s.ob.UserStatusEnum.START:return this.finishLesson(t,e);default:return Object(l.a)(void 0)}}startAndFinishLesson(t,e){return this.studentsVideosService.v3StudentsVideosStartCreate({lessonId:t}).pipe(Object(g.a)((()=>this.finishLesson(t,e))))}finishLesson(t,e){return this.studentsVideosService.v3StudentsVideosFinishCreate({lessonId:t}).pipe(Object(_.a)((()=>this.coursesFacade.updateTopicItemUserStatus(e,t,s.ob.UserStatusEnum.DONE))))}};return t.\u0275fac=function(e){return new(e||t)(m.Oc(h.a),m.Oc(s.Kf),m.Oc(i.a),m.Oc(a.a))},t.\u0275prov=m.wc({token:t,factory:t.\u0275fac}),t=Object(o.b)([Object(c.a)()],t),t})()},sn6r:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var o=n("D57K"),s=n("ruzS"),i=n("HNR3"),a=n("xzqx"),c=n("ROBh"),r=n("YtkY"),l=n("4e/d"),u=n("wqq/"),d=n("FZJX"),p=n("EM62");let g=(()=>{let t=class extends i.a{constructor(t){super(),this.surveysResponsesService=t}hasEvaluations(){return this.surveysResponsesService.v3SurveysResponsesLessonQualityRead({lessonId:this.entityToken}).pipe(Object(r.a)((()=>!0)),Object(l.a)((()=>Object(c.a)(!1))),Object(u.a)(1))}getController(){return this.surveyTreeSource$.pipe(Object(r.a)((t=>new d.a(t,this.entityToken))))}setSurveyTreeSource(t){this.surveyTreeSource$=t}buildCreateRequest(t){return this.surveysResponsesService.v3SurveysResponsesLessonQualityCreate({data:{lesson_id:this.entityToken,provided_answers:this.mapSelectionToUserResponseAnswer(t)}})}buildPatchRequest(t){return this.surveysResponsesService.v3SurveysResponsesLessonQualityPartialUpdate({lessonId:this.lastResponse.lesson_id,data:Object.assign(Object.assign({},this.lastResponse),{provided_answers:this.mapSelectionToUserResponseAnswer(t)})})}mapSelectionToUserResponseAnswer(t){return t.map((t=>({answer_id:t.answerId,value:t.questionType===s.Ub.TypeEnum.INPUT?t.value:void 0,comment:t.comment})))}};return t.\u0275fac=function(e){return new(e||t)(p.Oc(s.Wf))},t.\u0275prov=p.wc({token:t,factory:t.\u0275fac}),t=Object(o.b)([Object(a.a)()],t),t})()},stbA:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(t){return t.TESTING="testing",t}({})}}]);